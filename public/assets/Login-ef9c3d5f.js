import{_ as M,bd as pe,be as fe,bf as me,a as p,b2 as ge,bg as xe,X as be,j as r,bh as he,Z as ye,a0 as je,R as Se,V as X,a5 as $e,a1 as Y,B as Z,u as we,c as Ge,bi as ve,b as Ce,d as Oe,bj as _e,bk as ke,S as k,T as F,bl as Ee,I as Pe,bm as Le}from"./index-4ffecd31.js";import{u as Me}from"./index.esm-6c274278.js";import{I as U}from"./InputLabel-3e1049b5.js";import{T as K}from"./TextField-0f58b66a.js";import{I as Ne}from"./InputAdornment-d8cd4b73.js";import{A as Te}from"./Alert-972d9931.js";import{M as qe}from"./Link-ab6d5a3d.js";import{B as Ae}from"./Button-f956e5a8.js";import"./Select-5be36243.js";import"./FormControl-fc602a27.js";const Ie=(e,n)=>e.filter(s=>n.includes(s)),E=(e,n,s)=>{const i=e.keys[0];Array.isArray(n)?n.forEach((o,t)=>{s((c,a)=>{t<=e.keys.length-1&&(t===0?Object.assign(c,a):c[e.up(e.keys[t])]=a)},o)}):n&&typeof n=="object"?(Object.keys(n).length>e.keys.length?e.keys:Ie(e.keys,Object.keys(n))).forEach(t=>{if(e.keys.indexOf(t)!==-1){const c=n[t];c!==void 0&&s((a,x)=>{i===t?Object.assign(a,x):a[e.up(t)]=x},c)}}):(typeof n=="number"||typeof n=="string")&&s((o,t)=>{Object.assign(o,t)},n)};function g(e){return e?`Level${e}`:""}function N(e){return e.unstable_level>0&&e.container}function H(e){return function(s){return`var(--Grid-${s}Spacing${g(e.unstable_level)})`}}function I(e){return function(s){return e.unstable_level===0?`var(--Grid-${s}Spacing)`:`var(--Grid-${s}Spacing${g(e.unstable_level-1)})`}}function R(e){return e.unstable_level===0?"var(--Grid-columns)":`var(--Grid-columns${g(e.unstable_level-1)})`}const Re=({theme:e,ownerState:n})=>{const s=H(n),i={};return E(e.breakpoints,n.gridSize,(o,t)=>{let c={};t===!0&&(c={flexBasis:0,flexGrow:1,maxWidth:"100%"}),t==="auto"&&(c={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof t=="number"&&(c={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${t} / ${R(n)}${N(n)?` + ${s("column")}`:""})`}),o(i,c)}),i},ze=({theme:e,ownerState:n})=>{const s={};return E(e.breakpoints,n.gridOffset,(i,o)=>{let t={};o==="auto"&&(t={marginLeft:"auto"}),typeof o=="number"&&(t={marginLeft:o===0?"0px":`calc(100% * ${o} / ${R(n)})`}),i(s,t)}),s},Be=({theme:e,ownerState:n})=>{if(!n.container)return{};const s=N(n)?{[`--Grid-columns${g(n.unstable_level)}`]:R(n)}:{"--Grid-columns":12};return E(e.breakpoints,n.columns,(i,o)=>{i(s,{[`--Grid-columns${g(n.unstable_level)}`]:o})}),s},De=({theme:e,ownerState:n})=>{if(!n.container)return{};const s=I(n),i=N(n)?{[`--Grid-rowSpacing${g(n.unstable_level)}`]:s("row")}:{};return E(e.breakpoints,n.rowSpacing,(o,t)=>{var c;o(i,{[`--Grid-rowSpacing${g(n.unstable_level)}`]:typeof t=="string"?t:(c=e.spacing)==null?void 0:c.call(e,t)})}),i},Ve=({theme:e,ownerState:n})=>{if(!n.container)return{};const s=I(n),i=N(n)?{[`--Grid-columnSpacing${g(n.unstable_level)}`]:s("column")}:{};return E(e.breakpoints,n.columnSpacing,(o,t)=>{var c;o(i,{[`--Grid-columnSpacing${g(n.unstable_level)}`]:typeof t=="string"?t:(c=e.spacing)==null?void 0:c.call(e,t)})}),i},We=({theme:e,ownerState:n})=>{if(!n.container)return{};const s={};return E(e.breakpoints,n.direction,(i,o)=>{i(s,{flexDirection:o})}),s},Fe=({ownerState:e})=>{const n=H(e),s=I(e);return M({minWidth:0,boxSizing:"border-box"},e.container&&M({display:"flex",flexWrap:"wrap"},e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},{margin:`calc(${n("row")} / -2) calc(${n("column")} / -2)`},e.disableEqualOverflow&&{margin:`calc(${n("row")} * -1) 0px 0px calc(${n("column")} * -1)`}),(!e.container||N(e))&&M({padding:`calc(${s("row")} / 2) calc(${s("column")} / 2)`},(e.disableEqualOverflow||e.parentDisableEqualOverflow)&&{padding:`${s("row")} 0px 0px ${s("column")}`}))},Ue=e=>{const n=[];return Object.entries(e).forEach(([s,i])=>{i!==!1&&i!==void 0&&n.push(`grid-${s}-${String(i)}`)}),n},Ke=(e,n="xs")=>{function s(i){return i===void 0?!1:typeof i=="string"&&!Number.isNaN(Number(i))||typeof i=="number"&&i>0}if(s(e))return[`spacing-${n}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const i=[];return Object.entries(e).forEach(([o,t])=>{s(t)&&i.push(`spacing-${o}-${String(t)}`)}),i}return[]},Xe=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([n,s])=>`direction-${n}-${s}`):[`direction-xs-${String(e)}`],Ye=["className","children","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow","unstable_level"],Ze=pe(),He=fe("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,n)=>n.root});function Je(e){return me({props:e,name:"MuiGrid",defaultTheme:Ze})}function Qe(e={}){const{createStyledComponent:n=He,useThemeProps:s=Je,componentName:i="MuiGrid"}=e,o=p.createContext(void 0),t=(x,u)=>{const{container:y,direction:$,spacing:j,wrap:b,gridSize:w}=x,f={root:["root",y&&"container",b!=="wrap"&&`wrap-xs-${String(b)}`,...Xe($),...Ue(w),...y?Ke(j,u.breakpoints.keys[0]):[]]};return je(f,G=>Se(i,G),{})},c=n(Be,Ve,De,Re,We,Fe,ze),a=p.forwardRef(function(u,y){var $,j,b,w,f,G,P,v;const h=ge(),T=s(u),C=xe(T),l=p.useContext(o),{className:O,children:J,columns:Q=12,container:ee=!1,component:ne="div",direction:se="row",wrap:re="wrap",spacing:q=0,rowSpacing:te=q,columnSpacing:ie=q,disableEqualOverflow:z,unstable_level:S=0}=C,oe=be(C,Ye);let L=z;S&&z!==void 0&&(L=u.disableEqualOverflow);const B={},D={},V={};Object.entries(oe).forEach(([d,_])=>{h.breakpoints.values[d]!==void 0?B[d]=_:h.breakpoints.values[d.replace("Offset","")]!==void 0?D[d.replace("Offset","")]=_:V[d]=_});const ae=($=u.columns)!=null?$:S?void 0:Q,ce=(j=u.spacing)!=null?j:S?void 0:q,le=(b=(w=u.rowSpacing)!=null?w:u.spacing)!=null?b:S?void 0:te,ue=(f=(G=u.columnSpacing)!=null?G:u.spacing)!=null?f:S?void 0:ie,W=M({},C,{level:S,columns:ae,container:ee,direction:se,wrap:re,spacing:ce,rowSpacing:le,columnSpacing:ue,gridSize:B,gridOffset:D,disableEqualOverflow:(P=(v=L)!=null?v:l)!=null?P:!1,parentDisableEqualOverflow:l}),de=t(W,h);let A=r.jsx(c,M({ref:y,as:ne,ownerState:W,className:ye(de.root,O)},V,{children:p.Children.map(J,d=>{if(p.isValidElement(d)&&he(d,["Grid"])){var _;return p.cloneElement(d,{unstable_level:(_=d.props.unstable_level)!=null?_:S+1})}return d})}));return L!==void 0&&L!==(l??!1)&&(A=r.jsx(o.Provider,{value:L,children:A})),A});return a.muiName="Grid",a}const en=Qe({createStyledComponent:X("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(e,n)=>n.root}),componentName:"MuiGrid2",useThemeProps:e=>$e({props:e,name:"MuiGrid2"})}),m=en,nn=Y(r.jsx("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5-.59 1.22-1.42 2.27-2.41 3.12l1.41 1.41c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l1.65 1.65C10.66 6.09 11.32 6 12 6zm-1.07 1.14L13 9.21c.57.25 1.03.71 1.28 1.28l2.07 2.07c.08-.34.14-.7.14-1.07C16.5 9.01 14.48 7 12 7c-.37 0-.72.05-1.07.14zM2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.98-.29 4.32-.82l3.42 3.42 1.41-1.41L3.42 2.45 2.01 3.87zm7.5 7.5 2.61 2.61c-.04.01-.08.02-.12.02-1.38 0-2.5-1.12-2.5-2.5 0-.05.01-.08.01-.13zm-3.4-3.4 1.75 1.75c-.23.55-.36 1.15-.36 1.78 0 2.48 2.02 4.5 4.5 4.5.63 0 1.23-.13 1.77-.36l.98.98c-.88.24-1.8.38-2.75.38-3.79 0-7.17-2.13-8.82-5.5.7-1.43 1.72-2.61 2.93-3.53z"}),"VisibilityOffOutlined"),sn=Y(r.jsx("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"}),"VisibilityOutlined"),rn=X(Z)(({theme:e})=>({backgroundColor:`${e.palette.background.paper}`,boxShadow:`${e.shadows[4]}`,borderRadius:"8px",[e.breakpoints.down("lg")]:{width:400},[e.breakpoints.up("lg")]:{width:475},[e.breakpoints.down("sm")]:{margin:"20px"},[e.breakpoints.up("sm")]:{margin:"24px"}})),tn=({children:e})=>r.jsx(r.Fragment,{children:r.jsx(rn,{children:e})}),xn=()=>{var T,C;const[e,n]=p.useState(!1),s=we(),i=()=>n(l=>!l),o=l=>{l.preventDefault()},{register:t,handleSubmit:c,formState:{errors:a}}=Me({defaultValues:{usuario:"",contraseña:""}}),x=Ge(),[u,y]=p.useState([]),[$,{isError:j,isSuccess:b,data:w,error:f}]=ve(),G=async l=>{$({loginData:l})},P=Ce(),{isAuthenticated:v,user:h}=Oe(l=>l.auth);return p.useEffect(()=>{b&&(x(_e(!0)),x(ke(w)))},[b]),p.useEffect(()=>{j&&f?"data"in f&&y(l=>{const O=f.data;return O.length>0?[...l,...O]:[...l,f.data]}):y([])},[j,f]),p.useEffect(()=>{v&&(h.rol==="Administrador"||h.rol==="Usuario")?P("/dashboard"):v&&h.rol==="Invitado"&&P("/invitado/tickets")},[v,h]),r.jsx(r.Fragment,{children:r.jsx(tn,{children:r.jsxs(m,{container:!0,spacing:5,rowSpacing:10,sx:{margin:0,padding:0},children:[r.jsx(m,{xs:12,sx:{padding:0},children:r.jsxs(k,{spacing:4,sx:{position:"relative",backgroundColor:`${s.palette.primary.main}`,borderRadius:"8px 8px 0 0",padding:"24px 0 64px 0"},children:[r.jsxs(k,{alignItems:"center",justifyContent:"center",spacing:1,children:[r.jsx(F,{component:"h3",variant:"h3",textAlign:"center",color:s.palette.common.white,children:"Welcome to Mercurial Systems!"}),r.jsx(F,{component:"p",variant:"body1",textAlign:"center",color:s.palette.common.white,children:"Your safety is our absolute priority."})]}),r.jsx(Z,{sx:{position:"absolute",left:"calc(50% - 40px)",bottom:"-40px",borderTop:0,borderBottom:`4px solid ${s.palette.primary.darker}`,borderRadius:"50%",display:"flex",backgroundColor:`${s.palette.background.paper}`,padding:.5},children:r.jsx(Ee,{l:"80"})})]})}),r.jsx(m,{xs:12,children:r.jsx("form",{noValidate:!0,onSubmit:c(G),children:r.jsxs(m,{container:!0,spacing:3,children:[r.jsx(m,{xs:12,children:r.jsxs(k,{spacing:1,children:[r.jsx(U,{htmlFor:"usuario",children:"Username"}),r.jsx(K,{id:"usuario",variant:"outlined",placeholder:"demo@company.com",...t("usuario",{required:"Username is required."}),error:!!(a!=null&&a.usuario),helperText:(T=a==null?void 0:a.usuario)==null?void 0:T.message})]})}),r.jsx(m,{xs:12,children:r.jsxs(k,{spacing:1,children:[r.jsx(U,{htmlFor:"contraseña",children:"Password"}),r.jsx(K,{id:"contraseña",type:e?"text":"password",placeholder:"******",...t("contraseña",{required:"Password is required."}),error:!!(a!=null&&a.contraseña),helperText:(C=a==null?void 0:a.contraseña)==null?void 0:C.message,InputProps:{endAdornment:r.jsx(Ne,{position:"end",children:r.jsx(Pe,{"aria-label":"toggle contraseña visibility",onClick:i,onMouseDown:o,edge:"end",children:e?r.jsx(sn,{}):r.jsx(nn,{})})})}})]})}),u.length>0&&r.jsx(m,{xs:12,children:r.jsx(k,{spacing:1,children:u.map((l,O)=>r.jsx(Te,{color:"warning",severity:"error",children:l.message},O))})}),r.jsx(m,{xs:12,children:r.jsx(k,{direction:"row",alignItems:"center",justifyContent:"flex-end",children:r.jsx(qe,{component:Le,to:"/auth/forgot-password",underline:"hover",color:"inherit",children:"Forgot Password?"})})}),r.jsx(m,{xs:12,children:r.jsx(Ae,{variant:"contained",fullWidth:!0,type:"submit",sx:{borderRadius:5},children:"Login"})})]})})})]})})})};export{xn as Login,xn as default};
