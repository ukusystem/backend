import{r,b4 as C,b5 as I,L as j,bq as E,b6 as F,j as n,v as R,a0 as y,a1 as M,B as w,aZ as T,bb as k}from"./index-88bcf575.js";import{o as D,q as L,t as $,s as V,v as _,w as q,x as z,y as A}from"./useMobilePicker-6b159bfd.js";import{v as B}from"./validateTime-83e041f3.js";import{S as O}from"./ServerError-240fa9ad.js";const U=u=>{const o=D(u),{forwardedProps:a,internalProps:s}=L(o,"time");return $({forwardedProps:a,internalProps:s,valueManager:V,fieldValueManager:_,validator:B,valueType:"time"})},W=["slots","slotProps","InputProps","inputProps"],K=r.forwardRef(function(o,a){const s=C({props:o,name:"MuiTimeField"}),{slots:e,slotProps:l,InputProps:p,inputProps:P}=s,d=I(s,W),S=s,c=(e==null?void 0:e.textField)??(o.enableAccessibleFieldDOMStructure?q:j),i=E({elementType:c,externalSlotProps:l==null?void 0:l.textField,externalForwardedProps:d,ownerState:S,additionalProps:{ref:a}});i.inputProps=F({},P,i.inputProps),i.InputProps=F({},p,i.InputProps);const f=U(i),h=z(f),m=A(F({},h,{slots:e,slotProps:l}));return n.jsx(c,F({},m))}),N=({q:u,cmr_id:o,ctrl_id:a})=>{const s=r.useRef(null),e=r.useRef(null),[l,p]=r.useState(!1),[P,d]=r.useState(!1),[S,c]=r.useState(!1),[i,f]=r.useState(!1),[h,m]=r.useState(null),v=R(),b=t=>{t.currentTarget===t.target&&v(k())};return r.useEffect(()=>(e.current||(e.current=y(`${M}/stream/${a}/${o}/${u}`)),e.current.on("stream_flux",t=>{s.current&&t&&(s.current.src=t)}),e.current.on("stream_state",t=>{const{state:x,typeState:g}=t;g==="isConfiguring"&&p(x),g==="isError"&&c(x),g==="isLoading"&&d(x),g==="isSuccess"&&f(x)}),e.current.on("stream_error",t=>{m(t)}),()=>{e.current&&(e.current.disconnect(),e.current=null),s.current&&(s.current=null),p(!1),c(!1),d(!1),f(!1),m(null)}),[a,o,u]),n.jsx(n.Fragment,{children:n.jsxs(w,{sx:{width:"100%",height:"100%",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},onDoubleClickCapture:b,children:[l&&n.jsx(T,{children:"Configurando"}),P&&n.jsx(T,{children:"Cargando"}),S&&n.jsx(O,{children:h}),e.current&&i&&n.jsx("img",{ref:s,style:{width:"100%",height:"100%",position:"absolute"},alt:`Video Stream ${o}`,onDoubleClickCapture:b})]})})};export{N as S,K as T};
