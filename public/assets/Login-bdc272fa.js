import{b3 as k,j as e,r,l as P,ak as U,t as q,cs as B,q as D,h as O,ct as R,cu as _,cv as G,cw as K,bC as p,K as i,n as C,G as a,a3 as L,Q as A,I as N,cx as Q,V as W,b8 as H}from"./index-0f417446.js";import{A as J}from"./index-649e1ee8.js";import{I as X}from"./InputAdornment-0fd39976.js";import{A as Y}from"./Alert-b47aa335.js";import{M as Z}from"./Link-b19bc365.js";const $=k(e.jsx("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5-.59 1.22-1.42 2.27-2.41 3.12l1.41 1.41c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l1.65 1.65C10.66 6.09 11.32 6 12 6m-1.07 1.14L13 9.21c.57.25 1.03.71 1.28 1.28l2.07 2.07c.08-.34.14-.7.14-1.07C16.5 9.01 14.48 7 12 7c-.37 0-.72.05-1.07.14M2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.98-.29 4.32-.82l3.42 3.42 1.41-1.41L3.42 2.45zm7.5 7.5 2.61 2.61c-.04.01-.08.02-.12.02-1.38 0-2.5-1.12-2.5-2.5 0-.05.01-.08.01-.13m-3.4-3.4 1.75 1.75c-.23.55-.36 1.15-.36 1.78 0 2.48 2.02 4.5 4.5 4.5.63 0 1.23-.13 1.77-.36l.98.98c-.88.24-1.8.38-2.75.38-3.79 0-7.17-2.13-8.82-5.5.7-1.43 1.72-2.61 2.93-3.53"}),"VisibilityOffOutlined"),ee=k(e.jsx("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4m0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7"}),"VisibilityOutlined"),re=()=>{var I,v;const[g,M]=r.useState(!1),j=P(),z=()=>M(t=>!t),E=t=>{t.preventDefault()},{register:f,handleSubmit:T,formState:{errors:s}}=U({defaultValues:{usuario:"",contraseña:""}}),o=q(),[b,S]=r.useState([]),[V,{isError:w,isSuccess:y,data:u,error:n,isLoading:c}]=B(),F=async t=>{V(t)},h=D(),{isAuthenticated:m,user:d,isLoading:x}=O(t=>t.auth);return r.useEffect(()=>{o(R(c)),y&&(o(_(u.data.user)),o(G(!0)),o(K(u.data.access_token)))},[c,y,u]),r.useEffect(()=>{w&&n?"data"in n&&S(t=>{const l=n.data;return l.length>0?[...t,...l]:[...t,n.data]}):S([])},[w,n]),r.useEffect(()=>{m&&!x&&(d.rl_id===p.Administrador||d.rl_id===p.Usuario)?h("/dashboard"):m&&!x&&d.rl_id===p.Invitado?h("/invitado/tickets"):h("/auth/login")},[m,d,x]),e.jsx(e.Fragment,{children:e.jsx(J,{header:e.jsxs(i,{alignItems:"center",justifyContent:"center",spacing:1,children:[e.jsx(C,{component:"h3",variant:"h3",textAlign:"center",color:j.palette.common.white,children:"¡Bienvenido a Uku Systems!"}),e.jsx(C,{component:"p",variant:"body1",textAlign:"center",color:j.palette.common.white,children:"Tu seguridad es nuestra absoluta prioridad."})]}),children:e.jsx(a,{container:!0,sx:{margin:0,padding:0},children:e.jsx(a,{size:12,children:e.jsx("form",{noValidate:!0,onSubmit:T(F),children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{size:12,children:e.jsxs(i,{spacing:1,children:[e.jsx(L,{htmlFor:"usuario",children:"Usuario"}),e.jsx(A,{id:"usuario",variant:"outlined",placeholder:"Ingresar usuario",...f("usuario",{required:"Usuario es requerido"}),autoFocus:!0,error:!!(s!=null&&s.usuario),helperText:(I=s==null?void 0:s.usuario)==null?void 0:I.message})]})}),e.jsx(a,{size:12,children:e.jsxs(i,{spacing:1,children:[e.jsx(L,{htmlFor:"contraseña",children:"Contraseña"}),e.jsx(A,{id:"contraseña",type:g?"text":"password",placeholder:"* * * * * * * *",...f("contraseña",{required:"Contraseña es requerido."}),error:!!(s!=null&&s.contraseña),helperText:(v=s==null?void 0:s.contraseña)==null?void 0:v.message,InputProps:{endAdornment:e.jsx(X,{position:"end",children:e.jsx(N,{"aria-label":"toggle contraseña visibility",onClick:z,onMouseDown:E,edge:"end",children:g?e.jsx(ee,{}):e.jsx($,{})})})}})]})}),b.length>0&&e.jsx(a,{size:12,children:e.jsx(i,{spacing:1,children:b.map((t,l)=>e.jsx(Y,{color:"warning",severity:"error",children:t.message},l))})}),e.jsx(a,{size:12,children:e.jsx(i,{direction:"row",alignItems:"center",justifyContent:"flex-end",children:e.jsx(Z,{component:Q,to:"/auth/forgot-password",underline:"hover",color:"inherit",children:"¿Olvidaste tu contraseña?"})})}),e.jsx(a,{size:12,children:e.jsxs(i,{spacing:4,children:[e.jsx(W,{variant:"contained",fullWidth:!0,type:"submit",sx:{borderRadius:5},disabled:c,children:"Ingresar"}),c&&e.jsx(H,{})]})})]})})})})})})};export{re as Login,re as default};
