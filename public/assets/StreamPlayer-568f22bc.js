import{r as s,q as k,Y as y,Z as I,j as t,B as L,aL as h,aU as R}from"./index-9bd1da2a.js";import{S as $}from"./ServerError-9b260039.js";const w=({q:u,ip:i,ctrl_id:c})=>{const n=s.useRef(null),e=s.useRef(null),[S,l]=s.useState(!1),[p,f]=s.useState(!1),[C,d]=s.useState(!1),[j,g]=s.useState(!1),[E,m]=s.useState(null),b=k(),x=r=>{r.currentTarget===r.target&&b(R())};return s.useEffect(()=>(e.current||(e.current=y(`${I}/stream/${c}/${i}/${u}`)),e.current.on("stream_flux",r=>{n.current&&r&&(n.current.src=r)}),e.current.on("stream_state",r=>{const{state:a,typeState:o}=r;o==="isConfiguring"&&l(a),o==="isError"&&d(a),o==="isLoading"&&f(a),o==="isSuccess"&&g(a)}),e.current.on("stream_error",r=>{m(r)}),()=>{e.current&&(e.current.disconnect(),e.current=null),n.current&&(n.current=null),l(!1),d(!1),f(!1),g(!1),m(null)}),[c,i,u]),t.jsx(t.Fragment,{children:t.jsxs(L,{sx:{width:"100%",height:"100%",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},onDoubleClickCapture:x,children:[S&&t.jsx(h,{children:"Configurando"}),p&&t.jsx(h,{children:"Cargando"}),C&&t.jsx($,{children:E}),e.current&&j&&t.jsx("img",{ref:n,style:{width:"100%",height:"100%",position:"absolute"},alt:`Video Stream ${i}`,onDoubleClickCapture:x})]})})};export{w as S};
