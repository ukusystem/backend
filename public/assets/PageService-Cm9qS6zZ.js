import{s as M,_ as F,$ as L,j as e,F as u,D as S,J as O,H as w,v as D,ac as E,w as G,Z as H,af as m,ab as f,ag as C,ah as j,ai as c,B as b,aA as p}from"./index-BcG2snkw.js";import{C as W}from"./Card-B4Vie9qd.js";import{C as R}from"./CardHeader-C_0n5X76.js";import{C as z}from"./CardContent-BVKrUnxM.js";import{C as T}from"./Clear-CqXVhK-F.js";import{A as J,S as K}from"./SearchIcon-WrPrsV08.js";import{g as h}from"./groupByKey-nGMiMvM1.js";const N=M(W)(({theme:t,modo:o,seguridad:d,isalarm:n})=>({display:"flex",flexDirection:"column",height:300,width:440,minWidth:440,borderRadius:8,borderWidth:n?3:1,borderStyle:"solid",borderColor:n==="true"?o===F.Libre?t.palette.action.disabledBackground:d===L.Armado?t.palette.success.dark:t.palette.error.dark:t.palette.divider,backgroundImage:"none",boxShadow:"none",":hover":{boxShadow:"none"}})),V=({isalarm:t,modo:o,seguridad:d,title:n,children:a,headerIcon:s})=>e.jsxs(N,{isalarm:t,modo:o,seguridad:d,children:[e.jsx(R,{title:e.jsxs(u,{direction:"row",alignItems:"center",spacing:1,sx:{width:"100%",overflow:"hidden"},children:[e.jsx(S,{variant:"h5",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:n}),s]}),sx:{"& .MuiCardHeader-content":{display:"block",width:"100%",overflow:"hidden"}}}),e.jsx(O,{}),e.jsx(z,{sx:{flex:1,padding:0,"&:last-child":{paddingBottom:1},overflow:"hidden"},children:e.jsx(w,{sx:{width:"100%",height:"100%","& .simplebar-content":{margin:"16px 16px 0 16px"}},children:a})})]});var Q=(t=>(t[t.Desactive=-1]="Desactive",t[t.Active=1]="Active",t))(Q||{});const v=[{value:-1,name:"Desactivado"},{value:1,name:"Activado"}],ee=({storeSelector:t,updateStoreAction:o,activeState:d})=>{const n=D(),{isSuccess:a,data:s,isLoading:_}=E(),{controllerSearch:k,rgn_id:l,ctrl_id:y,state:g}=G(t),I=r=>{n(o({rgn_id:r.target.value,ctrl_id:void 0}))},P=r=>{n(o({ctrl_id:r.target.value}))},B=r=>{d&&n(o({state:r.target.value}))};return e.jsx(w,{sx:{width:"100%",height:"100%"},children:e.jsxs(u,{direction:"row",spacing:1,alignItems:"center",height:"auto",paddingBottom:1.5,children:[e.jsx(u,{spacing:2,sx:{width:250},children:e.jsx(J,{freeSolo:!0,value:k,onChange:(r,i)=>{typeof i!="string"&&n(o({controllerSearch:i,rgn_id:i?String(i.rgn_id):void 0,ctrl_id:i?String(i.ctrl_id):void 0}))},clearIcon:e.jsx(T,{onClick:()=>{n(o({controllerSearch:null}))}}),id:"controller_searcher",options:a&&s?s:[],getOptionLabel:r=>typeof r=="string"?r:r.nodo,sx:{width:250},renderInput:r=>e.jsx(H,{...r,placeholder:"Buscar sitio",disabled:_,slotProps:{input:{...r.InputProps,startAdornment:e.jsx(K,{})}},sx:{"& .MuiOutlinedInput-root":{borderRadius:"25px",px:2}}})})}),e.jsxs(u,{spacing:1,width:200,direction:"row",alignItems:"center",children:[e.jsx(m,{htmlFor:"group_site",sx:{display:"none"},children:"Grupo de sitio"}),e.jsxs(f,{displayEmpty:!0,value:l??"",onChange:I,inputProps:{id:"group_site"},renderValue:r=>{if(r.length===0)return e.jsx(e.Fragment,{children:"Grupo de sitio"});let i;return a&&(i=h(s,"rgn_id")[r]?h(s,"rgn_id")[r][0]:void 0),e.jsx(e.Fragment,{children:i==null?void 0:i.region.region})},IconComponent:({...r})=>l?e.jsx(C,{onClick:i=>{i.stopPropagation(),n(o({rgn_id:void 0,ctrl_id:void 0}))}}):e.jsx(j,{...r}),sx:{width:200,borderRadius:"10px",backgroundColor:"transparent","&.Mui-focused":{boxShadow:"none"},"&.MuiOutlinedInput-root":{fontWeight:500,backgroundColor:"transparent",color:"text.primary","& fieldset":{...l&&{backgroundColor:"tertiary.opacityLight"},borderColor:"custom.outlineBoder"},"&:hover fieldset":{backgroundColor:"tertiary.opacityLight",borderColor:"custom.outlineBoder"},"&.Mui-focused fieldset":{borderColor:"custom.outlineBoder",backgroundColor:"tertiary.opacityLight"}},"& .MuiSelect-icon":{color:"text.primary"}},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx(c,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Grupo de sitio"})}),a&&Object.entries(h(s,"rgn_id")).map(([r,i])=>e.jsx(c,{value:r,children:e.jsx(b,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},children:i[0].region.region})},r))]})]}),e.jsxs(u,{spacing:1,width:200,direction:"row",alignItems:"center",children:[e.jsx(m,{htmlFor:"site_item",sx:{display:"none"},children:"Sitio"}),e.jsxs(f,{disabled:!l,displayEmpty:!0,value:y??"",onChange:P,inputProps:{id:"site_item"},renderValue:r=>{if(r.length===0)return e.jsx(e.Fragment,{children:"Sitio"});let i;return a&&(i=s.find(x=>String(x.ctrl_id)===String(r))),e.jsx(e.Fragment,{children:i==null?void 0:i.nodo})},IconComponent:({...r})=>y?e.jsx(C,{onClick:i=>{i.stopPropagation(),n(o({ctrl_id:void 0}))}}):e.jsx(j,{...r}),sx:{width:200,borderRadius:"10px",backgroundColor:"transparent","&.Mui-focused":{boxShadow:"none"},"&.MuiOutlinedInput-root":{fontWeight:500,backgroundColor:"transparent",color:"text.primary","& fieldset":{borderColor:"custom.outlineBoder"},"&:hover fieldset":{backgroundColor:"tertiary.opacityLight",borderColor:"custom.outlineBoder"},"&.Mui-focused fieldset":{borderColor:"custom.outlineBoder",backgroundColor:"tertiary.opacityLight"}},"& .MuiSelect-icon":{color:"text.primary"}},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx(c,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Sitio"})}),a&&l&&h(s,"rgn_id")[l]&&h(s,"rgn_id")[l].map(r=>e.jsx(c,{value:String(r.ctrl_id),children:e.jsx(b,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},children:r.nodo})},String(r.ctrl_id)))]})]}),d&&e.jsxs(u,{spacing:1,width:200,direction:"row",alignItems:"center",children:[e.jsx(m,{htmlFor:"state_select",sx:{display:"none"},children:"Prioridad"}),e.jsxs(f,{displayEmpty:!0,value:g??"",onChange:B,inputProps:{id:"state_select"},renderValue:r=>{if(r.length===0)return e.jsx(e.Fragment,{children:"Estado"});const i=v.find(x=>String(x.value)===String(r));return e.jsx(e.Fragment,{children:i?i.name:"No controlado"})},IconComponent:({...r})=>g?e.jsx(C,{onClick:i=>{i.stopPropagation(),n(o({state:void 0}))}}):e.jsx(j,{...r}),sx:{width:200,borderRadius:"10px",backgroundColor:"transparent","&.Mui-focused":{boxShadow:"none"},"&.MuiOutlinedInput-root":{fontWeight:500,backgroundColor:"transparent",color:"text.primary","& fieldset":{...g&&{backgroundColor:"tertiary.opacityLight"},borderColor:"custom.outlineBoder"},"&:hover fieldset":{backgroundColor:"tertiary.opacityLight",borderColor:"custom.outlineBoder"},"&.Mui-focused fieldset":{borderColor:"custom.outlineBoder",backgroundColor:"tertiary.opacityLight"}},"& .MuiSelect-icon":{color:"text.primary"}},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx(c,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Estado"})}),v.map((r,i)=>e.jsx(c,{value:String(r.value),children:r.name},i))]})]})]})})},re=({title:t,children:o,filter:d})=>e.jsx(b,{sx:{width:"100%",height:"100%",overflow:"hidden"},children:e.jsx(w,{sx:{width:"100%",height:"100%"},children:e.jsxs(p,{container:!0,rowSpacing:3,columnSpacing:2.75,sx:{p:{xs:2,sm:3}},maxWidth:1600,width:"100%",mx:"auto",children:[e.jsx(p,{size:{xs:12},children:e.jsx(S,{variant:"h4",children:t})}),e.jsx(p,{size:{xs:12},children:d}),e.jsx(p,{size:{xs:12},children:o})]})})});export{Q as A,ee as F,re as P,V as S};
