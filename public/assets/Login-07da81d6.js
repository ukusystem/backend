import{a as M,bz as ue,bA as de,bB as fe,r as f,bj as pe,bC as me,_ as ge,j as r,bD as he,f as xe,h as be,b as ye,s as je,d as Se,c as K,u as $e,p as Ge,bE as ve,o as we,k as Ce,bF as Oe,bG as _e,F as A,m as W,I as Ee,bH as Pe}from"./index-87ce3177.js";import{u as ke}from"./index.esm-219e415f.js";import{A as Ae}from"./index-eae26945.js";import{I as U,B as Me}from"./InputLabel-fc6e2611.js";import{T as H}from"./TextField-e40dd1e3.js";import{I as Ne}from"./InputAdornment-2c96eb30.js";import{A as qe}from"./Alert-01833b27.js";import{M as Le}from"./Link-3d4a28a2.js";import"./Select-bf490ba6.js";import"./FormControl-63c0a756.js";const ze=(e,n)=>e.filter(s=>n.includes(s)),E=(e,n,s)=>{const i=e.keys[0];Array.isArray(n)?n.forEach((o,t)=>{s((c,a)=>{t<=e.keys.length-1&&(t===0?Object.assign(c,a):c[e.up(e.keys[t])]=a)},o)}):n&&typeof n=="object"?(Object.keys(n).length>e.keys.length?e.keys:ze(e.keys,Object.keys(n))).forEach(t=>{if(e.keys.indexOf(t)!==-1){const c=n[t];c!==void 0&&s((a,g)=>{i===t?Object.assign(a,g):a[e.up(t)]=g},c)}}):(typeof n=="number"||typeof n=="string")&&s((o,t)=>{Object.assign(o,t)},n)};function m(e){return e?`Level${e}`:""}function N(e){return e.unstable_level>0&&e.container}function Y(e){return function(s){return`var(--Grid-${s}Spacing${m(e.unstable_level)})`}}function D(e){return function(s){return e.unstable_level===0?`var(--Grid-${s}Spacing)`:`var(--Grid-${s}Spacing${m(e.unstable_level-1)})`}}function I(e){return e.unstable_level===0?"var(--Grid-columns)":`var(--Grid-columns${m(e.unstable_level-1)})`}const De=({theme:e,ownerState:n})=>{const s=Y(n),i={};return E(e.breakpoints,n.gridSize,(o,t)=>{let c={};t===!0&&(c={flexBasis:0,flexGrow:1,maxWidth:"100%"}),t==="auto"&&(c={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof t=="number"&&(c={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${t} / ${I(n)}${N(n)?` + ${s("column")}`:""})`}),o(i,c)}),i},Ie=({theme:e,ownerState:n})=>{const s={};return E(e.breakpoints,n.gridOffset,(i,o)=>{let t={};o==="auto"&&(t={marginLeft:"auto"}),typeof o=="number"&&(t={marginLeft:o===0?"0px":`calc(100% * ${o} / ${I(n)})`}),i(s,t)}),s},Te=({theme:e,ownerState:n})=>{if(!n.container)return{};const s=N(n)?{[`--Grid-columns${m(n.unstable_level)}`]:I(n)}:{"--Grid-columns":12};return E(e.breakpoints,n.columns,(i,o)=>{i(s,{[`--Grid-columns${m(n.unstable_level)}`]:o})}),s},Be=({theme:e,ownerState:n})=>{if(!n.container)return{};const s=D(n),i=N(n)?{[`--Grid-rowSpacing${m(n.unstable_level)}`]:s("row")}:{};return E(e.breakpoints,n.rowSpacing,(o,t)=>{var c;o(i,{[`--Grid-rowSpacing${m(n.unstable_level)}`]:typeof t=="string"?t:(c=e.spacing)==null?void 0:c.call(e,t)})}),i},Re=({theme:e,ownerState:n})=>{if(!n.container)return{};const s=D(n),i=N(n)?{[`--Grid-columnSpacing${m(n.unstable_level)}`]:s("column")}:{};return E(e.breakpoints,n.columnSpacing,(o,t)=>{var c;o(i,{[`--Grid-columnSpacing${m(n.unstable_level)}`]:typeof t=="string"?t:(c=e.spacing)==null?void 0:c.call(e,t)})}),i},Ve=({theme:e,ownerState:n})=>{if(!n.container)return{};const s={};return E(e.breakpoints,n.direction,(i,o)=>{i(s,{flexDirection:o})}),s},Fe=({ownerState:e})=>{const n=Y(e),s=D(e);return M({minWidth:0,boxSizing:"border-box"},e.container&&M({display:"flex",flexWrap:"wrap"},e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},{margin:`calc(${n("row")} / -2) calc(${n("column")} / -2)`},e.disableEqualOverflow&&{margin:`calc(${n("row")} * -1) 0px 0px calc(${n("column")} * -1)`}),(!e.container||N(e))&&M({padding:`calc(${s("row")} / 2) calc(${s("column")} / 2)`},(e.disableEqualOverflow||e.parentDisableEqualOverflow)&&{padding:`${s("row")} 0px 0px ${s("column")}`}))},We=e=>{const n=[];return Object.entries(e).forEach(([s,i])=>{i!==!1&&i!==void 0&&n.push(`grid-${s}-${String(i)}`)}),n},Ue=(e,n="xs")=>{function s(i){return i===void 0?!1:typeof i=="string"&&!Number.isNaN(Number(i))||typeof i=="number"&&i>0}if(s(e))return[`spacing-${n}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const i=[];return Object.entries(e).forEach(([o,t])=>{s(t)&&i.push(`spacing-${o}-${String(t)}`)}),i}return[]},He=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([n,s])=>`direction-${n}-${s}`):[`direction-xs-${String(e)}`],Ke=["className","children","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow","unstable_level"],Ye=ue(),Je=de("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,n)=>n.root});function Qe(e){return fe({props:e,name:"MuiGrid",defaultTheme:Ye})}function Xe(e={}){const{createStyledComponent:n=Je,useThemeProps:s=Qe,componentName:i="MuiGrid"}=e,o=f.createContext(void 0),t=(g,u)=>{const{container:y,direction:$,spacing:j,wrap:h,gridSize:G}=g,p={root:["root",y&&"container",h!=="wrap"&&`wrap-xs-${String(h)}`,...He($),...We(G),...y?Ue(j,u.breakpoints.keys[0]):[]]};return be(p,v=>ye(i,v),{})},c=n(Te,Re,Be,De,Ve,Fe,Ie),a=f.forwardRef(function(u,y){var $,j,h,G,p,v,P,w;const x=pe(),q=s(u),C=me(q),l=f.useContext(o),{className:O,children:J,columns:Q=12,container:X=!1,component:Z="div",direction:ee="row",wrap:ne="wrap",spacing:L=0,rowSpacing:se=L,columnSpacing:te=L,disableEqualOverflow:T,unstable_level:S=0}=C,re=ge(C,Ke);let k=T;S&&T!==void 0&&(k=u.disableEqualOverflow);const B={},R={},V={};Object.entries(re).forEach(([d,_])=>{x.breakpoints.values[d]!==void 0?B[d]=_:x.breakpoints.values[d.replace("Offset","")]!==void 0?R[d.replace("Offset","")]=_:V[d]=_});const ie=($=u.columns)!=null?$:S?void 0:Q,oe=(j=u.spacing)!=null?j:S?void 0:L,ae=(h=(G=u.rowSpacing)!=null?G:u.spacing)!=null?h:S?void 0:se,ce=(p=(v=u.columnSpacing)!=null?v:u.spacing)!=null?p:S?void 0:te,F=M({},C,{level:S,columns:ie,container:X,direction:ee,wrap:ne,spacing:oe,rowSpacing:ae,columnSpacing:ce,gridSize:B,gridOffset:R,disableEqualOverflow:(P=(w=k)!=null?w:l)!=null?P:!1,parentDisableEqualOverflow:l}),le=t(F,x);let z=r.jsx(c,M({ref:y,as:Z,ownerState:F,className:xe(le.root,O)},V,{children:f.Children.map(J,d=>{if(f.isValidElement(d)&&he(d,["Grid"])){var _;return f.cloneElement(d,{unstable_level:(_=d.props.unstable_level)!=null?_:S+1})}return d})}));return k!==void 0&&k!==(l??!1)&&(z=r.jsx(o.Provider,{value:k,children:z})),z});return a.muiName="Grid",a}const Ze=Xe({createStyledComponent:je("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(e,n)=>n.root}),componentName:"MuiGrid2",useThemeProps:e=>Se({props:e,name:"MuiGrid2"})}),b=Ze,en=K(r.jsx("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5-.59 1.22-1.42 2.27-2.41 3.12l1.41 1.41c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l1.65 1.65C10.66 6.09 11.32 6 12 6zm-1.07 1.14L13 9.21c.57.25 1.03.71 1.28 1.28l2.07 2.07c.08-.34.14-.7.14-1.07C16.5 9.01 14.48 7 12 7c-.37 0-.72.05-1.07.14zM2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.98-.29 4.32-.82l3.42 3.42 1.41-1.41L3.42 2.45 2.01 3.87zm7.5 7.5 2.61 2.61c-.04.01-.08.02-.12.02-1.38 0-2.5-1.12-2.5-2.5 0-.05.01-.08.01-.13zm-3.4-3.4 1.75 1.75c-.23.55-.36 1.15-.36 1.78 0 2.48 2.02 4.5 4.5 4.5.63 0 1.23-.13 1.77-.36l.98.98c-.88.24-1.8.38-2.75.38-3.79 0-7.17-2.13-8.82-5.5.7-1.43 1.72-2.61 2.93-3.53z"}),"VisibilityOffOutlined"),nn=K(r.jsx("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"}),"VisibilityOutlined"),pn=()=>{var q,C;const[e,n]=f.useState(!1),s=$e(),i=()=>n(l=>!l),o=l=>{l.preventDefault()},{register:t,handleSubmit:c,formState:{errors:a}}=ke({defaultValues:{usuario:"",contraseña:""}}),g=Ge(),[u,y]=f.useState([]),[$,{isError:j,isSuccess:h,data:G,error:p}]=ve(),v=async l=>{$({loginData:l})},P=we(),{isAuthenticated:w,user:x}=Ce(l=>l.auth);return f.useEffect(()=>{h&&(g(Oe(!0)),g(_e(G)))},[h]),f.useEffect(()=>{j&&p?"data"in p&&y(l=>{const O=p.data;return O.length>0?[...l,...O]:[...l,p.data]}):y([])},[j,p]),f.useEffect(()=>{w&&(x.rol==="Administrador"||x.rol==="Usuario")?P("/dashboard"):w&&x.rol==="Invitado"&&P("/invitado/tickets")},[w,x]),r.jsx(r.Fragment,{children:r.jsx(Ae,{header:r.jsxs(A,{alignItems:"center",justifyContent:"center",spacing:1,children:[r.jsx(W,{component:"h3",variant:"h3",textAlign:"center",color:s.palette.common.white,children:"Welcome to Mercurial Systems!"}),r.jsx(W,{component:"p",variant:"body1",textAlign:"center",color:s.palette.common.white,children:"Your safety is our absolute priority."})]}),children:r.jsx(b,{container:!0,sx:{margin:0,padding:0},children:r.jsx(b,{xs:12,children:r.jsx("form",{noValidate:!0,onSubmit:c(v),children:r.jsxs(b,{container:!0,spacing:3,children:[r.jsx(b,{xs:12,children:r.jsxs(A,{spacing:1,children:[r.jsx(U,{htmlFor:"usuario",children:"Username"}),r.jsx(H,{id:"usuario",variant:"outlined",placeholder:"demo@company.com",...t("usuario",{required:"Username is required."}),error:!!(a!=null&&a.usuario),helperText:(q=a==null?void 0:a.usuario)==null?void 0:q.message})]})}),r.jsx(b,{xs:12,children:r.jsxs(A,{spacing:1,children:[r.jsx(U,{htmlFor:"contraseña",children:"Password"}),r.jsx(H,{id:"contraseña",type:e?"text":"password",placeholder:"******",...t("contraseña",{required:"Password is required."}),error:!!(a!=null&&a.contraseña),helperText:(C=a==null?void 0:a.contraseña)==null?void 0:C.message,InputProps:{endAdornment:r.jsx(Ne,{position:"end",children:r.jsx(Ee,{"aria-label":"toggle contraseña visibility",onClick:i,onMouseDown:o,edge:"end",children:e?r.jsx(nn,{}):r.jsx(en,{})})})}})]})}),u.length>0&&r.jsx(b,{xs:12,children:r.jsx(A,{spacing:1,children:u.map((l,O)=>r.jsx(qe,{color:"warning",severity:"error",children:l.message},O))})}),r.jsx(b,{xs:12,children:r.jsx(A,{direction:"row",alignItems:"center",justifyContent:"flex-end",children:r.jsx(Le,{component:Pe,to:"/auth/forgot-password",underline:"hover",color:"inherit",children:"Forgot Password?"})})}),r.jsx(b,{xs:12,children:r.jsx(Me,{variant:"contained",fullWidth:!0,type:"submit",sx:{borderRadius:5},children:"Login"})})]})})})})})})};export{pn as Login,pn as default};
