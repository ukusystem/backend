import{r as s,p as k,X as y,Y as I,j as t,B as R,aK as h,aT as $}from"./index-83afeab6.js";import{S as D}from"./ServerError-436f42ba.js";const w=({q:u,ip:i,ctrl_id:c})=>{const n=s.useRef(null),e=s.useRef(null),[p,l]=s.useState(!1),[S,f]=s.useState(!1),[C,d]=s.useState(!1),[j,g]=s.useState(!1),[E,m]=s.useState(null),b=k(),x=r=>{r.currentTarget===r.target&&b($())};return s.useEffect(()=>(e.current||(e.current=y(`${I}/stream/${c}/${i}/${u}`)),e.current.on("stream_flux",r=>{n.current&&r&&(n.current.src=r)}),e.current.on("stream_state",r=>{const{state:a,typeState:o}=r;o==="isConfiguring"&&l(a),o==="isError"&&d(a),o==="isLoading"&&f(a),o==="isSuccess"&&g(a)}),e.current.on("stream_error",r=>{m(r)}),()=>{e.current&&(e.current.disconnect(),e.current=null),n.current&&(n.current=null),l(!1),d(!1),f(!1),g(!1),m(null)}),[c,i,u]),t.jsx(t.Fragment,{children:t.jsxs(R,{sx:{width:"100%",height:"100%",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},onDoubleClickCapture:x,children:[p&&t.jsx(h,{children:"Configurando"}),S&&t.jsx(h,{children:"Cargando"}),C&&t.jsx(D,{children:E}),e.current&&j&&t.jsx("img",{ref:n,style:{width:"100%",height:"100%",position:"absolute"},alt:`Video Stream ${i}`,onDoubleClickCapture:x})]})})};export{w as S};
