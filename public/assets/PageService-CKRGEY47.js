import{s as B,bo as F,K as L,M as O,j as e,l as u,T as S,p as D,ah as E,o as y,u as G,a9 as H,a as W,F as R,H as z,ac as m,a8 as f,ad as j,ae as C,af as c,B as b,ay as p}from"./index-_xZTzGok.js";import{C as T}from"./CardHeader-Dd6OLIuB.js";import{C as K}from"./Clear-DEfVBId_.js";import{S as N}from"./SearchIcon-CYdv1D3u.js";import{g as h}from"./groupByKey-nGMiMvM1.js";const Q=B(F)(({theme:i,modo:o,seguridad:d,isalarm:n})=>({display:"flex",flexDirection:"column",height:300,width:440,minWidth:440,borderRadius:8,borderWidth:n?3:1,borderStyle:"solid",borderColor:n==="true"?o===L.Libre?i.palette.action.disabledBackground:d===O.Armado?i.palette.success.dark:i.palette.error.dark:i.palette.divider,backgroundImage:"none",boxShadow:"none",":hover":{boxShadow:"none"}})),$=({isalarm:i,modo:o,seguridad:d,title:n,children:a,headerIcon:s})=>e.jsxs(Q,{isalarm:i,modo:o,seguridad:d,children:[e.jsx(T,{title:e.jsxs(u,{direction:"row",alignItems:"center",spacing:1,sx:{width:"100%",overflow:"hidden"},children:[e.jsx(S,{variant:"h5",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:n}),s]}),sx:{"& .MuiCardHeader-content":{display:"block",width:"100%",overflow:"hidden"}}}),e.jsx(D,{}),e.jsx(E,{sx:{flex:1,padding:0,"&:last-child":{paddingBottom:1},overflow:"hidden"},children:e.jsx(y,{sx:{width:"100%",height:"100%","& .simplebar-content":{margin:"16px 16px 0 16px"}},children:a})})]});var q=(i=>(i[i.Desactive=-1]="Desactive",i[i.Active=1]="Active",i))(q||{});const v=[{value:-1,name:"Desactivado"},{value:1,name:"Activado"}],A=({storeSelector:i,updateStoreAction:o,activeState:d})=>{const n=G(),{isSuccess:a,data:s,isLoading:_}=H(),{controllerSearch:k,rgn_id:l,ctrl_id:w,state:g}=W(i),I=r=>{n(o({rgn_id:r.target.value,ctrl_id:void 0}))},M=r=>{n(o({ctrl_id:r.target.value}))},P=r=>{d&&n(o({state:r.target.value}))};return e.jsx(y,{sx:{width:"100%",height:"100%"},children:e.jsxs(u,{direction:"row",spacing:1,alignItems:"center",height:"auto",paddingBottom:1.5,children:[e.jsx(u,{spacing:2,sx:{width:250},children:e.jsx(R,{freeSolo:!0,value:k,onChange:(r,t)=>{typeof t!="string"&&n(o({controllerSearch:t,rgn_id:t?String(t.rgn_id):void 0,ctrl_id:t?String(t.ctrl_id):void 0}))},clearIcon:e.jsx(K,{onClick:()=>{n(o({controllerSearch:null}))}}),id:"controller_searcher",options:a&&s?s:[],getOptionLabel:r=>typeof r=="string"?r:r.nodo,sx:{width:250},renderInput:r=>e.jsx(z,{...r,placeholder:"Buscar sitio",disabled:_,slotProps:{input:{...r.InputProps,startAdornment:e.jsx(N,{})}},sx:{"& .MuiOutlinedInput-root":{borderRadius:"25px",px:2}}})})}),e.jsxs(u,{spacing:1,width:200,direction:"row",alignItems:"center",children:[e.jsx(m,{htmlFor:"group_site",sx:{display:"none"},children:"Grupo de sitio"}),e.jsxs(f,{displayEmpty:!0,value:l??"",onChange:I,inputProps:{id:"group_site"},renderValue:r=>{if(r.length===0)return e.jsx(e.Fragment,{children:"Grupo de sitio"});let t;return a&&(t=h(s,"rgn_id")[r]?h(s,"rgn_id")[r][0]:void 0),e.jsx(e.Fragment,{children:t==null?void 0:t.region.region})},IconComponent:({...r})=>l?e.jsx(j,{onClick:t=>{t.stopPropagation(),n(o({rgn_id:void 0,ctrl_id:void 0}))}}):e.jsx(C,{...r}),sx:{width:200,borderRadius:"10px",backgroundColor:"transparent","&.Mui-focused":{boxShadow:"none"},"&.MuiOutlinedInput-root":{fontWeight:500,backgroundColor:"transparent",color:"text.primary","& fieldset":{...l&&{backgroundColor:"tertiary.opacityLight"},borderColor:"custom.outlineBoder"},"&:hover fieldset":{backgroundColor:"tertiary.opacityLight",borderColor:"custom.outlineBoder"},"&.Mui-focused fieldset":{borderColor:"custom.outlineBoder",backgroundColor:"tertiary.opacityLight"}},"& .MuiSelect-icon":{color:"text.primary"}},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx(c,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Grupo de sitio"})}),a&&Object.entries(h(s,"rgn_id")).map(([r,t])=>e.jsx(c,{value:r,children:e.jsx(b,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},children:t[0].region.region})},r))]})]}),e.jsxs(u,{spacing:1,width:200,direction:"row",alignItems:"center",children:[e.jsx(m,{htmlFor:"site_item",sx:{display:"none"},children:"Sitio"}),e.jsxs(f,{disabled:!l,displayEmpty:!0,value:w??"",onChange:M,inputProps:{id:"site_item"},renderValue:r=>{if(r.length===0)return e.jsx(e.Fragment,{children:"Sitio"});let t;return a&&(t=s.find(x=>String(x.ctrl_id)===String(r))),e.jsx(e.Fragment,{children:t==null?void 0:t.nodo})},IconComponent:({...r})=>w?e.jsx(j,{onClick:t=>{t.stopPropagation(),n(o({ctrl_id:void 0}))}}):e.jsx(C,{...r}),sx:{width:200,borderRadius:"10px",backgroundColor:"transparent","&.Mui-focused":{boxShadow:"none"},"&.MuiOutlinedInput-root":{fontWeight:500,backgroundColor:"transparent",color:"text.primary","& fieldset":{borderColor:"custom.outlineBoder"},"&:hover fieldset":{backgroundColor:"tertiary.opacityLight",borderColor:"custom.outlineBoder"},"&.Mui-focused fieldset":{borderColor:"custom.outlineBoder",backgroundColor:"tertiary.opacityLight"}},"& .MuiSelect-icon":{color:"text.primary"}},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx(c,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Sitio"})}),a&&l&&h(s,"rgn_id")[l]&&h(s,"rgn_id")[l].map(r=>e.jsx(c,{value:String(r.ctrl_id),children:e.jsx(b,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},children:r.nodo})},String(r.ctrl_id)))]})]}),d&&e.jsxs(u,{spacing:1,width:200,direction:"row",alignItems:"center",children:[e.jsx(m,{htmlFor:"state_select",sx:{display:"none"},children:"Prioridad"}),e.jsxs(f,{displayEmpty:!0,value:g??"",onChange:P,inputProps:{id:"state_select"},renderValue:r=>{if(r.length===0)return e.jsx(e.Fragment,{children:"Estado"});const t=v.find(x=>String(x.value)===String(r));return e.jsx(e.Fragment,{children:t?t.name:"No controlado"})},IconComponent:({...r})=>g?e.jsx(j,{onClick:t=>{t.stopPropagation(),n(o({state:void 0}))}}):e.jsx(C,{...r}),sx:{width:200,borderRadius:"10px",backgroundColor:"transparent","&.Mui-focused":{boxShadow:"none"},"&.MuiOutlinedInput-root":{fontWeight:500,backgroundColor:"transparent",color:"text.primary","& fieldset":{...g&&{backgroundColor:"tertiary.opacityLight"},borderColor:"custom.outlineBoder"},"&:hover fieldset":{backgroundColor:"tertiary.opacityLight",borderColor:"custom.outlineBoder"},"&.Mui-focused fieldset":{borderColor:"custom.outlineBoder",backgroundColor:"tertiary.opacityLight"}},"& .MuiSelect-icon":{color:"text.primary"}},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx(c,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Estado"})}),v.map((r,t)=>e.jsx(c,{value:String(r.value),children:r.name},t))]})]})]})})},V=({title:i,children:o,filter:d})=>e.jsx(b,{sx:{width:"100%",height:"100%",overflow:"hidden"},children:e.jsx(y,{sx:{width:"100%",height:"100%"},children:e.jsxs(p,{container:!0,rowSpacing:3,columnSpacing:2.75,sx:{p:{xs:2,sm:3}},maxWidth:1600,width:"100%",mx:"auto",children:[e.jsx(p,{size:{xs:12},children:e.jsx(S,{variant:"h4",children:i})}),e.jsx(p,{size:{xs:12},children:d}),e.jsx(p,{size:{xs:12},children:o})]})})});export{q as A,A as F,V as P,$ as S};
