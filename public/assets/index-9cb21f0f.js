import{W as q,X as G,j as e,l as y,r as v,p as $1,q as Q,h as E,Y as q1,Z as u1,B as V,_ as s1,$ as J,a0 as Z,a1 as R,a2 as G1,a3 as j1,a4 as F,a5 as $,a6 as v1,a7 as E1,H as _,I as L,n as S,G as f,a8 as m1,a9 as U,aa as h1,ab as x1,ac as g1,ad as z1,ae as X,af as B1,ag as Y,ah as r1,ai as D,aj as L1,ak as W1,al as z,am as B,an as A1,ao as F1,ap as b1,aq as i1,ar as T1}from"./index-54fe84d4.js";import{d as U1}from"./CloseRounded-0b7fb91e.js";import{d as H1,a as V1}from"./ExpandMore-2cd1aca0.js";import{u as N1}from"./index.esm-6fa2bcc8.js";import{I as y1}from"./InputLabel-fb3b3444.js";import{T as M1}from"./TextField-52e66ba5.js";import{I as X1}from"./InputAdornment-232de508.js";import{C as Y1}from"./CircularProgress-c7c31bcf.js";import{S as I}from"./StreamPlayer-7562b91f.js";import{d as J1}from"./Close-69d5f0b5.js";import{S as Q1}from"./ServerError-4d271a15.js";import{P as _1}from"./Popover-2ce99c9b.js";import{D as K1,a as e2,b as r2}from"./DialogContent-8e58dc88.js";import{D as t2}from"./DialogTitle-29fb32ec.js";import{B as t1}from"./Button-76415a12.js";import"./FormControl-f5c79f79.js";import"./Select-4b6ce33a.js";var n1={},i2=G;Object.defineProperty(n1,"__esModule",{value:!0});var S1=n1.default=void 0,s2=i2(q()),n2=e;S1=n1.default=(0,s2.default)((0,n2.jsx)("path",{d:"M17.59 3.59c-.38-.38-.89-.59-1.42-.59H5c-1.11 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7.83c0-.53-.21-1.04-.59-1.41zM12 19c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m1-10H7c-1.1 0-2-.9-2-2s.9-2 2-2h6c1.1 0 2 .9 2 2s-.9 2-2 2"}),"SaveRounded");const a2=({isSelected:s=!1})=>{const t=y();return e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5714 24H3.42857C1.53429 24 0 22.464 0 20.5714V3.42857C0 1.53429 1.53429 0 3.42857 0H20.5714C22.464 0 24 1.53429 24 3.42857V20.5714C24 22.464 22.464 24 20.5714 24ZM20.5714 3.42857H3.42857V20.5714H20.5714V3.42857Z",fill:s?t.palette.primary.main:t.palette.text.primary})})},o2=({isSelected:s=!1})=>{const t=y();return e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M22.5 24H15C14.1712 24 13.5 23.3288 13.5 22.5V15C13.5 14.1712 14.1712 13.5 15 13.5H22.5C23.3288 13.5 24 14.1712 24 15V22.5C24 23.3288 23.3288 24 22.5 24ZM22.5 15H15V22.5H22.5V15ZM22.5 10.5H15C14.1712 10.5 13.5 9.828 13.5 9V1.5C13.5 0.67125 14.1712 0 15 0H22.5C23.3288 0 24 0.67125 24 1.5V9C24 9.828 23.3288 10.5 22.5 10.5ZM22.5 1.5H15V9H22.5V1.5ZM9 24H1.5C0.67125 24 0 23.3288 0 22.5V15C0 14.1712 0.67125 13.5 1.5 13.5H9C9.828 13.5 10.5 14.1712 10.5 15V22.5C10.5 23.3288 9.828 24 9 24ZM9 15H1.5V22.5H9V15ZM9 10.5H1.5C0.67125 10.5 0 9.828 0 9V1.5C0 0.67125 0.67125 0 1.5 0H9C9.828 0 10.5 0.67125 10.5 1.5V9C10.5 9.828 9.828 10.5 9 10.5ZM9 1.5H1.5V9H9V1.5Z",fill:s?t.palette.primary.main:t.palette.text.primary})})},d2=({isSelected:s=!1})=>{const t=y();return e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M1.42373 6.91525H5.49153C6.27742 6.91444 6.91444 6.27742 6.91525 5.49153V1.42373C6.91444 0.63783 6.27742 0.000813559 5.49153 0H1.42373C0.63783 0.000813559 0.000813559 0.63783 0 1.42373V5.49153C0.000813559 6.27742 0.63783 6.91444 1.42373 6.91525ZM1.22034 1.42373C1.22034 1.31146 1.31146 1.22034 1.42373 1.22034H5.49153C5.6038 1.22034 5.69491 1.31146 5.69491 1.42373V5.49153C5.69491 5.6038 5.6038 5.69491 5.49153 5.69491H1.42373C1.31146 5.69491 1.22034 5.6038 1.22034 5.49153V1.42373ZM9.9661 6.91525H14.0339C14.8198 6.91444 15.4568 6.27742 15.4576 5.49153V1.42373C15.4568 0.63783 14.8198 0.000813559 14.0339 0H9.9661C9.1802 0.000813559 8.54319 0.63783 8.54237 1.42373V5.49153C8.54319 6.27742 9.1802 6.91444 9.9661 6.91525ZM9.76271 1.42373C9.76271 1.31146 9.85383 1.22034 9.9661 1.22034H14.0339C14.1462 1.22034 14.2373 1.31146 14.2373 1.42373V5.49153C14.2373 5.6038 14.1462 5.69491 14.0339 5.69491H9.9661C9.85383 5.69491 9.76271 5.6038 9.76271 5.49153V1.42373ZM18.5085 6.89329H22.5543C23.3402 6.89247 23.9772 6.25546 23.978 5.46956V1.42373C23.9772 0.63783 23.3402 0.000813559 22.5543 0H18.5085C17.7226 0.000813559 17.0856 0.63783 17.0847 1.42373V5.46956C17.0856 6.25546 17.7226 6.89247 18.5085 6.89329ZM18.3051 1.42373C18.3051 1.31146 18.3962 1.22034 18.5085 1.22034H22.5543C22.6666 1.22034 22.7577 1.31146 22.7577 1.42373V5.46956C22.7577 5.58183 22.6666 5.67295 22.5543 5.67295H18.5085C18.3962 5.67295 18.3051 5.58183 18.3051 5.46956V1.42373ZM1.43512 15.4576H5.50291C6.28881 15.4568 6.92583 14.8198 6.92664 14.0339V9.9661C6.92583 9.1802 6.28881 8.54319 5.50291 8.54237H1.43512C0.64922 8.54319 0.0122034 9.1802 0.0113899 9.9661V14.0339C0.0122034 14.8198 0.64922 15.4568 1.43512 15.4576ZM1.23173 9.9661C1.23173 9.85383 1.32285 9.76271 1.43512 9.76271H5.50291C5.61519 9.76271 5.70631 9.85383 5.70631 9.9661V14.0339C5.70631 14.1462 5.61519 14.2373 5.50291 14.2373H1.43512C1.32285 14.2373 1.23173 14.1462 1.23173 14.0339V9.9661ZM9.97749 15.4576H14.0453C14.8312 15.4568 15.4682 14.8198 15.469 14.0339V9.9661C15.4682 9.1802 14.8312 8.54319 14.0453 8.54237H9.97749C9.19159 8.54319 8.55458 9.1802 8.55376 9.9661V14.0339C8.55458 14.8198 9.19159 15.4568 9.97749 15.4576ZM9.7741 9.9661C9.7741 9.85383 9.86522 9.76271 9.97749 9.76271H14.0453C14.1576 9.76271 14.2487 9.85383 14.2487 9.9661V14.0339C14.2487 14.1462 14.1576 14.2373 14.0461 14.2373H9.97749C9.86522 14.2373 9.7741 14.1462 9.7741 14.0339V9.9661ZM18.5199 15.4357H22.5657C23.3516 15.4348 23.9886 14.7978 23.9894 14.0119V9.9661C23.9886 9.1802 23.3516 8.54319 22.5657 8.54237H18.5199C17.734 8.54319 17.0969 9.1802 17.0961 9.9661V14.0119C17.0969 14.7978 17.734 15.4348 18.5199 15.4357ZM18.3165 9.9661C18.3165 9.85383 18.4076 9.76271 18.5199 9.76271H22.5657C22.678 9.76271 22.7691 9.85383 22.7691 9.9661V14.0119C22.7691 14.0119 22.7691 14.0119 22.7691 14.0127C22.7691 14.125 22.678 14.2153 22.5665 14.2153H22.5657H18.5199C18.4076 14.2153 18.3165 14.1242 18.3165 14.0127V14.0119V9.9661ZM5.51349 17.0847H1.44569C0.659797 17.0856 0.0227796 17.7226 0.0219661 18.5085V22.5763C0.0227796 23.3622 0.659797 23.9992 1.44569 24H5.51349C6.29939 23.9992 6.93641 23.3622 6.93722 22.5763V18.5085C6.93641 17.7226 6.29939 17.0856 5.51349 17.0847ZM5.71688 22.5763C5.71688 22.6885 5.62576 22.7797 5.51349 22.7797H1.44569C1.33342 22.7797 1.24231 22.6885 1.24231 22.5763V18.5085C1.24231 18.3962 1.33342 18.3051 1.44569 18.3051H5.51349C5.62576 18.3051 5.71688 18.3962 5.71688 18.5085V22.5763ZM14.0559 17.0847H9.98807C9.20217 17.0856 8.56515 17.7226 8.56434 18.5085V22.5763C8.56515 23.3622 9.20217 23.9992 9.98807 24H14.0559C14.8418 23.9992 15.4788 23.3622 15.4796 22.5763V18.5085C15.4788 17.7226 14.8418 17.0856 14.0559 17.0847ZM14.2593 22.5763C14.2593 22.6885 14.1681 22.7797 14.0567 22.7797H9.98807C9.8758 22.7797 9.78468 22.6885 9.78468 22.5763V18.5085C9.78468 18.3962 9.8758 18.3051 9.98807 18.3051H14.0559C14.1681 18.3051 14.2593 18.3962 14.2593 18.5077V22.5763ZM22.5763 17.0847H18.5304C17.7445 17.0856 17.1075 17.7226 17.1067 18.5085V22.5543C17.1075 23.3402 17.7445 23.9772 18.5304 23.978H22.5763C23.3622 23.9772 23.9992 23.3402 24 22.5543V18.5085C23.9992 17.7226 23.3622 17.0856 22.5763 17.0847ZM22.7797 22.5543C22.7797 22.5543 22.7797 22.5543 22.7797 22.5551C22.7797 22.6674 22.6885 22.7577 22.5771 22.7577H18.5304C18.5304 22.7577 18.5304 22.7577 18.5296 22.7577C18.4174 22.7577 18.3271 22.6666 18.3271 22.5551V22.5543V18.5085C18.3271 18.3962 18.4182 18.3051 18.5296 18.3051H18.5304H22.5763C22.6885 18.3051 22.7797 18.3962 22.7797 18.5077V22.5543Z",fill:s?t.palette.primary.main:t.palette.text.primary})})},l2=({isSelected:s=!1})=>{const t=y();return e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M0.5 0.999999C0.5 0.723857 0.723857 0.5 1 0.5H3.8C4.07614 0.5 4.3 0.723857 4.3 1V3.8C4.3 4.07614 4.07614 4.3 3.8 4.3H0.999999C0.723857 4.3 0.5 4.07614 0.5 3.8V0.999999ZM7.4 4.3C7.12386 4.3 6.9 4.07614 6.9 3.8V1C6.9 0.723857 7.12386 0.5 7.4 0.5H10.2C10.4761 0.5 10.7 0.723857 10.7 0.999999V3.8C10.7 4.07614 10.4761 4.3 10.2 4.3H7.4ZM13.8 4.3C13.5239 4.3 13.3 4.07614 13.3 3.8V1C13.3 0.723857 13.5239 0.5 13.8 0.5H16.6C16.8761 0.5 17.1 0.723857 17.1 0.999999V3.8C17.1 4.07614 16.8761 4.3 16.6 4.3H13.8ZM19.7 1C19.7 0.723857 19.9239 0.5 20.2 0.5H23C23.2761 0.5 23.5 0.723857 23.5 0.999999V3.8C23.5 4.07614 23.2761 4.3 23 4.3H20.2C19.9239 4.3 19.7 4.07614 19.7 3.8V1ZM1 10.7C0.723857 10.7 0.5 10.4761 0.5 10.2V7.4C0.5 7.12386 0.723857 6.9 0.999999 6.9H3.8C4.07614 6.9 4.3 7.12386 4.3 7.4V10.2C4.3 10.4761 4.07614 10.7 3.8 10.7H1ZM7.4 10.7C7.12386 10.7 6.9 10.4761 6.9 10.2V7.4C6.9 7.12386 7.12386 6.9 7.4 6.9H10.2C10.4761 6.9 10.7 7.12386 10.7 7.4V10.2C10.7 10.4761 10.4761 10.7 10.2 10.7H7.4ZM13.8 10.7C13.5239 10.7 13.3 10.4761 13.3 10.2V7.4C13.3 7.12386 13.5239 6.9 13.8 6.9H16.6C16.8761 6.9 17.1 7.12386 17.1 7.4V10.2C17.1 10.4761 16.8761 10.7 16.6 10.7H13.8ZM20.2 10.7C19.9239 10.7 19.7 10.4761 19.7 10.2V7.4C19.7 7.12386 19.9239 6.9 20.2 6.9H23C23.2761 6.9 23.5 7.12386 23.5 7.4V10.2C23.5 10.4761 23.2761 10.7 23 10.7H20.2ZM1 17.1C0.723857 17.1 0.5 16.8761 0.5 16.6V13.8C0.5 13.5239 0.723857 13.3 0.999999 13.3H3.8C4.07614 13.3 4.3 13.5239 4.3 13.8V16.6C4.3 16.8761 4.07614 17.1 3.8 17.1H1ZM7.4 17.1C7.12386 17.1 6.9 16.8761 6.9 16.6V13.8C6.9 13.5239 7.12386 13.3 7.4 13.3H10.2C10.4761 13.3 10.7 13.5239 10.7 13.8V16.6C10.7 16.8761 10.4761 17.1 10.2 17.1H7.4ZM13.8 17.1C13.5239 17.1 13.3 16.8761 13.3 16.6V13.8C13.3 13.5239 13.5239 13.3 13.8 13.3H16.6C16.8761 13.3 17.1 13.5239 17.1 13.8V16.6C17.1 16.8761 16.8761 17.1 16.6 17.1H13.8ZM20.2 17.1C19.9239 17.1 19.7 16.8761 19.7 16.6V13.8C19.7 13.5239 19.9239 13.3 20.2 13.3H23C23.2761 13.3 23.5 13.5239 23.5 13.8V16.6C23.5 16.8761 23.2761 17.1 23 17.1H20.2ZM1 23.5C0.723857 23.5 0.5 23.2761 0.5 23V20.2C0.5 19.9239 0.723858 19.7 0.999999 19.7H3.8C4.07614 19.7 4.3 19.9239 4.3 20.2V23C4.3 23.2761 4.07614 23.5 3.8 23.5H1ZM7.4 23.5C7.12386 23.5 6.9 23.2761 6.9 23V20.2C6.9 19.9239 7.12386 19.7 7.4 19.7H10.2C10.4761 19.7 10.7 19.9239 10.7 20.2V23C10.7 23.2761 10.4761 23.5 10.2 23.5H7.4ZM13.8 23.5C13.5239 23.5 13.3 23.2761 13.3 23V20.2C13.3 19.9239 13.5239 19.7 13.8 19.7H16.6C16.8761 19.7 17.1 19.9239 17.1 20.2V23C17.1 23.2761 16.8761 23.5 16.6 23.5H13.8ZM20.2 23.5C19.9239 23.5 19.7 23.2761 19.7 23V20.2C19.7 19.9239 19.9239 19.7 20.2 19.7H23C23.2761 19.7 23.5 19.9239 23.5 20.2V23C23.5 23.2761 23.2761 23.5 23 23.5H20.2Z",stroke:s?t.palette.primary.main:t.palette.text.primary})})},c2=({isSelected:s=!1})=>{const t=y();return e.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22 1H4C2.34315 1 1 2.34315 1 4V22C1 23.6569 2.34315 25 4 25H22C23.6569 25 25 23.6569 25 22V4C25 2.34315 23.6569 1 22 1Z",stroke:s?t.palette.primary.main:t.palette.text.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M13.0349 13.0208C12.7671 13.0208 12.5416 13.1254 12.3571 13.3347C12.172 13.5439 12.0798 13.8528 12.0798 14.2611C12.0798 14.7128 12.1838 15.061 12.3919 15.3063C12.5995 15.5521 12.8369 15.6747 13.1046 15.6747C13.3617 15.6747 13.5766 15.5734 13.7481 15.3726C13.9197 15.1718 14.0052 14.8428 14.0052 14.3843C14.0052 13.9129 13.9129 13.5681 13.7284 13.3488C13.5439 13.1294 13.3122 13.0208 13.0349 13.0208ZM13 5.6875C8.96125 5.6875 5.6875 8.96125 5.6875 13C5.6875 17.0388 8.96125 20.3125 13 20.3125C17.0388 20.3125 20.3125 17.0388 20.3125 13C20.3125 8.96125 17.0388 5.6875 13 5.6875ZM14.7139 16.1539C14.2791 16.6023 13.7194 16.8256 13.0377 16.8256C12.3053 16.8256 11.7034 16.5415 11.2321 15.9728C10.7607 15.4041 10.5244 14.4726 10.5244 13.1772C10.5244 11.8491 10.7708 10.8918 11.2624 10.3051C11.7541 9.71838 12.3919 9.42531 13.1772 9.42531C13.7279 9.42531 14.1841 9.58 14.5452 9.88938C14.9069 10.1993 15.1369 10.6482 15.2359 11.2371L13.891 11.3851C13.8578 11.1094 13.7718 10.9053 13.6334 10.7742C13.4944 10.6426 13.3144 10.5768 13.0928 10.5768C12.7986 10.5768 12.5494 10.7078 12.3464 10.9711C12.1433 11.2343 12.0151 11.7811 11.9622 12.6136C12.3081 12.2052 12.739 12.001 13.2543 12.001C13.8348 12.001 14.332 12.2215 14.746 12.6625C15.16 13.1035 15.367 13.6733 15.367 14.3714C15.367 15.1128 15.1493 15.7068 14.7139 16.1539Z",fill:s?t.palette.primary.main:t.palette.text.primary})]})},p2=({isSelected:s=!1})=>{const t=y();return e.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22 1H4C2.34315 1 1 2.34315 1 4V22C1 23.6569 2.34315 25 4 25H22C23.6569 25 25 23.6569 25 22V4C25 2.34315 23.6569 1 22 1Z",stroke:s?t.palette.primary.main:t.palette.text.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M13.1204 13.3724C12.7806 13.3724 12.5281 13.4899 12.3616 13.7262C12.1951 13.9619 12.1124 14.2173 12.1124 14.4929C12.1124 14.8788 12.2103 15.1791 12.406 15.3951C12.6018 15.6111 12.8464 15.7191 13.1401 15.7191C13.4269 15.7191 13.6643 15.6145 13.8522 15.4069C14.0401 15.1994 14.134 14.9001 14.134 14.5075C14.134 14.1655 14.0384 13.8904 13.8471 13.6829C13.6559 13.4759 13.4134 13.3724 13.1204 13.3724ZM13.1007 12.2733C13.3634 12.2733 13.5732 12.1945 13.7307 12.0381C13.8876 11.8812 13.9669 11.6641 13.9669 11.3868C13.9669 11.1258 13.8888 10.9171 13.7329 10.7601C13.5771 10.6032 13.3713 10.525 13.1153 10.525C12.8493 10.525 12.6378 10.6043 12.4803 10.7624C12.3228 10.9204 12.244 11.1308 12.244 11.3918C12.244 11.6691 12.3222 11.8857 12.4774 12.0409C12.6338 12.1956 12.8414 12.2733 13.1007 12.2733ZM13 5.6875C8.96125 5.6875 5.6875 8.96125 5.6875 13C5.6875 17.0388 8.96125 20.3125 13 20.3125C17.0388 20.3125 20.3125 17.0388 20.3125 13C20.3125 8.96125 17.0388 5.6875 13 5.6875ZM14.8647 16.2057C14.4378 16.6253 13.8702 16.8351 13.1626 16.8351C12.5033 16.8351 11.9554 16.6613 11.5167 16.3143C10.9998 15.9042 10.741 15.3428 10.741 14.629C10.741 14.2364 10.8383 13.8753 11.0335 13.5468C11.2287 13.2183 11.5353 12.9646 11.9543 12.7857C11.5949 12.6344 11.3333 12.4263 11.1708 12.1613C11.0071 11.8964 10.9255 11.6067 10.9255 11.2906C10.9255 10.7511 11.1139 10.3056 11.4914 9.9535C11.8688 9.60138 12.4054 9.42588 13.1007 9.42588C13.7898 9.42588 14.3247 9.60194 14.7049 9.9535C15.0863 10.3056 15.2764 10.7511 15.2764 11.2906C15.2764 11.6264 15.1893 11.9245 15.0143 12.1861C14.8388 12.4471 14.5936 12.6473 14.2769 12.7851C14.6779 12.9471 14.9828 13.1834 15.1915 13.4939C15.4002 13.8044 15.5048 14.1627 15.5048 14.5688C15.5048 15.241 15.2911 15.7861 14.8647 16.2057Z",fill:s?t.palette.primary.main:t.palette.text.primary})]})},C2=({isSelected:s=!1})=>{const t=y();return e.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22 1H4C2.34315 1 1 2.34315 1 4V22C1 23.6569 2.34315 25 4 25H22C23.6569 25 25 23.6569 25 22V4C25 2.34315 23.6569 1 22 1Z",stroke:s?t.palette.primary.main:t.palette.text.primary,strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M18.4237 8.74441H21.7953C22.4502 8.74373 22.981 8.21288 22.9817 7.55797V4.18644C22.981 3.53153 22.4502 3.00068 21.7953 3H18.4237C17.7688 3.00068 17.238 3.53153 17.2373 4.18644V7.55797C17.238 8.21288 17.7688 8.74373 18.4237 8.74441ZM18.2542 4.18644C18.2542 4.09288 18.3302 4.01695 18.4237 4.01695H21.7953C21.8888 4.01695 21.9647 4.09288 21.9647 4.18644V7.55797C21.9647 7.65153 21.8888 7.72746 21.7953 7.72746H18.4237C18.3302 7.72746 18.2542 7.65153 18.2542 7.55797V4.18644ZM18.4332 15.8631H21.8047C22.4597 15.8624 22.9905 15.3315 22.9912 14.6766V11.3051C22.9905 10.6502 22.4597 10.1193 21.8047 10.1186H18.4332C17.7783 10.1193 17.2475 10.6502 17.2468 11.3051V14.6766C17.2475 15.3315 17.7783 15.8624 18.4332 15.8631ZM18.2637 11.3051C18.2637 11.2115 18.3397 11.1356 18.4332 11.1356H21.8047C21.8983 11.1356 21.9742 11.2115 21.9742 11.3051V14.6766C21.9742 14.7702 21.8983 14.8461 21.8054 14.8461H18.4332C18.3397 14.8461 18.2637 14.7702 18.2637 14.6773V11.3051ZM7.59457 17.2373H4.20474C3.54983 17.238 3.01898 17.7688 3.0183 18.4237V21.8136C3.01898 22.4685 3.54983 22.9993 4.20474 23H7.59457C8.24949 22.9993 8.78034 22.4685 8.78102 21.8136V18.4237C8.78034 17.7688 8.24949 17.238 7.59457 17.2373ZM7.76407 21.8136C7.76407 21.9071 7.68813 21.9831 7.59457 21.9831H4.20474C4.11118 21.9831 4.03525 21.9071 4.03525 21.8136V18.4237C4.03525 18.3302 4.11118 18.2542 4.20474 18.2542H7.59457C7.68813 18.2542 7.76407 18.3302 7.76407 18.4237V21.8136ZM14.7132 17.2373H11.3234C10.6685 17.238 10.1376 17.7688 10.1369 18.4237V21.8136C10.1376 22.4685 10.6685 22.9993 11.3234 23H14.7132C15.3681 22.9993 15.899 22.4685 15.8997 21.8136V18.4237C15.899 17.7688 15.3681 17.238 14.7132 17.2373ZM14.8827 21.8136C14.8827 21.9071 14.8068 21.9831 14.7139 21.9831H11.3234C11.2298 21.9831 11.1539 21.9071 11.1539 21.8136V18.4237C11.1539 18.3302 11.2298 18.2542 11.3234 18.2542H14.7132C14.8068 18.2542 14.8827 18.3302 14.8827 18.4231V21.8136ZM21.8136 17.2373H18.442C17.7871 17.238 17.2563 17.7688 17.2556 18.4237V21.7953C17.2563 22.4502 17.7871 22.981 18.442 22.9817H21.8136C22.4685 22.981 22.9993 22.4502 23 21.7953V18.4237C22.9993 17.7688 22.4685 17.238 21.8136 17.2373ZM21.983 21.7953C21.983 21.8888 21.9071 21.9647 21.8142 21.9647H18.442C18.3485 21.9647 18.2725 21.8888 18.2725 21.7959V18.4237C18.2725 18.3302 18.3485 18.2542 18.4414 18.2542H21.8136C21.9071 18.2542 21.983 18.3302 21.983 18.4231V21.7953Z",fill:s?t.palette.primary.main:t.palette.text.primary}),e.jsx("path",{d:"M13.625 3.5H5.375C4.33947 3.5 3.5 4.33947 3.5 5.375V13.625C3.5 14.6605 4.33947 15.5 5.375 15.5H13.625C14.6605 15.5 15.5 14.6605 15.5 13.625V5.375C15.5 4.33947 14.6605 3.5 13.625 3.5Z",stroke:s?t.palette.primary.main:t.palette.text.primary,strokeLinecap:"round",strokeLinejoin:"round"})]})},u2=({isSelected:s=!1})=>{const t=y();return e.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M22 1H4C2.34315 1 1 2.34315 1 4V22C1 23.6569 2.34315 25 4 25H22C23.6569 25 25 23.6569 25 22V4C25 2.34315 23.6569 1 22 1Z",stroke:s?t.palette.primary.main:t.palette.text.primary,strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M19.5 6V4C19.5 3.72386 19.7239 3.5 20 3.5H22C22.2761 3.5 22.5 3.72386 22.5 4V6C22.5 6.27614 22.2761 6.5 22 6.5H20C19.7239 6.5 19.5 6.27614 19.5 6ZM22 11.8333H20C19.7239 11.8333 19.5 11.6095 19.5 11.3333V9.33333C19.5 9.05719 19.7239 8.83333 20 8.83333H22C22.2761 8.83333 22.5 9.05719 22.5 9.33333V11.3333C22.5 11.6095 22.2761 11.8333 22 11.8333ZM22 17.1667H20C19.7239 17.1667 19.5 16.9428 19.5 16.6667V14.6667C19.5 14.3905 19.7239 14.1667 20 14.1667H22C22.2761 14.1667 22.5 14.3905 22.5 14.6667V16.6667C22.5 16.9428 22.2761 17.1667 22 17.1667ZM6 22.5H4C3.72386 22.5 3.5 22.2761 3.5 22V20C3.5 19.7239 3.72386 19.5 4 19.5H6C6.27614 19.5 6.5 19.7239 6.5 20V22C6.5 22.2761 6.27614 22.5 6 22.5ZM11.3333 22.5H9.33333C9.05719 22.5 8.83333 22.2761 8.83333 22V20C8.83333 19.7239 9.05719 19.5 9.33333 19.5H11.3333C11.6095 19.5 11.8333 19.7239 11.8333 20V22C11.8333 22.2761 11.6095 22.5 11.3333 22.5ZM16.6667 22.5H14.6667C14.3905 22.5 14.1667 22.2761 14.1667 22V20C14.1667 19.7239 14.3905 19.5 14.6667 19.5H16.6667C16.9428 19.5 17.1667 19.7239 17.1667 20V22C17.1667 22.2761 16.9428 22.5 16.6667 22.5ZM22 22.5H20C19.7239 22.5 19.5 22.2761 19.5 22V20C19.5 19.7239 19.7239 19.5 20 19.5H22C22.2761 19.5 22.5 19.7239 22.5 20V22C22.5 22.2761 22.2761 22.5 22 22.5Z",stroke:s?t.palette.primary.main:t.palette.text.primary}),e.jsx("path",{d:"M15.375 3.5H5.625C4.45139 3.5 3.5 4.45139 3.5 5.625V15.375C3.5 16.5486 4.45139 17.5 5.625 17.5H15.375C16.5486 17.5 17.5 16.5486 17.5 15.375V5.625C17.5 4.45139 16.5486 3.5 15.375 3.5Z",stroke:s?t.palette.primary.main:t.palette.text.primary,strokeLinecap:"round",strokeLinejoin:"round"})]})},m2=({isSelected:s=!1})=>{const t=y();return e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M11 4.00023H6.8C5.11984 4.00023 4.27976 4.00023 3.63803 4.32721C3.07354 4.61483 2.6146 5.07377 2.32698 5.63826C2 6.27999 2 7.12007 2 8.80023V17.2002C2 18.8804 2 19.7205 2.32698 20.3622C2.6146 20.9267 3.07354 21.3856 3.63803 21.6732C4.27976 22.0002 5.11984 22.0002 6.8 22.0002H15.2C16.8802 22.0002 17.7202 22.0002 18.362 21.6732C18.9265 21.3856 19.3854 20.9267 19.673 20.3622C20 19.7205 20 18.8804 20 17.2002V13.0002M7.99997 16.0002H9.67452C10.1637 16.0002 10.4083 16.0002 10.6385 15.945C10.8425 15.896 11.0376 15.8152 11.2166 15.7055C11.4184 15.5818 11.5914 15.4089 11.9373 15.063L21.5 5.50023C22.3284 4.6718 22.3284 3.32865 21.5 2.50023C20.6716 1.6718 19.3284 1.6718 18.5 2.50022L8.93723 12.063C8.59133 12.4089 8.41838 12.5818 8.29469 12.7837C8.18504 12.9626 8.10423 13.1577 8.05523 13.3618C7.99997 13.5919 7.99997 13.8365 7.99997 14.3257V16.0002Z",stroke:s?t.palette.primary.main:t.palette.text.primary,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};var a1={},h2=G;Object.defineProperty(a1,"__esModule",{value:!0});var w1=a1.default=void 0,x2=h2(q()),g2=e;w1=a1.default=(0,x2.default)((0,g2.jsx)("path",{d:"M6 13h12c.55 0 1-.45 1-1s-.45-1-1-1H6c-.55 0-1 .45-1 1s.45 1 1 1m-2 4h12c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1m3-9c0 .55.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1H8c-.55 0-1 .45-1 1"}),"ClearAllRounded");var o1={},f2=G;Object.defineProperty(o1,"__esModule",{value:!0});var k1=o1.default=void 0,j2=f2(q()),f1=e;k1=o1.default=(0,j2.default)([(0,f1.jsx)("circle",{cx:"12",cy:"12",r:"3"},"0"),(0,f1.jsx)("path",{d:"M20 4h-3.17l-1.24-1.35c-.37-.41-.91-.65-1.47-.65H9.88c-.56 0-1.1.24-1.48.65L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m-8 13c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAltRounded");var d1={},v2=G;Object.defineProperty(d1,"__esModule",{value:!0});var O1=d1.default=void 0,b2=v2(q()),H2=e;O1=d1.default=(0,b2.default)((0,H2.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l2.29 2.29c.63.63 1.71.18 1.71-.71V8.91c0-.89-1.08-1.34-1.71-.71z"}),"VideocamRounded");var l1={},V2=G;Object.defineProperty(l1,"__esModule",{value:!0});var P1=l1.default=void 0;_2(v);var y2=V2(q()),M2=e;function Z1(s){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Z1=function(o){return o?n:t})(s)}function _2(s,t){if(!t&&s&&s.__esModule)return s;if(s===null||typeof s!="object"&&typeof s!="function")return{default:s};var n=Z1(t);if(n&&n.has(s))return n.get(s);var o={__proto__:null},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in s)if(l!=="default"&&{}.hasOwnProperty.call(s,l)){var p=x?Object.getOwnPropertyDescriptor(s,l):null;p&&(p.get||p.set)?Object.defineProperty(o,l,p):o[l]=s[l]}return o.default=s,n&&n.set(s,o),o}P1=l1.default=(0,y2.default)((0,M2.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 13.5v-7c0-.41.47-.65.8-.4l4.67 3.5c.27.2.27.6 0 .8l-4.67 3.5c-.33.25-.8.01-.8-.4z"}),"PlayCircleFilledWhiteRounded");var c1={},S2=G;Object.defineProperty(c1,"__esModule",{value:!0});var D1=c1.default=void 0,w2=S2(q()),k2=e;D1=c1.default=(0,w2.default)((0,k2.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m3 14H9c-.55 0-1-.45-1-1V9c0-.55.45-1 1-1h6c.55 0 1 .45 1 1v6c0 .55-.45 1-1 1"}),"StopCircleRounded");var p1={},O2=G;Object.defineProperty(p1,"__esModule",{value:!0});var I1=p1.default=void 0,P2=O2(q()),Z2=e;I1=p1.default=(0,P2.default)((0,Z2.jsx)("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.16 0-7.74 2.42-9.44 5.93-.32.67.04 1.47.75 1.71.59.2 1.23-.08 1.5-.64 1.3-2.66 4.03-4.5 7.19-4.5 1.95 0 3.73.72 5.12 1.88l-1.91 1.91c-.63.63-.19 1.71.7 1.71H21c.55 0 1-.45 1-1V9.41c0-.89-1.08-1.34-1.71-.71z"}),"RedoRounded");const D2=({contextMenuRef:s,isToogled:t,positionX:n,positionY:o,children:x})=>{const l=v.useRef(null),[p,u]=v.useState(!1),m=$1(),C=Q(),a=E(d=>d.streamMenuContext),h=async()=>{try{const d=a.data;if(d){const r=await(await fetch(`${u1}/api/v1/camera/snapshot/${d.ctrl_id}/${d.ip}`,{credentials:"include"})).blob(),i=document.createElement("a");i.href=URL.createObjectURL(r),i.download=`captura_${d.nodo}_${d.ip}_${Date.now()}.jpg`,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}catch(d){console.error("Error al descargar la imagen:",d)}};return v.useEffect(()=>{if(!l.current&&a.data){const{ctrl_id:d,ip:j}=a.data;l.current=q1(`${u1}/record_stream/${d}/${j}`)}return()=>{l.current&&(l.current.disconnect(),l.current=null,u(!1))}},[a.data]),e.jsxs(V,{sx:{zIndex:1300,top:`${o+"px"}`,left:`${n+"px"}`,visibility:t?"visible":"hidden",position:"fixed"},ref:s,children:[e.jsx(s1,{children:e.jsxs(J,{sx:{minWidth:240},children:[e.jsx(Z,{disablePadding:!0,children:e.jsxs(R,{onClick:()=>{a.index!==null&&(C(G1({streamIndex:a.index})),C(j1()))},children:[e.jsx(F,{children:e.jsx(U1,{})}),e.jsx($,{primary:"Cerrar Video"})]})}),e.jsx(Z,{disablePadding:!0,children:e.jsxs(R,{onClick:()=>{C(v1())},children:[e.jsx(F,{children:e.jsx(w1,{})}),e.jsx($,{primary:"Cerrar Todos Videos"})]})}),e.jsx(Z,{disablePadding:!0,children:e.jsxs(R,{onClick:()=>{if(a.data){const{ctrl_id:d}=a.data;m(`/site/${d}`)}},children:[e.jsx(F,{children:e.jsx(I1,{})}),e.jsx($,{primary:"Ir al site"})]})}),e.jsx(Z,{disablePadding:!0,children:e.jsxs(R,{onClick:()=>{h()},children:[e.jsx(F,{children:e.jsx(k1,{})}),e.jsx($,{primary:"Capturar"})]})}),e.jsx(Z,{disablePadding:!0,children:e.jsxs(R,{onMouseDown:()=>{u(!p)},children:[e.jsx(F,{children:e.jsx(O1,{})}),e.jsx($,{primary:"Grabar"}),p?e.jsx(H1,{}):e.jsx(V1,{})]})}),a.data&&l.current&&e.jsx(I2,{data:a.data,open:p,socket:l.current})]})}),x]})},I2=({socket:s,open:t,data:n})=>{var h;const o=(d,j,r)=>{s.emit("start_recording",d,j,r)},x=(d,j)=>{s.emit("stop_recording",d,j)},{register:l,handleSubmit:p,formState:{errors:u}}=N1({defaultValues:{minute:1}}),m=async d=>{const{ctrl_id:j,ip:r}=n,{minute:i}=d;o(j,r,i)},[C,a]=v.useState(null);return v.useEffect(()=>(s.on("stream_is_recording",d=>{a(d)}),()=>{a(null)}),[s]),e.jsx(E1,{in:t,timeout:"auto",unmountOnExit:!1,children:e.jsx("form",{onSubmit:p(m),children:e.jsx(J,{component:"div",disablePadding:!0,children:e.jsx(Z,{children:e.jsxs(_,{spacing:1,alignItems:"center",justifyContent:"center",width:"100%",children:[e.jsxs(_,{spacing:1,children:[e.jsx(y1,{htmlFor:"telefono",children:"Minutos"}),e.jsx(M1,{id:"minute",variant:"outlined",placeholder:"minutos-grabación",...l("minute",{required:"Minuto es requerido.",min:{value:1,message:"Minuto mínimo es 1."},max:{value:30,message:"Minuto máximo es 30."}}),InputProps:{endAdornment:e.jsx(X1,{position:"start",children:"min"})},sx:{maxWidth:200},name:"minute",type:"number",error:!!(u!=null&&u.minute),helperText:(h=u==null?void 0:u.minute)==null?void 0:h.message})]}),e.jsxs(_,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,children:[e.jsxs(_,{spacing:.1,alignItems:"center",children:[e.jsx(L,{type:"submit",disabled:C==!0,children:e.jsx(P1,{fontSize:"large"})}),e.jsx(S,{component:"span",variant:"body1",children:"Start"})]}),typeof C=="boolean"&&e.jsx("div",{children:C&&e.jsx(Y1,{})}),e.jsxs(_,{spacing:.1,alignItems:"center",children:[e.jsx(L,{onClick:()=>{const{ctrl_id:d,ip:j}=n;x(d,j)},disabled:C==!1||C==null,children:e.jsx(D1,{fontSize:"large"})}),e.jsx(S,{component:"span",variant:"body1",children:"Stop"})]})]})]})})})})})};function R2(s){return s==="c3"?3:s==="c4"?4:s}function T(s,t){return Array.from({length:s},(n,o)=>t+o)}const $2=()=>{const s=y(),t=E(r=>r.stream),n=E(r=>r.vmsSlice),o=Q(),x=(r,i)=>{o(h1({gridItemIndex:i}));const c=n.streams[i];o(c?x1({nodo:c.nodo,ctrl_id:c.ctrl_id,puertows:c.puertows,ip:c.ip,tipo:c.tipo,cmr_id:c.cmr_id,region:c.region}):j1()),o(g1({isSelected:!0}));const g=t.gridOption!=1;r.detail==2&&g&&(o(m1({isExpanded:!0})),o(U({gridOption:1})))},l=R2(t.gridOption),p=l<=2?"q1":l<=4?"q2":"q3",u=typeof t.gridOption=="number"?t.gridOption**2:t.gridOption=="c3"?6:8,m=(r,i)=>{r.dataTransfer.setData("index",String(i))},C=r=>{r.preventDefault()},a=(r,i)=>{const c=r.dataTransfer.getData("index");o(z1({fromIndex:Number(c),toIndex:i}));const g=n.streams[i];o(h1({gridItemIndex:i})),g&&o(x1({nodo:g.nodo,ctrl_id:g.ctrl_id,puertows:g.puertows,ip:g.ip,tipo:g.tipo,cmr_id:g.cmr_id,region:g.region})),o(g1({isSelected:!0})),r.dataTransfer.clearData("index")},h=v.useRef(null),d=(r,i)=>{r.preventDefault();const c=n.streams[i];if(c&&x(r,i),h.current){const g=r.clientX,w=r.clientY,k=h.current.getBoundingClientRect().height,O=h.current.getBoundingClientRect().width,M=window.innerWidth,b=window.innerHeight;c&&(M-g<=O?(o(X({position:{x:M-O-(M-g),y:w},toogled:!0,data:c,index:i})),b-(w+56)<=k&&o(X({position:{x:M-(M-g+O),y:b-(b-w+k)},toogled:!0,data:c,index:i}))):(o(X({position:{x:g,y:w},toogled:!0,data:c,index:i})),b-(w+56)<=k&&o(X({position:{x:g,y:b-(b-w+k)},toogled:!0,data:c,index:i}))))}},j=E(r=>r.streamMenuContext);return v.useEffect(()=>{const r=i=>{h.current&&(h.current.contains(i.target)||o(B1()))};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[h.current]),e.jsxs(e.Fragment,{children:[e.jsxs(f,{container:!0,sx:{width:"100%",height:"100%",position:"relative",margin:0,"& .MuiGrid-item":{padding:0}},columns:24,children:[!t.isExpanded&&e.jsxs(e.Fragment,{children:[typeof t.gridOption=="number"&&e.jsx(e.Fragment,{children:T(u,0).map((r,i)=>e.jsx(f,{size:{xs:24/l},sx:{borderWidth:1,borderStyle:"solid",position:"relative",borderColor:t.gridItemIndex===i?"white":s.palette.divider},onClick:c=>x(c,i),onContextMenu:c=>{d(c,i)},draggable:!0,onDragStart:c=>m(c,i),onDragOver:c=>C(c),onDrop:c=>a(c,i),children:n.streams[i]&&e.jsx(I,{ip:n.streams[i].ip,ctrl_id:n.streams[i].ctrl_id,q:p},n.streams[i].ctrl_id+n.streams[i].ip+i+`${p}`)},r))}),t.gridOption==="c3"&&e.jsxs(e.Fragment,{children:[e.jsx(f,{size:{xs:24},sx:{height:"66.7%"},children:e.jsxs(f,{container:!0,columns:24,sx:{width:"100%",height:"100%"},children:[e.jsx(f,{size:{xs:16},sx:{borderWidth:1,borderStyle:"solid",position:"relative",borderColor:t.gridItemIndex===0?"white":s.palette.divider},onClick:r=>x(r,0),onContextMenu:r=>{d(r,0)},draggable:!0,onDragStart:r=>m(r,0),onDragOver:r=>C(r),onDrop:r=>a(r,0),children:n.streams[0]&&e.jsx(I,{ip:n.streams[0].ip,ctrl_id:n.streams[0].ctrl_id,q:"q1"},n.streams[0].ctrl_id+n.streams[0].ip+0+"q1")}),e.jsx(f,{size:{xs:8},children:e.jsx(f,{container:!0,sx:{width:"100%",height:"100%"},columns:24,children:T(2,1).map(r=>e.jsx(f,{size:{xs:24},sx:{width:"100%",borderWidth:1,borderColor:t.gridItemIndex===r?"white":s.palette.divider,borderStyle:"solid",position:"relative"},onClick:i=>x(i,r),onContextMenu:i=>{d(i,r)},draggable:!0,onDragStart:i=>m(i,r),onDragOver:i=>C(i),onDrop:i=>a(i,r),children:n.streams[r]&&e.jsx(I,{ip:n.streams[r].ip,ctrl_id:n.streams[r].ctrl_id,q:"q2"},n.streams[r].ctrl_id+n.streams[r].ip+r+"q2")},r))})})]})}),e.jsx(f,{size:{xs:24},sx:{height:"33.3%"},children:e.jsx(f,{container:!0,columns:24,sx:{width:"100%",height:"100%"},children:T(3,3).map(r=>e.jsx(f,{size:{xs:8},sx:{borderWidth:1,borderStyle:"solid",borderColor:t.gridItemIndex===r?"white":s.palette.divider,position:"relative"},onClick:i=>x(i,r),onContextMenu:i=>{d(i,r)},draggable:!0,onDragStart:i=>m(i,r),onDragOver:i=>C(i),onDrop:i=>a(i,r),children:n.streams[r]&&e.jsx(I,{ip:n.streams[r].ip,ctrl_id:n.streams[r].ctrl_id,q:"q2"},n.streams[r].ctrl_id+n.streams[r].ip+r+"q2")},r))})})]}),t.gridOption==="c4"&&e.jsxs(e.Fragment,{children:[e.jsx(f,{size:{xs:24},sx:{height:"75%"},children:e.jsxs(f,{container:!0,columns:24,sx:{width:"100%",height:"100%"},children:[e.jsx(f,{size:{xs:18},sx:{borderWidth:1,borderStyle:"solid",position:"relative",borderColor:t.gridItemIndex===0?"white":s.palette.divider},onClick:r=>x(r,0),onContextMenu:r=>{d(r,0)},draggable:!0,onDragStart:r=>m(r,0),onDragOver:r=>C(r),onDrop:r=>a(r,0),children:n.streams[0]&&e.jsx(I,{ip:n.streams[0].ip,ctrl_id:n.streams[0].ctrl_id,q:"q1"},n.streams[0].ctrl_id+n.streams[0].ip+0+"q1")}),e.jsx(f,{size:{xs:6},children:e.jsx(f,{container:!0,sx:{width:"100%",height:"100%"},columns:24,children:T(3,1).map(r=>e.jsx(f,{size:{xs:24},sx:{width:"100%",borderWidth:1,borderStyle:"solid",position:"relative",borderColor:t.gridItemIndex===r?"white":s.palette.divider},onClick:i=>x(i,r),onContextMenu:i=>{d(i,r)},draggable:!0,onDragStart:i=>m(i,r),onDragOver:i=>C(i),onDrop:i=>a(i,r),children:n.streams[r]&&e.jsx(I,{ip:n.streams[r].ip,ctrl_id:n.streams[r].ctrl_id,q:"q2"},n.streams[r].ctrl_id+n.streams[r].ip+r+"q2")},r))})})]})}),e.jsx(f,{size:{xs:24},sx:{height:"25%"},children:e.jsx(f,{container:!0,columns:24,sx:{width:"100%",height:"100%"},children:T(4,4).map(r=>e.jsx(f,{size:{xs:6},sx:{borderWidth:1,borderStyle:"solid",position:"relative",borderColor:t.gridItemIndex===r?"white":s.palette.divider},onClick:i=>x(i,r),onContextMenu:i=>{d(i,r)},draggable:!0,onDragStart:i=>m(i,r),onDragOver:i=>C(i),onDrop:i=>a(i,r),children:n.streams[r]&&e.jsx(I,{ip:n.streams[r].ip,ctrl_id:n.streams[r].ctrl_id,q:"q2"},n.streams[r].ctrl_id+n.streams[r].ip+r+"q2")},r))})})]})]}),t.isExpanded&&e.jsx(e.Fragment,{children:e.jsx(f,{size:{xs:24},onClick:r=>{r.detail==2&&(o(m1({isExpanded:!1})),o(U({gridOption:t.previusGridOption})))},sx:{borderWidth:1,borderStyle:"solid",position:"relative",borderColor:"white"},onContextMenu:r=>{t.gridItemIndex!==null&&d(r,t.gridItemIndex)},children:t.ctrl_id!=0&&t.ip&&e.jsx(I,{ip:t.ip,ctrl_id:t.ctrl_id,q:p},t.ctrl_id+t.ip+`${p}`)})})]}),e.jsx(D2,{contextMenuRef:h,isToogled:j.toogled,positionX:j.position.x,positionY:j.position.y})]})};var C1={},q2=G;Object.defineProperty(C1,"__esModule",{value:!0});var R1=C1.default=void 0,G2=q2(q()),E2=e;R1=C1.default=(0,G2.default)((0,E2.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm3.17-6.41a.996.996 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0L12 12.59l1.41-1.41c.39-.39 1.02-.39 1.41 0s.39 1.02 0 1.41L13.41 14l1.41 1.41c.39.39.39 1.02 0 1.41s-1.02.39-1.41 0L12 15.41l-1.41 1.41c-.39.39-1.02.39-1.41 0a.996.996 0 0 1 0-1.41L10.59 14zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1"}),"DeleteForeverRounded");const z2=()=>{const[s,t]=v.useState(null),n=v.useRef(),o=()=>{n.current&&t(n.current)},x=()=>{t(null)},l=!!s,p=l?"simple-popover":void 0,u=Q(),{gridOption:m}=E(a=>a.stream),C=(a,h)=>{h!==null&&(u(b1()),u(U({gridOption:h})),typeof h=="number"?u(Y(Array.from({length:h**2},()=>null))):h=="c3"?u(Y(Array.from({length:6},()=>null))):u(Y(Array.from({length:8},()=>null))),u(i1({previusGridOption:h})))};return v.useEffect(()=>{typeof m=="number"&&u(Y(Array.from({length:m**2},()=>null)))}),e.jsxs(V,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(V,{sx:{flex:1},children:e.jsx($2,{})}),e.jsxs(V,{sx:{width:"100%",backgroundColor:"background.paper",display:"flex",alignItems:"center",justifyContent:"space-between",px:2,py:1},ref:n,children:[e.jsx(B2,{}),e.jsxs(_,{spacing:1,direction:"row",children:[e.jsxs(r1,{value:m,exclusive:!0,onChange:C,"aria-label":"Grid Options",size:"small",children:[e.jsx(D,{value:1,"aria-label":"Stream Grid 1x1",children:e.jsx(a2,{})}),e.jsx(D,{value:2,"aria-label":"Stream Grid 2x2",children:e.jsx(o2,{})}),e.jsx(D,{value:3,"aria-label":"Stream Grid 3x3",children:e.jsx(d2,{})}),e.jsx(D,{value:4,"aria-label":"Stream Grid 4x4",children:e.jsx(l2,{})})]}),e.jsx(L,{onClick:o,children:e.jsx(m2,{})}),e.jsx(_1,{id:p,open:l,anchorEl:s,onClose:x,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(s1,{elevation:3,children:e.jsxs(_,{px:2,py:1,spacing:1,children:[e.jsx(S,{component:"h4",variant:"body1",children:"Custom Grids:"}),e.jsxs(r1,{value:m,exclusive:!0,onChange:C,"aria-label":"Grid Options",size:"small",children:[e.jsx(D,{value:"c3","aria-label":"Stream Grid Custom1 3x3",children:e.jsx(C2,{})}),e.jsx(D,{value:"c4","aria-label":"Stream Grid Custom2 4x4",children:e.jsx(u2,{})})]}),e.jsx(S,{component:"h4",variant:"body1",children:"Normal Grids:"}),e.jsxs(r1,{value:m,exclusive:!0,onChange:C,"aria-label":"Grid Options",size:"small",children:[e.jsx(D,{value:6,"aria-label":"Stream Grid 6x6",children:e.jsx(c2,{})}),e.jsx(D,{value:8,"aria-label":"Stream Grid 8x8",children:e.jsx(p2,{})})]})]})})})]})]})]})},B2=()=>{const s=Q(),t=y(),{isError:n,isSuccess:o,data:x}=L1(),[l,p]=v.useState({preferencia:"Por defecto"}),u=P=>{if(P){const{configdata:{gridOption:A,streams:K},prfvms_id:e1,preferencia:N}=P;p({preferencia:N,prfvms_id:e1}),s(U({gridOption:A})),s(i1({previusGridOption:A})),s(T1({gridOption:A,streams:K}))}else p({preferencia:"Por defecto"}),s(b1()),s(U({gridOption:2})),s(i1({previusGridOption:2})),s(v1())},[m,C]=v.useState(null),a=v.useRef(),h=()=>{a.current&&C(a.current)},d=()=>{C(null)},j=!!m,r=j?"preferencias-popover":void 0,[i,c]=v.useState(!1),g=()=>{c(!0)},w=()=>{c(!1)},[k,{isError:O,isSuccess:M,data:b,error:W}]=W1(),H=P=>{k({prfvms_id:P})};return v.useEffect(()=>{O&&W&&z.error(()=>e.jsx(V,{children:e.jsx(S,{component:"p",variant:"body1",children:JSON.stringify(W)})}),{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:t.palette.mode,transition:B,closeButton:!0,style:{backgroundColor:t.palette.background.paper,borderWidth:"1px",borderStyle:"solid",borderColor:t.palette.divider}}),M&&b&&z.success(()=>e.jsx(V,{children:e.jsx(S,{component:"p",variant:"body1",children:b.message})}),{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:t.palette.mode,transition:B,closeButton:!0,style:{backgroundColor:t.palette.background.paper,borderWidth:"1px",borderStyle:"solid",borderColor:t.palette.divider}})},[O,M]),e.jsx(e.Fragment,{children:e.jsxs(_,{spacing:1,direction:"row",children:[e.jsx(V,{ref:a,children:e.jsx(J,{disablePadding:!0,sx:{border:"1px solid white",borderRadius:1,minWidth:150},children:e.jsx(Z,{disablePadding:!0,children:e.jsxs(R,{onClick:h,sx:{py:.5,px:1},children:[e.jsx($,{primary:l.preferencia,sx:{pr:1}}),j?e.jsx(H1,{}):e.jsx(V1,{})]})})})}),e.jsx(_1,{id:r,open:j,anchorEl:m,onClose:d,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(s1,{elevation:3,children:[e.jsxs(J,{disablePadding:!0,sx:{minWidth:150},children:[e.jsx(Z,{disablePadding:!0,divider:o&&x.length>0,children:e.jsx(R,{onClick:()=>{u()},children:e.jsx($,{primary:"Por defecto"})})}),o&&x.map((P,A,K)=>{const{preferencia:e1,prfvms_id:N}=P;return e.jsx(Z,{divider:A<K.length-1,disablePadding:!0,secondaryAction:e.jsx(L,{edge:"end","aria-label":"delete_preference",onClick:()=>{H(N)},children:e.jsx(R1,{})}),children:e.jsx(R,{onClick:()=>{u(P)},children:e.jsx($,{primary:e1})})},N)})]}),n&&e.jsx(Q1,{children:"Error al cargar preferencias."})]})}),e.jsx(L,{"aria-label":"save-preference",onClick:g,children:e.jsx(S1,{})}),i&&e.jsx(L2,{handleClose:w,isOpen:i,data:l,setPreferenciaSelect:p})]})})},L2=({handleClose:s,isOpen:t,data:n,setPreferenciaSelect:o})=>{const{preferencia:x,prfvms_id:l}=n,[p,u]=v.useState(l?x:""),[m,C]=v.useState(null),a=y(),h=E(H=>H.vmsSlice),d=E(H=>H.stream),[j,{isError:r,isSuccess:i,data:c,error:g}]=A1(),[w,{isError:k,isSuccess:O,data:M,error:b}]=F1(),W=H=>{if(p.trim().length==0){C("Nombre de preferencia es requerido.");return}H=="create"&&j({preferencia:p,configdata:{gridOption:d.gridOption,streams:h.streams}}),H=="update"&&w({preferencia:p,configdata:{gridOption:d.gridOption,streams:h.streams},prfvms_id:l})};return v.useEffect(()=>{r&&g&&z.error(()=>e.jsx(V,{children:e.jsx(S,{component:"p",variant:"body1",children:JSON.stringify(g)})}),{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:a.palette.mode,transition:B,closeButton:!0,style:{backgroundColor:a.palette.background.paper,borderWidth:"1px",borderStyle:"solid",borderColor:a.palette.divider}}),i&&c&&(z.success(()=>e.jsx(V,{children:e.jsx(S,{component:"p",variant:"body1",children:c.message})}),{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:a.palette.mode,transition:B,closeButton:!0,style:{backgroundColor:a.palette.background.paper,borderWidth:"1px",borderStyle:"solid",borderColor:a.palette.divider}}),s())},[r,i]),v.useEffect(()=>{k&&b&&z.error(()=>e.jsx(V,{children:e.jsx(S,{component:"p",variant:"body1",children:JSON.stringify(b)})}),{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:a.palette.mode,transition:B,closeButton:!0,style:{backgroundColor:a.palette.background.paper,borderWidth:"1px",borderStyle:"solid",borderColor:a.palette.divider}}),O&&M&&(z.success(()=>e.jsx(V,{children:e.jsx(S,{component:"p",variant:"body1",children:M.message})}),{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:a.palette.mode,transition:B,closeButton:!0,style:{backgroundColor:a.palette.background.paper,borderWidth:"1px",borderStyle:"solid",borderColor:a.palette.divider}}),o(H=>{const{prfvms_id:P}=H;return{preferencia:p,prfvms_id:P}}),s())},[k,O]),e.jsxs(K1,{open:t,onClose:s,maxWidth:"sm",fullWidth:!0,sx:{"& .MuiDialog-paper":{backgroundColor:"background.paper",backgroundImage:"inherit"}},children:[e.jsx(t2,{sx:{px:2,py:1},children:e.jsxs(_,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(S,{component:"div",variant:"h5",children:[l&&"Modificar Preferencia",!l&&"Agregar Preferencia"]}),e.jsx(L,{"aria-label":"close-dialog-vms",onClick:s,children:e.jsx(J1,{})})]})}),e.jsx(e2,{dividers:!0,sx:{px:2},children:e.jsxs(_,{spacing:1,children:[e.jsx(y1,{htmlFor:"preferencia",children:"Preferencia :"}),e.jsx(M1,{id:"preferencia",variant:"outlined",placeholder:"nombre-preferencia",value:p,onChange:H=>{u(H.target.value),C(null)},error:!!m,helperText:m||void 0})]})}),e.jsx(r2,{children:e.jsxs(_,{direction:"row",spacing:1,children:[e.jsx(t1,{size:"small",variant:"contained",color:"error",onClick:s,children:"Cancelar"}),e.jsx(t1,{size:"small",variant:"contained",color:"primary",onClick:()=>{W(l?"update":"create")},children:l?"Actualizar":"Crear"}),l&&e.jsx(t1,{size:"small",variant:"contained",color:"primary",onClick:()=>{W("create")},children:"Nuevo"})]})})]})},ae=()=>e.jsx(e.Fragment,{children:e.jsx(V,{sx:{width:"100%",height:"100%"},children:e.jsx(z2,{})})});export{ae as default};
