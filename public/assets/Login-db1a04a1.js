import{a as N,bI as ue,bJ as de,bK as fe,r as f,bt as pe,bL as me,_ as ge,j as t,bM as he,f as xe,h as be,b as ye,s as je,d as Se,c as H,u as $e,p as ve,bN as Ge,o as Oe,k as Ce,bO as we,bP as _e,bQ as Ee,F as P,m as K,I as Pe,bR as Le,aK as ke}from"./index-83afeab6.js";import{u as Ie}from"./index.esm-34a47b67.js";import{A as Ne}from"./index-3d937e02.js";import{I as J,B as Ae}from"./InputLabel-a01ea7c7.js";import{T as Q}from"./TextField-df3bb6ad.js";import{I as Me}from"./InputAdornment-ca976e16.js";import{A as qe}from"./Alert-f4f0b96c.js";import{M as Te}from"./Link-84f933ee.js";import"./Select-8c656a15.js";import"./FormControl-8b31c5e5.js";const ze=(e,n)=>e.filter(s=>n.includes(s)),L=(e,n,s)=>{const i=e.keys[0];Array.isArray(n)?n.forEach((a,r)=>{s((c,o)=>{r<=e.keys.length-1&&(r===0?Object.assign(c,o):c[e.up(e.keys[r])]=o)},a)}):n&&typeof n=="object"?(Object.keys(n).length>e.keys.length?e.keys:ze(e.keys,Object.keys(n))).forEach(r=>{if(e.keys.indexOf(r)!==-1){const c=n[r];c!==void 0&&s((o,m)=>{i===r?Object.assign(o,m):o[e.up(r)]=m},c)}}):(typeof n=="number"||typeof n=="string")&&s((a,r)=>{Object.assign(a,r)},n)};function h(e){return e?`Level${e}`:""}function A(e){return e.unstable_level>0&&e.container}function X(e){return function(s){return`var(--Grid-${s}Spacing${h(e.unstable_level)})`}}function D(e){return function(s){return e.unstable_level===0?`var(--Grid-${s}Spacing)`:`var(--Grid-${s}Spacing${h(e.unstable_level-1)})`}}function R(e){return e.unstable_level===0?"var(--Grid-columns)":`var(--Grid-columns${h(e.unstable_level-1)})`}const De=({theme:e,ownerState:n})=>{const s=X(n),i={};return L(e.breakpoints,n.gridSize,(a,r)=>{let c={};r===!0&&(c={flexBasis:0,flexGrow:1,maxWidth:"100%"}),r==="auto"&&(c={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof r=="number"&&(c={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${r} / ${R(n)}${A(n)?` + ${s("column")}`:""})`}),a(i,c)}),i},Re=({theme:e,ownerState:n})=>{const s={};return L(e.breakpoints,n.gridOffset,(i,a)=>{let r={};a==="auto"&&(r={marginLeft:"auto"}),typeof a=="number"&&(r={marginLeft:a===0?"0px":`calc(100% * ${a} / ${R(n)})`}),i(s,r)}),s},Be=({theme:e,ownerState:n})=>{if(!n.container)return{};const s=A(n)?{[`--Grid-columns${h(n.unstable_level)}`]:R(n)}:{"--Grid-columns":12};return L(e.breakpoints,n.columns,(i,a)=>{i(s,{[`--Grid-columns${h(n.unstable_level)}`]:a})}),s},Ve=({theme:e,ownerState:n})=>{if(!n.container)return{};const s=D(n),i=A(n)?{[`--Grid-rowSpacing${h(n.unstable_level)}`]:s("row")}:{};return L(e.breakpoints,n.rowSpacing,(a,r)=>{var c;a(i,{[`--Grid-rowSpacing${h(n.unstable_level)}`]:typeof r=="string"?r:(c=e.spacing)==null?void 0:c.call(e,r)})}),i},Fe=({theme:e,ownerState:n})=>{if(!n.container)return{};const s=D(n),i=A(n)?{[`--Grid-columnSpacing${h(n.unstable_level)}`]:s("column")}:{};return L(e.breakpoints,n.columnSpacing,(a,r)=>{var c;a(i,{[`--Grid-columnSpacing${h(n.unstable_level)}`]:typeof r=="string"?r:(c=e.spacing)==null?void 0:c.call(e,r)})}),i},Ue=({theme:e,ownerState:n})=>{if(!n.container)return{};const s={};return L(e.breakpoints,n.direction,(i,a)=>{i(s,{flexDirection:a})}),s},We=({ownerState:e})=>{const n=X(e),s=D(e);return N({minWidth:0,boxSizing:"border-box"},e.container&&N({display:"flex",flexWrap:"wrap"},e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},{margin:`calc(${n("row")} / -2) calc(${n("column")} / -2)`},e.disableEqualOverflow&&{margin:`calc(${n("row")} * -1) 0px 0px calc(${n("column")} * -1)`}),(!e.container||A(e))&&N({padding:`calc(${s("row")} / 2) calc(${s("column")} / 2)`},(e.disableEqualOverflow||e.parentDisableEqualOverflow)&&{padding:`${s("row")} 0px 0px ${s("column")}`}))},Ke=e=>{const n=[];return Object.entries(e).forEach(([s,i])=>{i!==!1&&i!==void 0&&n.push(`grid-${s}-${String(i)}`)}),n},Je=(e,n="xs")=>{function s(i){return i===void 0?!1:typeof i=="string"&&!Number.isNaN(Number(i))||typeof i=="number"&&i>0}if(s(e))return[`spacing-${n}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const i=[];return Object.entries(e).forEach(([a,r])=>{s(r)&&i.push(`spacing-${a}-${String(r)}`)}),i}return[]},Qe=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([n,s])=>`direction-${n}-${s}`):[`direction-xs-${String(e)}`],He=["className","children","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow","unstable_level"],Xe=ue(),Ye=de("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,n)=>n.root});function Ze(e){return fe({props:e,name:"MuiGrid",defaultTheme:Xe})}function en(e={}){const{createStyledComponent:n=Ye,useThemeProps:s=Ze,componentName:i="MuiGrid"}=e,a=f.createContext(void 0),r=(m,u)=>{const{container:y,direction:C,spacing:j,wrap:x,gridSize:S}=m,p={root:["root",y&&"container",x!=="wrap"&&`wrap-xs-${String(x)}`,...Qe(C),...Ke(S),...y?Je(j,u.breakpoints.keys[0]):[]]};return be(p,g=>ye(i,g),{})},c=n(Be,Fe,Ve,De,Ue,We,Re),o=f.forwardRef(function(u,y){var C,j,x,S,p,g,M,k;const $=pe(),w=s(u),v=me(w),G=f.useContext(a),{className:q,children:l,columns:_=12,container:Y=!1,component:Z="div",direction:ee="row",wrap:ne="wrap",spacing:T=0,rowSpacing:se=T,columnSpacing:te=T,disableEqualOverflow:B,unstable_level:O=0}=v,re=ge(v,He);let I=B;O&&B!==void 0&&(I=u.disableEqualOverflow);const V={},F={},U={};Object.entries(re).forEach(([d,E])=>{$.breakpoints.values[d]!==void 0?V[d]=E:$.breakpoints.values[d.replace("Offset","")]!==void 0?F[d.replace("Offset","")]=E:U[d]=E});const ie=(C=u.columns)!=null?C:O?void 0:_,ae=(j=u.spacing)!=null?j:O?void 0:T,oe=(x=(S=u.rowSpacing)!=null?S:u.spacing)!=null?x:O?void 0:se,ce=(p=(g=u.columnSpacing)!=null?g:u.spacing)!=null?p:O?void 0:te,W=N({},v,{level:O,columns:ie,container:Y,direction:ee,wrap:ne,spacing:ae,rowSpacing:oe,columnSpacing:ce,gridSize:V,gridOffset:F,disableEqualOverflow:(M=(k=I)!=null?k:G)!=null?M:!1,parentDisableEqualOverflow:G}),le=r(W,$);let z=t.jsx(c,N({ref:y,as:Z,ownerState:W,className:xe(le.root,q)},U,{children:f.Children.map(l,d=>{if(f.isValidElement(d)&&he(d,["Grid"])){var E;return f.cloneElement(d,{unstable_level:(E=d.props.unstable_level)!=null?E:O+1})}return d})}));return I!==void 0&&I!==(G??!1)&&(z=t.jsx(a.Provider,{value:I,children:z})),z});return o.muiName="Grid",o}const nn=en({createStyledComponent:je("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(e,n)=>n.root}),componentName:"MuiGrid2",useThemeProps:e=>Se({props:e,name:"MuiGrid2"})}),b=nn,sn=H(t.jsx("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5-.59 1.22-1.42 2.27-2.41 3.12l1.41 1.41c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l1.65 1.65C10.66 6.09 11.32 6 12 6zm-1.07 1.14L13 9.21c.57.25 1.03.71 1.28 1.28l2.07 2.07c.08-.34.14-.7.14-1.07C16.5 9.01 14.48 7 12 7c-.37 0-.72.05-1.07.14zM2.01 3.87l2.68 2.68C3.06 7.83 1.77 9.53 1 11.5 2.73 15.89 7 19 12 19c1.52 0 2.98-.29 4.32-.82l3.42 3.42 1.41-1.41L3.42 2.45 2.01 3.87zm7.5 7.5 2.61 2.61c-.04.01-.08.02-.12.02-1.38 0-2.5-1.12-2.5-2.5 0-.05.01-.08.01-.13zm-3.4-3.4 1.75 1.75c-.23.55-.36 1.15-.36 1.78 0 2.48 2.02 4.5 4.5 4.5.63 0 1.23-.13 1.77-.36l.98.98c-.88.24-1.8.38-2.75.38-3.79 0-7.17-2.13-8.82-5.5.7-1.43 1.72-2.61 2.93-3.53z"}),"VisibilityOffOutlined"),tn=H(t.jsx("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"}),"VisibilityOutlined"),gn=()=>{var G,q;const[e,n]=f.useState(!1),s=$e(),i=()=>n(l=>!l),a=l=>{l.preventDefault()},{register:r,handleSubmit:c,formState:{errors:o}}=Ie({defaultValues:{usuario:"",contraseña:""}}),m=ve(),[u,y]=f.useState([]),[C,{isError:j,isSuccess:x,data:S,error:p,isLoading:g}]=Ge(),M=async l=>{C(l)},k=Oe(),{isAuthenticated:$,user:w,isLoading:v}=Ce(l=>l.auth);return f.useEffect(()=>{m(we(g)),x&&(m(_e(S)),m(Ee(!0)))},[g,x,S]),f.useEffect(()=>{j&&p?"data"in p&&y(l=>{const _=p.data;return _.length>0?[...l,..._]:[...l,p.data]}):y([])},[j,p]),f.useEffect(()=>{$&&!v&&(w.rol==="Administrador"||w.rol==="Usuario")?k("/dashboard"):$&&!v&&w.rol==="Invitado"&&k("/invitado/tickets")},[$,w,v]),t.jsx(t.Fragment,{children:t.jsx(Ne,{header:t.jsxs(P,{alignItems:"center",justifyContent:"center",spacing:1,children:[t.jsx(K,{component:"h3",variant:"h3",textAlign:"center",color:s.palette.common.white,children:"¡Bienvenido a Uku Systems!"}),t.jsx(K,{component:"p",variant:"body1",textAlign:"center",color:s.palette.common.white,children:"Tu seguridad es nuestra absoluta prioridad."})]}),children:t.jsx(b,{container:!0,sx:{margin:0,padding:0},children:t.jsx(b,{xs:12,children:t.jsx("form",{noValidate:!0,onSubmit:c(M),children:t.jsxs(b,{container:!0,spacing:3,children:[t.jsx(b,{xs:12,children:t.jsxs(P,{spacing:1,children:[t.jsx(J,{htmlFor:"usuario",children:"Usuario"}),t.jsx(Q,{id:"usuario",variant:"outlined",placeholder:"Ingresar usuario",...r("usuario",{required:"Usuario es requerido"}),autoFocus:!0,error:!!(o!=null&&o.usuario),helperText:(G=o==null?void 0:o.usuario)==null?void 0:G.message})]})}),t.jsx(b,{xs:12,children:t.jsxs(P,{spacing:1,children:[t.jsx(J,{htmlFor:"contraseña",children:"Contraseña"}),t.jsx(Q,{id:"contraseña",type:e?"text":"password",placeholder:"* * * * * * * *",...r("contraseña",{required:"Contraseña es requerido."}),error:!!(o!=null&&o.contraseña),helperText:(q=o==null?void 0:o.contraseña)==null?void 0:q.message,InputProps:{endAdornment:t.jsx(Me,{position:"end",children:t.jsx(Pe,{"aria-label":"toggle contraseña visibility",onClick:i,onMouseDown:a,edge:"end",children:e?t.jsx(tn,{}):t.jsx(sn,{})})})}})]})}),u.length>0&&t.jsx(b,{xs:12,children:t.jsx(P,{spacing:1,children:u.map((l,_)=>t.jsx(qe,{color:"warning",severity:"error",children:l.message},_))})}),t.jsx(b,{xs:12,children:t.jsx(P,{direction:"row",alignItems:"center",justifyContent:"flex-end",children:t.jsx(Te,{component:Le,to:"/auth/forgot-password",underline:"hover",color:"inherit",children:"¿Olvidaste tu contraseña?"})})}),t.jsx(b,{xs:12,children:t.jsxs(P,{spacing:4,children:[t.jsx(Ae,{variant:"contained",fullWidth:!0,type:"submit",sx:{borderRadius:5},disabled:g,children:"Ingresar"}),g&&t.jsx(ke,{})]})})]})})})})})})};export{gn as Login,gn as default};
