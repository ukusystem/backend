import{M as Ne,N as Ze,s as D,r as n,P as Ye,j as e,Q as Ce,R as Ge,U as Qe,V as je,W as Ke,X as Xe,b as ae,Y as Tt,Z as te,_ as kt,$ as _t,a0 as Fe,a1 as Mt,a2 as At,a3 as oe,a4 as Rt,a5 as Lt,a6 as Oe,a7 as Et,u as Pt,a8 as It,a as S,a9 as M,aa as me,B as C,o as G,l as y,ab as re,ac as fe,ad as ye,ae as I,af as Dt,T as f,ag as qe,S as z,ah as Vt,ai as Ht,aj as zt,ak as Bt,al as $t,am as Ft,v as Ot,an as Wt,ao as we,ap as Ut,aq as Nt,y as Zt,ar as Yt,as as Gt,at as Qt,au as Kt,av as Xt,aw as qt,ax as w}from"./index-D9tpZ6Qh.js";import{g as Z}from"./groupByKey-nGMiMvM1.js";import{M as Je}from"./MainSimpleCard-BnLjfI6l.js";import{C as et}from"./CardHeader-DVJSS29U.js";function Jt(t){return Ze("MuiCardActions",t)}Ne("MuiCardActions",["root","spacing"]);const eo=t=>{const{classes:o,disableSpacing:r}=t;return Ge({root:["root",!r&&"spacing"]},Jt,o)},to=D("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[o.root,!r.disableSpacing&&o.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),oo=n.forwardRef(function(o,r){const i=Ye({props:o,name:"MuiCardActions"}),{disableSpacing:a=!1,className:l,...p}=i,c={...i,disableSpacing:a},h=eo(c);return e.jsx(to,{className:Ce(h.root,l),ownerState:c,ref:r,...p})});function ro(t){return Ze("MuiTooltip",t)}const m=Ne("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function so(t){return Math.round(t*1e5)/1e5}const io=t=>{const{classes:o,disableInteractive:r,arrow:i,touch:a,placement:l}=t,p={popper:["popper",!r&&"popperInteractive",i&&"popperArrow"],tooltip:["tooltip",i&&"tooltipArrow",a&&"touch",`tooltipPlacement${Ke(l.split("-")[0])}`],arrow:["arrow"]};return Ge(p,ro,o)},ao=D(Qe,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[o.popper,!r.disableInteractive&&o.popperInteractive,r.arrow&&o.popperArrow,!r.open&&o.popperClose]}})(je(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:o})=>!o.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:o})=>!o,style:{pointerEvents:"none"}},{props:({ownerState:o})=>o.arrow,style:{[`&[data-popper-placement*="bottom"] .${m.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${m.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${m.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${m.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:o})=>o.arrow&&!o.isRtl,style:{[`&[data-popper-placement*="right"] .${m.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:o})=>o.arrow&&!!o.isRtl,style:{[`&[data-popper-placement*="right"] .${m.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:o})=>o.arrow&&!o.isRtl,style:{[`&[data-popper-placement*="left"] .${m.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:o})=>o.arrow&&!!o.isRtl,style:{[`&[data-popper-placement*="left"] .${m.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),no=D("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[o.tooltip,r.touch&&o.touch,r.arrow&&o.tooltipArrow,o[`tooltipPlacement${Ke(r.placement.split("-")[0])}`]]}})(je(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Xe(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${m.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${m.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${m.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${m.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:o})=>o.arrow,style:{position:"relative",margin:0}},{props:({ownerState:o})=>o.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${so(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:o})=>!o.isRtl,style:{[`.${m.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${m.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:o})=>!o.isRtl&&o.touch,style:{[`.${m.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${m.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:o})=>!!o.isRtl,style:{[`.${m.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${m.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:o})=>!!o.isRtl&&o.touch,style:{[`.${m.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${m.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:o})=>o.touch,style:{[`.${m.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:o})=>o.touch,style:{[`.${m.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),lo=D("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,o)=>o.arrow})(je(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Xe(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let se=!1;const We=new Lt;let Y={x:0,y:0};function ie(t,o){return(r,...i)=>{o&&o(r,...i),t(r,...i)}}const co=n.forwardRef(function(o,r){const i=Ye({props:o,name:"MuiTooltip"}),{arrow:a=!1,children:l,classes:p,components:c={},componentsProps:h={},describeChild:g=!1,disableFocusListener:s=!1,disableHoverListener:u=!1,disableInteractive:j=!1,disableTouchListener:v=!1,enterDelay:d=100,enterNextDelay:b=0,enterTouchDelay:tt=700,followCursor:ne=!1,id:ot,leaveDelay:Se=0,leaveTouchDelay:rt=1500,onClose:Te,onOpen:ke,open:st,placement:_e="bottom",PopperComponent:Me,PopperProps:R={},slotProps:L={},slots:it={},title:H,TransitionComponent:at,TransitionProps:nt,...Ae}=i,E=n.isValidElement(l)?l:e.jsx("span",{children:l}),Re=ae(),lt=Tt(),[O,Le]=n.useState(),[le,ct]=n.useState(null),Q=n.useRef(!1),ce=j||ne,Ee=te(),de=te(),K=te(),Pe=te(),[dt,Ie]=kt({controlled:st,default:!1,name:"Tooltip",state:"open"});let A=dt;const pe=_t(ot),W=n.useRef(),X=Fe(()=>{W.current!==void 0&&(document.body.style.WebkitUserSelect=W.current,W.current=void 0),Pe.clear()});n.useEffect(()=>X,[X]);const De=x=>{We.clear(),se=!0,Ie(!0),ke&&!A&&ke(x)},q=Fe(x=>{We.start(800+Se,()=>{se=!1}),Ie(!1),Te&&A&&Te(x),Ee.start(Re.transitions.duration.shortest,()=>{Q.current=!1})}),J=x=>{Q.current&&x.type!=="touchstart"||(O&&O.removeAttribute("title"),de.clear(),K.clear(),d||se&&b?de.start(se?b:d,()=>{De(x)}):De(x))},he=x=>{de.clear(),K.start(Se,()=>{q(x)})},[,Ve]=n.useState(!1),He=x=>{Oe(x.target)||(Ve(!1),he(x))},ze=x=>{O||Le(x.currentTarget),Oe(x.target)&&(Ve(!0),J(x))},Be=x=>{Q.current=!0;const _=E.props;_.onTouchStart&&_.onTouchStart(x)},pt=x=>{Be(x),K.clear(),Ee.clear(),X(),W.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Pe.start(tt,()=>{document.body.style.WebkitUserSelect=W.current,J(x)})},ht=x=>{E.props.onTouchEnd&&E.props.onTouchEnd(x),X(),K.start(rt,()=>{q(x)})};n.useEffect(()=>{if(!A)return;function x(_){_.key==="Escape"&&q(_)}return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[q,A]);const xt=Mt(At(E),Le,r);!H&&H!==0&&(A=!1);const xe=n.useRef(),ut=x=>{const _=E.props;_.onMouseMove&&_.onMouseMove(x),Y={x:x.clientX,y:x.clientY},xe.current&&xe.current.update()},U={},ue=typeof H=="string";g?(U.title=!A&&ue&&!u?H:null,U["aria-describedby"]=A?pe:null):(U["aria-label"]=ue?H:null,U["aria-labelledby"]=A&&!ue?pe:null);const T={...U,...Ae,...E.props,className:Ce(Ae.className,E.props.className),onTouchStart:Be,ref:xt,...ne?{onMouseMove:ut}:{}},N={};v||(T.onTouchStart=pt,T.onTouchEnd=ht),u||(T.onMouseOver=ie(J,T.onMouseOver),T.onMouseLeave=ie(he,T.onMouseLeave),ce||(N.onMouseOver=J,N.onMouseLeave=he)),s||(T.onFocus=ie(ze,T.onFocus),T.onBlur=ie(He,T.onBlur),ce||(N.onFocus=ze,N.onBlur=He));const P={...i,isRtl:lt,arrow:a,disableInteractive:ce,placement:_e,PopperComponentProp:Me,touch:Q.current},k=typeof L.popper=="function"?L.popper(P):L.popper,gt=n.useMemo(()=>{var _,$e;let x=[{name:"arrow",enabled:!!le,options:{element:le,padding:4}}];return(_=R.popperOptions)!=null&&_.modifiers&&(x=x.concat(R.popperOptions.modifiers)),($e=k==null?void 0:k.popperOptions)!=null&&$e.modifiers&&(x=x.concat(k.popperOptions.modifiers)),{...R.popperOptions,...k==null?void 0:k.popperOptions,modifiers:x}},[le,R.popperOptions,k==null?void 0:k.popperOptions]),ge=io(P),mt=typeof L.transition=="function"?L.transition(P):L.transition,ee={slots:{popper:c.Popper,transition:c.Transition??at,tooltip:c.Tooltip,arrow:c.Arrow,...it},slotProps:{arrow:L.arrow??h.arrow,popper:{...R,...k??h.popper},tooltip:L.tooltip??h.tooltip,transition:{...nt,...mt??h.transition}}},[ft,yt]=oe("popper",{elementType:ao,externalForwardedProps:ee,ownerState:P,className:Ce(ge.popper,R==null?void 0:R.className)}),[bt,Ct]=oe("transition",{elementType:Rt,externalForwardedProps:ee,ownerState:P}),[jt,wt]=oe("tooltip",{elementType:no,className:ge.tooltip,externalForwardedProps:ee,ownerState:P}),[vt,St]=oe("arrow",{elementType:lo,className:ge.arrow,externalForwardedProps:ee,ownerState:P,ref:ct});return e.jsxs(n.Fragment,{children:[n.cloneElement(E,T),e.jsx(ft,{as:Me??Qe,placement:_e,anchorEl:ne?{getBoundingClientRect:()=>({top:Y.y,left:Y.x,right:Y.x,bottom:Y.y,width:0,height:0})}:O,popperRef:xe,open:O?A:!1,id:pe,transition:!0,...N,...yt,popperOptions:gt,children:({TransitionProps:x})=>e.jsx(bt,{timeout:Re.transitions.duration.shorter,...x,...Ct,children:e.jsxs(jt,{...wt,children:[H,a?e.jsx(vt,{...St}):null]})})})]})}),be=D(Et)(({theme:t})=>({borderRadius:10,width:"100%",backgroundColor:t.palette.tertiary.opacityDark,"&.Mui-focused":{outline:"none",border:"none",boxShadow:"none"},"&.MuiOutlinedInput-root":{color:t.palette.text.primary,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"},fontWeight:500},"& .MuiSelect-icon":{color:t.palette.text.primary}})),po=()=>{const t=Pt(),{isSuccess:o,data:r}=It(),{period_time:i,ctrl_id:a,date:l,rgn_id:p}=S(s=>s.dashboardStore),c=s=>{t(M({rgn_id:s.target.value,ctrl_id:""}))},h=s=>{t(M({ctrl_id:s.target.value}))},g=s=>{t(M({period_time:s.target.value}))};return n.useEffect(()=>{if(o){const s=r[0];s!==void 0&&a===""&&(t(M({rgn_id:String(s.rgn_id)})),t(M({ctrl_id:String(s.ctrl_id)})))}},[o,r]),n.useEffect(()=>{t(M({date:me().format("YYYY-MM")}))},[]),e.jsxs(e.Fragment,{children:[e.jsx(C,{sx:{width:"100%"},children:e.jsx(G,{sx:{maxWidth:"100%",height:"100%"},children:e.jsxs(y,{direction:"row",spacing:1,paddingBottom:1.5,children:[e.jsxs(y,{spacing:1,width:200,children:[e.jsx(re,{htmlFor:"group_site",sx:{display:"none"},children:"Grupo de sitio"}),e.jsxs(be,{displayEmpty:!0,value:p,onChange:c,inputProps:{id:"group_site"},renderValue:s=>{if(s.length===0)return e.jsx(e.Fragment,{children:"Grupo de sitio"});let u;return o&&(u=Z(r,"rgn_id")[s]?Z(r,"rgn_id")[s][0]:void 0),e.jsx(e.Fragment,{children:u==null?void 0:u.region.region})},IconComponent:({...s})=>p!==""?e.jsx(fe,{onClick:u=>{u.stopPropagation(),t(M({rgn_id:"",ctrl_id:""}))}}):e.jsx(ye,{...s}),sx:{width:200},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx(I,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Grupo de sitio"})}),o&&Object.entries(Z(r,"rgn_id")).map(([s,u])=>e.jsx(I,{value:s,children:e.jsx(C,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},children:u[0].region.region})},s))]})]}),e.jsxs(y,{spacing:1,width:200,children:[e.jsx(re,{htmlFor:"site_item",sx:{display:"none"},children:"Sitio"}),e.jsxs(be,{disabled:p==="",displayEmpty:!0,value:a,onChange:h,inputProps:{id:"site_item"},renderValue:s=>{if(s.length===0)return e.jsx(e.Fragment,{children:"Sitio"});let u;return o&&(u=r.find(j=>String(j.ctrl_id)===String(s))),e.jsx(e.Fragment,{children:u==null?void 0:u.nodo})},IconComponent:({...s})=>a!==""?e.jsx(fe,{onClick:u=>{u.stopPropagation(),t(M({ctrl_id:""}))}}):e.jsx(ye,{...s}),sx:{width:200},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx(I,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Sitio"})}),o&&p!==""&&Z(r,"rgn_id")[p]&&Z(r,"rgn_id")[p].map(s=>e.jsx(I,{value:String(s.ctrl_id),children:e.jsx(C,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},children:s.nodo})},String(s.ctrl_id)))]})]}),e.jsxs(y,{spacing:1,width:200,children:[e.jsx(re,{htmlFor:"period_time",sx:{display:"none"},children:"Periodo"}),e.jsxs(be,{displayEmpty:!0,value:i,onChange:g,inputProps:{id:"period_time"},renderValue:s=>s.length===0?e.jsx(e.Fragment,{children:"Mes o año"}):e.jsx(e.Fragment,{children:s==="monthly"?"Mes":s==="anualy"?"Año":"No controlado"}),IconComponent:({...s})=>i!==""?e.jsx(fe,{onClick:u=>{u.stopPropagation(),t(M({period_time:""}))}}):e.jsx(ye,{...s}),sx:{width:200},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx(I,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Mes o año"})}),e.jsx(I,{value:"monthly",children:"Mes"},"monthly"),e.jsx(I,{value:"anualy",children:"Año"},"anualy")]})]}),e.jsxs(y,{spacing:1,width:200,children:[e.jsx(re,{htmlFor:"date-select-dashboard",sx:{display:"none"},children:"Fecha"}),e.jsx(Dt,{disabled:i==="",views:i==="anualy"?["year"]:["month","year"],format:i==="anualy"?"YYYY":"MMMM YYYY",value:l!==""?me(l,"YYYY-MM"):me(),onChange:s=>{s&&t(M({date:s.format("YYYY-MM")}))},slotProps:{textField:{size:"medium",id:"date-select-dashboard",sx:s=>({borderRadius:"10px",backgroundColor:s.palette.tertiary.opacityDark,"& .MuiInputBase-root.MuiOutlinedInput-root":{fontWeight:500,color:s.palette.text.primary,border:"none","& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"},boxShadow:"none"},"& .MuiInputBase-input":{minWidth:120}})}}})]})]})})}),e.jsx(f,{variant:"body1",color:"textSecondary",children:"Primero, selecciona un grupo"})]})},B=({title:t,icon:o,descripcion:r,counter:i,containerSx:a})=>e.jsxs(Je,{sx:a,children:[e.jsx(et,{sx:{p:1},title:e.jsx(f,{variant:"subtitle1",children:t})}),e.jsx(qe,{sx:{padding:1,"&:last-child":{paddingBottom:1}},children:e.jsxs(y,{spacing:1,children:[e.jsxs(y,{direction:"row",alignItems:"center",spacing:2,children:[o,i]}),e.jsx(f,{variant:"body1",children:r})]})})]}),$=D(C)(({theme:t})=>({padding:"4px",width:32,height:32,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"8px",backgroundColor:t.palette.tertiary.opacityDarker})),F=D(({children:t,sx:o,...r})=>e.jsx(f,{...r,variant:"h4",sx:{width:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",...o},children:t}))(({theme:t})=>({color:t.palette.text.primary})),ho=({...t})=>e.jsx(z,{...t,viewBox:"0 0 24 24",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_7079_12950",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{x:"3.05176e-05",y:"1.52588e-05",width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_7079_12950)",children:e.jsx("path",{d:"M4.00003 19H20V17H4.00003V19ZM8.00003 13H10V10C10 9.45002 10.1959 8.97918 10.5875 8.58752C10.9792 8.19585 11.45 8.00002 12 8.00002V6.00002C10.9 6.00002 9.95836 6.39168 9.17503 7.17502C8.3917 7.95835 8.00003 8.90002 8.00003 10V13ZM7.00003 15H17V10C17 8.61668 16.5125 7.43752 15.5375 6.46252C14.5625 5.48752 13.3834 5.00002 12 5.00002C10.6167 5.00002 9.43753 5.48752 8.46253 6.46252C7.48753 7.43752 7.00003 8.61668 7.00003 10V15ZM2.00003 21V15H5.00003V10C5.00003 8.05002 5.6792 6.39585 7.03753 5.03752C8.39586 3.67918 10.05 3.00002 12 3.00002C13.95 3.00002 15.6042 3.67918 16.9625 5.03752C18.3209 6.39585 19 8.05002 19 10V15H22V21H2.00003Z",fill:"currentColor"})})]})}),xo=()=>{const{ctrl_id:t,date:o,period_time:r}=S(s=>s.dashboardStore),[i,{isError:a,isLoading:l,isSuccess:p,data:c}]=Vt(),[h,g]=n.useState(0);return n.useEffect(()=>{t!==""&&o!==""&&r!==""&&i({ctrl_id:Number(t),date:o,monthly:r==="monthly"?"true":"false"})},[t,o,r]),n.useEffect(()=>{!l&&p&&c&&g(c.data.total),!l&&a&&g(0)},[p,c,l,a]),e.jsx(B,{title:"Alarmas",descripcion:"Modo armado",counter:e.jsx(F,{sx:s=>({color:s.palette.error.main}),children:h}),icon:e.jsx($,{sx:s=>({backgroundColor:s.palette.error.opacityDarker}),children:e.jsx(ho,{sx:s=>({color:s.palette.text.error,width:24,height:"auto"})})}),containerSx:{":hover":{backgroundColor:"error.opacityLighter",boxShadow:"0px 2px 6px 0px rgba(241, 44, 44, 0.30)"}}})},uo=({...t})=>e.jsx(z,{...t,viewBox:"0 0 24 24",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("mask",{id:"mask0_2564_17943",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2564_17943)",children:e.jsx("path",{d:"M10.4748 22C10.0081 22 9.57064 21.9 9.1623 21.7C8.75397 21.5 8.40814 21.2167 8.1248 20.85L2.6748 13.925L3.1498 13.425C3.48314 13.075 3.88314 12.8667 4.3498 12.8C4.81647 12.7333 5.2498 12.825 5.6498 13.075L7.4998 14.2V6C7.4998 5.71667 7.59564 5.47917 7.7873 5.2875C7.97897 5.09583 8.21647 5 8.4998 5C8.78314 5 9.02481 5.09583 9.2248 5.2875C9.4248 5.47917 9.5248 5.71667 9.5248 6V17.8L7.0998 16.3L9.6998 19.625C9.7998 19.7417 9.91647 19.8333 10.0498 19.9C10.1831 19.9667 10.3248 20 10.4748 20H15.9998C16.5498 20 17.0206 19.8042 17.4123 19.4125C17.804 19.0208 17.9998 18.55 17.9998 18V14C17.9998 13.7167 17.904 13.4792 17.7123 13.2875C17.5206 13.0958 17.2831 13 16.9998 13H11.5248V11H16.9998C17.8331 11 18.5415 11.2917 19.1248 11.875C19.7081 12.4583 19.9998 13.1667 19.9998 14V18C19.9998 19.1 19.6081 20.0417 18.8248 20.825C18.0415 21.6083 17.0998 22 15.9998 22H10.4748ZM4.1748 8.5C3.95814 8.13333 3.79147 7.7375 3.6748 7.3125C3.55814 6.8875 3.4998 6.45 3.4998 6C3.4998 4.61667 3.9873 3.4375 4.9623 2.4625C5.9373 1.4875 7.11647 1 8.4998 1C8.9498 1 9.38314 1.05417 9.7998 1.1625C10.2165 1.27083 10.6081 1.43333 10.9748 1.65C11.7581 2.08333 12.3748 2.69167 12.8248 3.475C13.2748 4.25833 13.4998 5.1 13.4998 6C13.4998 6.45 13.4415 6.8875 13.3248 7.3125C13.2081 7.7375 13.0415 8.13333 12.8248 8.5L11.0998 7.5C11.2331 7.26667 11.3331 7.02917 11.3998 6.7875C11.4665 6.54583 11.4998 6.28333 11.4998 6C11.4998 5.46667 11.3623 4.96667 11.0873 4.5C10.8123 4.03333 10.4415 3.66667 9.9748 3.4C9.75814 3.26667 9.5248 3.16667 9.2748 3.1C9.0248 3.03333 8.76647 3 8.4998 3C7.66647 3 6.95814 3.29167 6.3748 3.875C5.79147 4.45833 5.4998 5.16667 5.4998 6C5.4998 6.28333 5.53314 6.54583 5.5998 6.7875C5.66647 7.02917 5.76647 7.26667 5.8998 7.5L4.1748 8.5ZM13.9748 3.4L14.9748 1.65C15.7581 2.08333 16.3748 2.69167 16.8248 3.475C17.2748 4.25833 17.4998 5.1 17.4998 6C17.4998 6.45 17.4415 6.8875 17.3248 7.3125C17.2081 7.7375 17.0415 8.13333 16.8248 8.5L15.0998 7.5C15.2331 7.26667 15.3331 7.02917 15.3998 6.7875C15.4665 6.54583 15.4998 6.28333 15.4998 6C15.4998 5.46667 15.3623 4.96667 15.0873 4.5C14.8123 4.03333 14.4415 3.66667 13.9748 3.4Z",fill:"currentColor"})})]})}),go=()=>{const{ctrl_id:t,date:o,period_time:r}=S(s=>s.dashboardStore),[i,{isError:a,isLoading:l,isSuccess:p,data:c}]=Ht(),[h,g]=n.useState(0);return n.useEffect(()=>{t!==""&&o!==""&&r!==""&&i({ctrl_id:Number(t),date:o,monthly:r==="monthly"?"true":"false"})},[t,o,r]),n.useEffect(()=>{!l&&p&&c&&g(c.data.total),!l&&a&&g(0)},[p,c,l,a]),e.jsx(B,{title:"Controles",descripcion:"Movimientos",counter:e.jsx(F,{children:h}),icon:e.jsx($,{children:e.jsx(uo,{sx:s=>({color:s.palette.text.tertiary,width:24,height:"auto"})})}),containerSx:{":hover":{backgroundColor:"tertiary.opacityLighter",boxShadow:"0px 1px 6px 0px rgba(42, 55, 60, 0.10)"}}})},mo=({...t})=>e.jsx(z,{...t,viewBox:"0 0 24 24",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("mask",{id:"mask0_2564_17922",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2564_17922)",children:e.jsx("path",{d:"M11.9951 16.1998C12.2486 16.1998 12.4629 16.1141 12.6379 15.9426C12.8129 15.7711 12.9004 15.5586 12.9004 15.3051C12.9004 15.0516 12.8146 14.8373 12.6431 14.6623C12.4716 14.4873 12.2591 14.3998 12.0056 14.3998C11.7521 14.3998 11.5379 14.4856 11.3629 14.6571C11.1879 14.8286 11.1004 15.0411 11.1004 15.2946C11.1004 15.5481 11.1861 15.7623 11.3576 15.9373C11.5291 16.1123 11.7416 16.1998 11.9951 16.1998ZM11.9951 12.8998C12.2486 12.8998 12.4629 12.8141 12.6379 12.6426C12.8129 12.4711 12.9004 12.2586 12.9004 12.0051C12.9004 11.7516 12.8146 11.5373 12.6431 11.3623C12.4716 11.1873 12.2591 11.0998 12.0056 11.0998C11.7521 11.0998 11.5379 11.1856 11.3629 11.3571C11.1879 11.5286 11.1004 11.7411 11.1004 11.9946C11.1004 12.2481 11.1861 12.4623 11.3576 12.6373C11.5291 12.8123 11.7416 12.8998 11.9951 12.8998ZM11.9951 9.59981C12.2486 9.59981 12.4629 9.51406 12.6379 9.34256C12.8129 9.17106 12.9004 8.95856 12.9004 8.70506C12.9004 8.45156 12.8146 8.23731 12.6431 8.06231C12.4716 7.88731 12.2591 7.79981 12.0056 7.79981C11.7521 7.79981 11.5379 7.88555 11.3629 8.05705C11.1879 8.22855 11.1004 8.44105 11.1004 8.69455C11.1004 8.94805 11.1861 9.16231 11.3576 9.33731C11.5291 9.51231 11.7416 9.59981 11.9951 9.59981ZM2.40039 19.1998V13.7998C2.89539 13.7998 3.31914 13.6231 3.67164 13.2696C4.02414 12.9161 4.20039 12.4911 4.20039 11.9946C4.20039 11.4981 4.02414 11.0737 3.67164 10.7216C3.31914 10.3696 2.89539 10.1936 2.40039 10.1936V4.7998H21.6004V10.1998C21.1054 10.1998 20.6816 10.3766 20.3291 10.7301C19.9766 11.0836 19.8004 11.5086 19.8004 12.0051C19.8004 12.5016 19.9766 12.9259 20.3291 13.2781C20.6816 13.6301 21.1054 13.8061 21.6004 13.8061V19.1998H2.40039ZM4.20039 17.3998H19.8004V15.1248C19.2671 14.8081 18.8337 14.3748 18.5004 13.8248C18.1671 13.2748 18.0004 12.6665 18.0004 11.9998C18.0004 11.3331 18.1671 10.7248 18.5004 10.1748C18.8337 9.62481 19.2671 9.19147 19.8004 8.87481V6.5998H4.20039V8.87481C4.73372 9.19147 5.16706 9.62481 5.50039 10.1748C5.83372 10.7248 6.00039 11.3331 6.00039 11.9998C6.00039 12.6665 5.83372 13.2748 5.50039 13.8248C5.16706 14.3748 4.73372 14.8081 4.20039 15.1248V17.3998Z",fill:"currentColor"})})]})}),fo=()=>{const{ctrl_id:t,date:o,period_time:r}=S(s=>s.dashboardStore),[i,{isError:a,isLoading:l,isSuccess:p,data:c}]=zt(),[h,g]=n.useState(0);return n.useEffect(()=>{t!==""&&o!==""&&r!==""&&i({ctrl_id:Number(t),date:o,monthly:r==="monthly"?"true":"false"})},[t,o,r]),n.useEffect(()=>{!l&&p&&c&&g(c.data.total),!l&&a&&g(0)},[p,c,l,a]),e.jsx(B,{title:"Tickets",descripcion:"Recibidos",counter:e.jsx(F,{children:h}),icon:e.jsx($,{children:e.jsx(mo,{sx:s=>({color:s.palette.text.tertiary,width:24,height:"auto"})})}),containerSx:{":hover":{backgroundColor:"tertiary.opacityLighter",boxShadow:"0px 1px 6px 0px rgba(42, 55, 60, 0.10)"}}})},yo=({...t})=>e.jsx(z,{...t,viewBox:"0 0 24 24",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_7117_42804",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{x:"3.05176e-05",y:"1.52588e-05",width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_7117_42804)",children:e.jsx("path",{d:"M14 13H19V11H14V13ZM14 10H19V8.00002H14V10ZM5.00003 16H13V15.45C13 14.7 12.6334 14.1042 11.9 13.6625C11.1667 13.2208 10.2 13 9.00003 13C7.80003 13 6.83336 13.2208 6.10003 13.6625C5.3667 14.1042 5.00003 14.7 5.00003 15.45V16ZM9.00003 12C9.55003 12 10.0209 11.8042 10.4125 11.4125C10.8042 11.0208 11 10.55 11 10C11 9.45002 10.8042 8.97918 10.4125 8.58752C10.0209 8.19585 9.55003 8.00002 9.00003 8.00002C8.45003 8.00002 7.9792 8.19585 7.58753 8.58752C7.19586 8.97918 7.00003 9.45002 7.00003 10C7.00003 10.55 7.19586 11.0208 7.58753 11.4125C7.9792 11.8042 8.45003 12 9.00003 12ZM2.00003 20V4.00002H22V20H2.00003ZM4.00003 18H20V6.00002H4.00003V18Z",fill:"currentColor"})})]})}),bo=()=>{const{ctrl_id:t,date:o,period_time:r}=S(s=>s.dashboardStore),[i,{isError:a,isLoading:l,isSuccess:p,data:c}]=Bt(),[h,g]=n.useState(0);return n.useEffect(()=>{t!==""&&o!==""&&r!==""&&i()},[t,o,r]),n.useEffect(()=>{!l&&p&&c&&g(c.data.total),!l&&a&&g(0)},[p,c,l,a]),e.jsx(B,{title:"Tarjetas",descripcion:"Asignadas",counter:e.jsx(F,{children:h}),icon:e.jsx($,{children:e.jsx(yo,{sx:s=>({color:s.palette.text.tertiary,width:24,height:"auto"})})}),containerSx:{":hover":{backgroundColor:"tertiary.opacityLighter",boxShadow:"0px 1px 6px 0px rgba(42, 55, 60, 0.10)"}}})},Co=({...t})=>e.jsx(z,{...t,viewBox:"0 0 25 24",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[e.jsx("mask",{id:"mask0_7117_20872",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"25",height:"24",children:e.jsx("rect",{x:"0.333374",y:"1.52588e-05",width:"24",height:"24",fill:"#FDDDDD"})}),e.jsx("g",{mask:"url(#mask0_7117_20872)",children:e.jsx("path",{d:"M17.3334 11V8.00002H14.3334V6.00002H17.3334V3.00002H19.3334V6.00002H22.3334V8.00002H19.3334V11H17.3334ZM8.33337 21C6.95004 21 5.77087 20.5125 4.79587 19.5375C3.82087 18.5625 3.33337 17.3833 3.33337 16C3.33337 15.2 3.50837 14.4542 3.85837 13.7625C4.20837 13.0708 4.70004 12.4833 5.33337 12V6.00002C5.33337 5.16668 5.62504 4.45835 6.20837 3.87502C6.79171 3.29168 7.50004 3.00002 8.33337 3.00002C9.16671 3.00002 9.87504 3.29168 10.4584 3.87502C11.0417 4.45835 11.3334 5.16668 11.3334 6.00002V12C11.9667 12.4833 12.4584 13.0708 12.8084 13.7625C13.1584 14.4542 13.3334 15.2 13.3334 16C13.3334 17.3833 12.8459 18.5625 11.8709 19.5375C10.8959 20.5125 9.71671 21 8.33337 21ZM7.33337 10H9.33337V6.00002C9.33337 5.71668 9.23754 5.47918 9.04587 5.28752C8.85421 5.09585 8.61671 5.00002 8.33337 5.00002C8.05004 5.00002 7.81254 5.09585 7.62087 5.28752C7.42921 5.47918 7.33337 5.71668 7.33337 6.00002V10Z",fill:"currentColor"})})]})}),jo=()=>{const{ctrl_id:t,date:o,period_time:r}=S(s=>s.dashboardStore),[i,{isError:a,isLoading:l,isSuccess:p,data:c}]=$t(),[h,g]=n.useState(0);return n.useEffect(()=>{t!==""&&o!==""&&r!==""&&i({ctrl_id:Number(t),date:o,monthly:r==="monthly"?"true":"false"})},[t,o,r]),n.useEffect(()=>{!l&&p&&c&&g(c.data.max),!l&&a&&g(0)},[p,c,l,a]),e.jsx(B,{title:"Temperatura",descripcion:"Grado máximo",counter:e.jsxs(F,{sx:s=>({color:s.palette.error.main}),children:[h,"°"]}),icon:e.jsx($,{sx:s=>({backgroundColor:s.palette.error.opacityDarker}),children:e.jsx(Co,{sx:s=>({color:s.palette.text.error,width:24,height:"auto"})})}),containerSx:{":hover":{backgroundColor:"error.opacityLighter",boxShadow:"0px 2px 6px 0px rgba(241, 44, 44, 0.30)"}}})},wo=({...t})=>e.jsx(z,{...t,viewBox:"0 0 24 24",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("mask",{id:"mask0_2564_17976",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2564_17976)",children:e.jsx("path",{d:"M10.9248 17.7749L15.4998 11.9999H11.7748L12.4248 6.4749L8.09981 13.1999H11.7498L10.9248 17.7749ZM8.39981 21.5999L9.59981 14.9999H4.7998L12.8998 2.3999H14.6998L13.7998 10.1999H19.1998L10.1998 21.5999H8.39981Z",fill:"currentColor"})})]})}),vo=()=>{const{ctrl_id:t,date:o,period_time:r}=S(s=>s.dashboardStore),[i,{isError:a,isLoading:l,isSuccess:p,data:c}]=Ft(),[h,g]=n.useState(0);return n.useEffect(()=>{t!==""&&o!==""&&r!==""&&i({ctrl_id:Number(t),date:o,monthly:r==="monthly"?"true":"false"})},[t,o,r]),n.useEffect(()=>{!l&&p&&c&&g(c.data.total),!l&&a&&g(0)},[p,c,l,a]),e.jsx(B,{title:"Energía",descripcion:"Consumo",counter:e.jsxs(F,{children:[h.toFixed(2)," kw"]}),icon:e.jsx($,{sx:s=>({backgroundColor:s.palette.warning.opacityDarker}),children:e.jsx(wo,{sx:s=>({color:s.palette.text.warning,width:24,height:"auto"})})}),containerSx:{":hover":{backgroundColor:"warning.opacityLighter",boxShadow:" 0px 2px 6px 0px rgba(241, 225, 44, 0.30)"}}})};function ve(t,o,r){const i=[],a=[];return t.length>0?(t.forEach(l=>{l[o]&&l[r]&&(i.push(l[o]),a.push(l[r]))}),{categories:i,series:a}):{categories:i,series:a}}const V=({children:t,subTitle:o,title:r,onClickSeeRegister:i,paginationAction:a})=>e.jsxs(Je,{children:[e.jsx(et,{sx:{p:1},title:r?e.jsx(f,{variant:"subtitle1",color:"textPrimary",children:r}):void 0,subheader:o?e.jsx(f,{variant:"body1",color:"textSecondary",children:o}):void 0}),e.jsx(qe,{sx:{padding:1,"&:last-child":{paddingBottom:1},height:"100%",display:"flex",flexDirection:"column"},children:t}),a,e.jsx(oo,{disableSpacing:!0,sx:{padding:1,justifyContent:"end"},children:e.jsx(Ot,{variant:"text",color:"tertiary",size:"medium",onClick:i,children:"Ver en registro"})})]}),So=()=>{const t=ae(),o=t.palette.mode,[r,i]=n.useState({configs:{chart:{type:"bar",toolbar:{show:!1}},plotOptions:{bar:{borderRadius:4,borderRadiusApplication:"around",borderRadiusWhenStacked:"all",barHeight:25,horizontal:!0,dataLabels:{position:"top"},distributed:!0}},dataLabels:{enabled:!0,offsetX:-15},grid:{show:!0},yaxis:{labels:{style:{cssClass:"apexcharts-yaxis-label",colors:t.palette.text.primary,fontFamily:"Roboto, sans-serif",fontSize:"0.75rem"},align:"center",minWidth:0,maxWidth:50},max:d=>d+1},xaxis:{axisBorder:{show:!0},axisTicks:{show:!0},categories:[],labels:{style:{cssClass:"apexcharts-xaxis-label",colors:t.palette.text.primary,fontFamily:"Roboto, sans-serif",fontSize:"0.75rem",fontWeight:400}}},tooltip:{enabled:!1},legend:{show:!1}}}),[a,l]=n.useState([]),{ctrl_id:p,date:c,period_time:h}=S(d=>d.dashboardStore),[g,{isError:s,isLoading:u,isSuccess:j,data:v}]=Wt();return n.useEffect(()=>{i(d=>{const b=t.palette.text.primary;return{configs:{...d.configs,chart:{...d.configs.chart,background:t.palette.background.paper},xaxis:{...d.configs.xaxis,labels:{...d.configs.xaxis?d.configs.xaxis.labels:{},style:{...d.configs.xaxis&&d.configs.xaxis.labels?d.configs.xaxis.labels.style:{},colors:b,cssClass:"apexcharts-xaxis-label"}}},yaxis:{...d.configs.yaxis,labels:{style:{colors:b,cssClass:"apexcharts-yaxis-label"}}}}}})},[o]),n.useEffect(()=>{p!==""&&c!==""&&h!==""&&g({ctrl_id:Number(p),date:c,monthly:h==="monthly"?"true":"false"})},[p,c,h]),n.useEffect(()=>{if(!u&&j&&v){const d=ve(v,"detector","total_activo");i(b=>({configs:{...b.configs,xaxis:{...b.configs.xaxis,categories:d.categories}}})),l([{data:d.series,name:"activaciones"}])}!u&&s&&(i(d=>({configs:{...d.configs,xaxis:{...d.configs.xaxis,categories:[]}}})),l([]))},[j,v,u,s]),e.jsx(V,{title:"Alarmas",subTitle:"Activaciones de ambos modos",children:e.jsx(we,{options:r.configs,series:a,type:"bar",width:"100%",height:300})})},To=()=>{const t=ae(),o=t.palette.mode,[r,i]=n.useState({configs:{chart:{type:"bar",toolbar:{show:!1}},plotOptions:{bar:{borderRadius:4,borderRadiusApplication:"around",borderRadiusWhenStacked:"all",barHeight:25,horizontal:!0,dataLabels:{position:"top"},distributed:!0}},dataLabels:{enabled:!0,offsetX:-15},grid:{show:!0},yaxis:{labels:{style:{cssClass:"apexcharts-yaxis-label",colors:t.palette.text.primary,fontFamily:"Roboto, sans-serif",fontSize:"0.75rem"},align:"center",minWidth:0,maxWidth:50},max:d=>d+1},xaxis:{axisBorder:{show:!0},axisTicks:{show:!0},categories:[],labels:{style:{cssClass:"apexcharts-xaxis-label",colors:t.palette.text.primary,fontFamily:"'Roboto', sans-serif",fontSize:"0.75rem",fontWeight:400}}},tooltip:{enabled:!1},legend:{show:!1}}}),[a,l]=n.useState([]),{ctrl_id:p,date:c,period_time:h}=S(d=>d.dashboardStore),[g,{isError:s,isLoading:u,isSuccess:j,data:v}]=Ut();return n.useEffect(()=>{i(d=>{const b=t.palette.text.primary;return{configs:{...d.configs,chart:{...d.configs.chart,background:t.palette.background.paper},xaxis:{...d.configs.xaxis,labels:{...d.configs.xaxis?d.configs.xaxis.labels:{},style:{...d.configs.xaxis&&d.configs.xaxis.labels?d.configs.xaxis.labels.style:{},colors:b,cssClass:"apexcharts-xaxis-label"}}},yaxis:{...d.configs.yaxis,labels:{style:{colors:b,cssClass:"apexcharts-yaxis-label"}}}}}})},[o]),n.useEffect(()=>{p!==""&&c!==""&&h!==""&&g({ctrl_id:Number(p),date:c,monthly:h==="monthly"?"true":"false"})},[p,c,h]),n.useEffect(()=>{if(!u&&j&&v){const d=ve(v,"actuador","total_activo");i(b=>({configs:{...b.configs,xaxis:{...b.configs.xaxis,categories:d.categories}}})),l([{data:d.series,name:"activaciones"}])}!u&&s&&(i(d=>({configs:{...d.configs,xaxis:{...d.configs.xaxis,categories:[]}}})),l([]))},[j,v,u,s]),e.jsx(V,{title:"Controles",children:e.jsx(we,{options:r.configs,series:a,type:"bar",width:"100%",height:300})})},ko=()=>{const t=ae(),o=t.palette.mode,{ctrl_id:r,date:i,period_time:a}=S(d=>d.dashboardStore),[l,p]=n.useState({configs:{series:[],chart:{type:"donut"},plotOptions:{pie:{donut:{labels:{show:!0,total:{label:void 0,showAlways:!0,show:!0},value:{color:t.palette.text.primary,fontSize:"30px",fontFamily:"Roboto, sans-serif",fontWeight:500}}}}},labels:[],dataLabels:{enabled:!1},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{show:!1}}}],legend:{position:"bottom",offsetY:0,height:50,fontSize:"12px",fontFamily:"Roboto, sans-serif",fontWeight:400,labels:{colors:t.palette.text.primary}}}}),[c,h]=n.useState([]),[g,{isError:s,isLoading:u,isSuccess:j,data:v}]=Nt();return n.useEffect(()=>{p(d=>{const b=t.palette.text.primary;return{configs:{...d.configs,plotOptions:{pie:{donut:{labels:{show:!0,total:{label:void 0,showAlways:!0,show:!0},value:{color:b,fontSize:"30px",fontFamily:"Roboto, sans-serif",fontWeight:500}}}}},legend:{...d.configs.legend,labels:{colors:b}}}}})},[o]),n.useEffect(()=>{r!==""&&i!==""&&a!==""&&g({ctrl_id:Number(r),date:i,monthly:a==="monthly"?"true":"false"})},[r,i,a]),n.useEffect(()=>{if(!u&&j&&v){const d=ve(v.data,"contrata","total_ticket");h(d.series),p(b=>({configs:{...b.configs,labels:d.categories}}))}!u&&s&&h([])},[j,v,u,s,a]),e.jsx(e.Fragment,{children:e.jsx(V,{title:"Tickets",subTitle:"Culminado en estado aceptado y asistido",children:e.jsx(we,{options:l.configs,series:c,type:"donut",width:"100%",height:300})})})},_o=({foto:t,apellido:o,nombre:r,serie:i})=>{const[a,l]=n.useState(t?`${Zt}/api/v1/user/foto?imgPath=${encodeURIComponent(t)}`:void 0),p=()=>{l(Gt)};return e.jsx(e.Fragment,{children:e.jsxs(y,{direction:"row",spacing:1.25,alignItems:"center",sx:c=>({border:`1px solid ${c.palette.divider}`,padding:1.5,borderRadius:3,boxShadow:"0px 1px 6px 0px rgba(42, 55, 60, 0.10)"}),children:[e.jsx(Yt,{alt:"profile_user_card",src:a,slotProps:{img:{onError:p}},sx:{width:60,height:60}}),e.jsxs(y,{sx:{width:"100%",overflow:"hidden"},children:[e.jsxs(f,{variant:"subtitle1",color:"textPrimary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:[r," ",o]}),e.jsx(f,{variant:"subtitle2",color:"textSecondary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:i})]})]})})},Mo=({page:t,total:o,handleChangePage:r,rowsPerPage:i})=>e.jsxs(y,{spacing:1,direction:"row",alignItems:"center",justifyContent:"end",sx:{backgroundColor:"custom.trackBackground"},children:[e.jsx(f,{color:"textPrimary",variant:"subtitle2",children:`${o>0?t*i+1:0} - ${(t+1)*i<o?(t+1)*i:o} de ${o}`}),e.jsx(Qt,{count:o,onPageChange:r,rowsPerPage:i,page:t})]}),Ao=()=>{const[t,o]=n.useState(0),[r]=n.useState(5),{ctrl_id:i,date:a,period_time:l}=S(d=>d.dashboardStore),[p,{isError:c,isLoading:h,isSuccess:g,data:s}]=Kt(),u=(d,b)=>{o(b)},[j,v]=n.useState([]);return n.useEffect(()=>{!h&&g&&s&&v(s.data),!h&&c&&v([])},[g,s,h,c]),n.useEffect(()=>{i!==""&&a!==""&&l!==""&&p({limit:r,offset:t*r,ctrl_id:Number(i),date:a,monthly:l==="monthly"?"true":"false"})},[t,r,i,a,l]),e.jsx(V,{title:"Tarjetas",paginationAction:g&&s&&j.length>0&&e.jsx(Mo,{handleChangePage:u,page:t,rowsPerPage:r,total:s.meta.totalCount}),children:e.jsx(C,{sx:{flexGrow:1,width:"100%",height:300,overflow:"hidden"},children:e.jsx(G,{sx:{width:"100%",height:"100%"},children:e.jsx(y,{spacing:1,paddingRight:1.5,paddingBottom:1,children:j.map((d,b)=>e.jsx(_o,{nombre:d.nombre,apellido:d.apellido,serie:d.serie,foto:d.foto},b))})})})})},Ro=({total_noregistrado:t,total_registrado:o,total_remoto:r})=>{const i=o+t+r;return e.jsxs(C,{sx:{display:"flex",height:52,"& > *":{padding:"10px 4px",textAlign:"start"},"& > :first-of-type":{borderTopLeftRadius:"0.5rem",borderBottomLeftRadius:"0.5rem"},"& > :last-of-type":{borderTopRightRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}},children:[e.jsx(C,{component:"div",sx:a=>({backgroundColor:a.palette.info[400],flexGrow:i>0?r/i:1,color:a.palette.common.white}),children:e.jsx(f,{variant:"h4",children:r})}),e.jsx(C,{component:"div",sx:a=>({backgroundColor:a.palette.success[400],flexGrow:i>0?o/i:1,color:a.palette.text.textButton}),children:e.jsx(f,{variant:"h4",children:o})}),e.jsx(C,{component:"div",sx:a=>({backgroundColor:a.palette.error[400],flexGrow:i>0?t/i:1,color:a.palette.text.textButton}),children:e.jsx(f,{variant:"h4",children:t})})]})},Lo=()=>{const t=e.jsx(C,{sx:{width:12,height:12}});return e.jsxs(y,{alignItems:"start",spacing:2,children:[e.jsxs(y,{spacing:.5,children:[e.jsxs(y,{spacing:.5,direction:"row",alignItems:"center",children:[e.jsx(C,{sx:o=>({width:12,height:12,borderRadius:"50%",backgroundColor:o.palette.info[400]})}),e.jsx(f,{variant:"subtitle2",color:"textPrimary",children:"Remoto"})]}),e.jsxs(y,{spacing:.5,direction:"row",alignItems:"center",children:[t,e.jsx(f,{variant:"body2",color:"textSecondary",children:"Dieron acceso por medio del sistema"})]})]}),e.jsxs(y,{spacing:.5,children:[e.jsxs(y,{spacing:.5,direction:"row",alignItems:"center",children:[e.jsx(C,{sx:o=>({width:12,height:12,borderRadius:"50%",backgroundColor:o.palette.success[400]})}),e.jsx(f,{variant:"subtitle2",color:"textPrimary",children:"Autorizado"})]}),e.jsxs(y,{spacing:.5,direction:"row",alignItems:"center",children:[t,e.jsx(f,{variant:"body2",color:"textSecondary",children:"Solicitaron ticket para acceder al sitio"})]})]}),e.jsxs(y,{spacing:.5,children:[e.jsxs(y,{spacing:.5,direction:"row",alignItems:"center",children:[e.jsx(C,{sx:o=>({width:12,height:12,borderRadius:"50%",backgroundColor:o.palette.error[400]})}),e.jsx(f,{variant:"subtitle2",color:"textPrimary",children:"Denegado"})]}),e.jsxs(y,{spacing:.5,direction:"row",alignItems:"center",children:[t,e.jsx(f,{variant:"body2",color:"textSecondary",children:"Intentaron ingresar sin un ticket autorizado"})]})]})]})},Eo=()=>{const{ctrl_id:t,date:o,period_time:r}=S(s=>s.dashboardStore),[i,{isError:a,isLoading:l,isSuccess:p,data:c}]=Xt(),[h,g]=n.useState({total_noregistrado:0,total_registrado:0,total_remoto:0});return n.useEffect(()=>{t!==""&&o!==""&&r!==""&&i({ctrl_id:Number(t),date:o,monthly:r==="monthly"?"true":"false"})},[t,o,r]),n.useEffect(()=>{!l&&p&&c&&g({total_noregistrado:c.data.tarjeta.total_noregistrado,total_registrado:c.data.tarjeta.total_registrado,total_remoto:c.data.remoto.total_remoto}),!l&&a&&g({total_noregistrado:0,total_registrado:0,total_remoto:0})},[p,c,l,a,r]),e.jsx(V,{title:"Accesos",children:e.jsxs(C,{sx:{flexGrow:1,width:"100%",display:"flex",flexDirection:"column",rowGap:4},children:[e.jsx(Ro,{total_noregistrado:h.total_noregistrado,total_registrado:h.total_registrado,total_remoto:h.total_remoto}),e.jsx(Lo,{})]})})},Ue=({text:t,variant:o,color:r,placement:i})=>{const a=n.useRef(null),[l,p]=n.useState(!1);return n.useEffect(()=>{const c=()=>{a.current&&p(a.current.scrollWidth>a.current.clientWidth)};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[t]),e.jsx(co,{title:t,disableHoverListener:!l,placement:i,slotProps:{popper:{sx:{[`&.${m.popper}[data-popper-placement*="bottom"] .${m.tooltip}`]:{marginTop:"0px"},[`&.${m.popper}[data-popper-placement*="top"] .${m.tooltip}`]:{marginBottom:"0px"},[`&.${m.popper}[data-popper-placement*="right"] .${m.tooltip}`]:{marginLeft:"0px"},[`&.${m.popper}[data-popper-placement*="left"] .${m.tooltip}`]:{marginRight:"0px"}}}},children:e.jsx(f,{ref:a,variant:o,color:r,sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",textAlign:"center"},children:t})})},Po=({description:t,value:o})=>e.jsxs(y,{spacing:1,alignItems:"center",justifyContent:"center",width:"100%",children:[e.jsx(Ue,{text:t,variant:"subtitle2",color:"textPrimary",placement:"top"}),e.jsx(Ue,{text:`${o}°`,variant:"subtitle2",color:"textPrimary",placement:"top"})]}),Io=({max:t,value:o,description:r})=>{const i=Math.max(0,Math.min(o,t)),a=t>0?i/t:0;return e.jsxs(y,{spacing:2,width:68,alignItems:"center",justifyContent:"center",p:1,children:[e.jsx(C,{role:"progressbar","aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":t,sx:{height:140,width:14,borderRadius:"4px",backgroundColor:"action.selected",display:"flex",flexDirection:"column",justifyContent:"flex-end",overflow:"hidden",position:"relative"},children:e.jsx(C,{sx:{width:"100%",borderRadius:"4px",backgroundColor:o>25?"error.light":"tertiary.light",height:`${a*100}%`,transition:"height 0.3s ease-in-out"}})}),e.jsx(Po,{description:r,value:o})]})},Do=()=>{const{ctrl_id:t,date:o,period_time:r}=S(s=>s.dashboardStore),[i,{isError:a,isLoading:l,isSuccess:p,data:c}]=qt(),[h,g]=n.useState([]);return n.useEffect(()=>{t!==""&&o!==""&&r!==""&&i({ctrl_id:Number(t),date:o,monthly:r==="monthly"?"true":"false"})},[t,o,r]),n.useEffect(()=>{if(!l&&p&&c){const s=Vo(c.data),u=Object.values(s).map(j=>({description:j[0].ubicacion,max:50,value:j[0].max_valor}));g(u)}!l&&a&&g([])},[p,c,l,a]),e.jsx(V,{title:"Temperatura",subTitle:"Grado máximo",children:e.jsx(C,{sx:{height:230,width:"100%"},children:e.jsx(G,{sx:{width:"100%",height:"100%","& .simplebar-content":{width:"100%",height:"100%",display:"flex",placeItems:"center",justifyContent:"center"}},children:h.map((s,u)=>e.jsx(Io,{description:s.description,value:s.value,max:s.max},u))})})})};function Vo(t){const o={};return t.forEach(r=>{o[r.st_id]||(o[r.st_id]=[]),o[r.st_id].push(r)}),o}const Ho=({description:t,data:o})=>e.jsxs(y,{spacing:1,width:"100%",children:[e.jsx(f,{variant:"subtitle1",color:"textPrimary",children:t}),e.jsxs(C,{sx:r=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",borderRadius:2,border:`1px solid ${r.palette.divider}`}),children:[e.jsxs(C,{sx:{display:"flex",width:"100%",backgroundColor:"action.hover",px:2,py:1,borderTopLeftRadius:8,borderTopRightRadius:8,textAlign:"start",color:"text.primary"},children:[e.jsx(f,{variant:"subtitle2",sx:{width:"25%"},children:"AMP(A)"}),e.jsx(f,{variant:"subtitle2",sx:{width:"25%"},children:"VOLT(V)"}),e.jsx(f,{variant:"subtitle2",sx:{width:"25%"},children:"POT(W)"}),e.jsx(f,{variant:"subtitle2",sx:{width:"25%"},children:"KWH"})]}),e.jsxs(C,{sx:{display:"flex",width:"100%",px:2,py:1,borderBottomLeftRadius:8,borderBottomRightRadius:8,textAlign:"start",color:"text.secondary"},children:[e.jsx(f,{variant:"subtitle2",sx:{width:"25%"},children:o.amp}),e.jsx(f,{variant:"subtitle2",sx:{width:"25%"},children:o.volt}),e.jsx(f,{variant:"subtitle2",sx:{width:"25%"},children:o.pot}),e.jsx(f,{variant:"subtitle2",sx:{width:"25%"},children:o.kwh})]})]})]}),zo=[{description:"Módulo 1",data:{amp:10,volt:200,pot:40,kwh:5}},{description:"Módulo 2",data:{amp:15,volt:220,pot:50,kwh:7}},{description:"Módulo 3",data:{amp:8,volt:210,pot:35,kwh:4}}],Bo=()=>e.jsx(V,{title:"Energía (Falta)",subTitle:"Consumo promedio por módulo",children:e.jsx(C,{sx:{width:"100%",height:230},children:e.jsx(G,{sx:{width:"100%",height:"100%","& .simplebar-content":{width:"100%",height:"100%",display:"flex",flexDirection:"column"}},children:e.jsx(y,{spacing:2,paddingRight:1.5,paddingBottom:1,children:zo.map((t,o)=>e.jsx(Ho,{description:t.description,data:t.data},o))})})})}),Uo=()=>e.jsx(C,{sx:{width:"100%",height:"100%",overflow:"hidden"},children:e.jsx(G,{sx:{maxWidth:"100%",maxHeight:"100%","& .simplebar-content":{width:"100%",height:"100%"}},children:e.jsxs(w,{container:!0,rowSpacing:4.5,columnSpacing:2.75,sx:{p:{xs:2,sm:3}},maxWidth:1600,width:"100%",mx:"auto",children:[e.jsx(w,{size:{xs:12},sx:{mb:-2.25},children:e.jsx(f,{variant:"h5",children:"Panel General"})}),e.jsx(w,{size:{xs:12},children:e.jsx(po,{})}),e.jsxs(w,{container:!0,size:{xs:12},children:[e.jsx(w,{size:{xs:12,sm:6,md:4,lg:3,xl:2},children:e.jsx(xo,{})}),e.jsx(w,{size:{xs:12,sm:6,md:4,lg:3,xl:2},children:e.jsx(go,{})}),e.jsx(w,{size:{xs:12,sm:6,md:4,lg:3,xl:2},children:e.jsx(fo,{})}),e.jsx(w,{size:{xs:12,sm:6,md:4,lg:3,xl:2},children:e.jsx(bo,{})}),e.jsx(w,{size:{xs:12,sm:6,md:4,lg:6,xl:2},children:e.jsx(jo,{})}),e.jsx(w,{size:{xs:12,sm:6,md:4,lg:6,xl:2},children:e.jsx(vo,{})})]}),e.jsx(w,{size:{xs:12,lg:6},children:e.jsx(So,{})}),e.jsx(w,{size:{xs:12,lg:6},children:e.jsx(To,{})}),e.jsx(w,{size:{xs:12,lg:4},children:e.jsx(ko,{})}),e.jsx(w,{size:{xs:12,lg:4},children:e.jsx(Ao,{})}),e.jsx(w,{size:{xs:12,lg:4},children:e.jsx(Eo,{})}),e.jsx(w,{size:{xs:12,lg:6},children:e.jsx(Do,{})}),e.jsx(w,{size:{xs:12,lg:6},children:e.jsx(Bo,{})})]})})});export{Uo as default};
