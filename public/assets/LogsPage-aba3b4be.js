import{g as Pe,a as ze,s as X,aG as L,m as K,aH as ge,aI as Ve,aJ as Fe,r as T,b as He,j as e,e as Be,h as Te,Q as oe,U as ne,R as S,v as ce,k as de,aK as Ee,B as _,K as b,N as Z,ar as me,a2 as xe,a3 as Ce,a4 as te,a5 as ae,aa as se,I as le,a9 as fe,W as Ae,L as Ye,A as ke,S as W,aL as Oe,aM as Ue,aN as Ne,aO as ve,p as Ze,o as Ge,aP as Qe,G as H,_ as G,D as Q,C as qe,E as We,aQ as je,aR as we,aS as ye,aT as be,aU as Ke,x as Xe,y as Re,z as Je}from"./index-82986cbd.js";import{u as et,f as Se,N as _e,g as tt,a as at}from"./index-8e9f4ca6.js";import{a as st,P as it,b as rt,c as lt,d as ie,T as re,e as ot}from"./PaperTable-580deb38.js";import{g as B,d as nt,a as ct}from"./getFormattedDateTime-f28f8120.js";import{D as De,M as P}from"./MenuItem-321b6a5e.js";import{S as dt}from"./SwitchBase-7a42073f.js";import{C as ut}from"./CardHeader-87565142.js";import{D as $e}from"./DateTimePicker-b26b9546.js";import"./useMobilePicker-85a269f8.js";import"./InputAdornment-c988aa7a.js";import"./date-time-utils-72093555.js";import"./validateTime-20a0d11f.js";function pt(t){return ze("MuiSwitch",t)}const ht=Pe("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),m=ht,gt=t=>{const{classes:a,edge:r,size:o,color:n,checked:h,disabled:p}=t,d={root:["root",r&&`edge${L(r)}`,`size${L(o)}`],switchBase:["switchBase",`color${L(n)}`,h&&"checked",p&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},x=Te(d,pt,a);return{...a,...x}},mt=X("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:r}=t;return[a.root,r.edge&&a[`edge${L(r.edge)}`],a[`size${L(r.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${m.thumb}`]:{width:16,height:16},[`& .${m.switchBase}`]:{padding:4,[`&.${m.checked}`]:{transform:"translateX(16px)"}}}}]}),xt=X(dt,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,a)=>{const{ownerState:r}=t;return[a.switchBase,{[`& .${m.input}`]:a.input},r.color!=="default"&&a[`color${L(r.color)}`]]}})(K(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${m.checked}`]:{transform:"translateX(20px)"},[`&.${m.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${m.checked} + .${m.track}`]:{opacity:.5},[`&.${m.disabled} + .${m.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${m.input}`]:{left:"-100%",width:"300%"}})),K(({theme:t})=>({"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:ge(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(([,a])=>a&&a.main&&a.light).map(([a])=>({props:{color:a},style:{[`&.${m.checked}`]:{color:(t.vars||t).palette[a].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[a].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:ge(t.palette[a].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${m.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${a}DisabledColor`]:`${t.palette.mode==="light"?Ve(t.palette[a].main,.62):Fe(t.palette[a].main,.55)}`}},[`&.${m.checked} + .${m.track}`]:{backgroundColor:(t.vars||t).palette[a].main}}}))]}))),Ct=X("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(t,a)=>a.track})(K(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`}))),ft=X("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(t,a)=>a.thumb})(K(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),vt=T.forwardRef(function(a,r){const o=He({props:a,name:"MuiSwitch"}),{className:n,color:h="primary",edge:p=!1,size:d="medium",sx:x,...$}=o,C={...o,color:h,edge:p,size:d},v=gt(C),k=e.jsx(ft,{className:v.thumb,ownerState:C});return e.jsxs(mt,{className:Be(v.root,n),sx:x,ownerState:C,children:[e.jsx(xt,{type:"checkbox",icon:k,checkedIcon:k,ref:r,ownerState:C,...$,classes:{...v,root:v.switchBase}}),e.jsx(Ct,{className:v.track,ownerState:C})]})}),jt=vt,wt=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.41476 0C2.36402 0 1.51239 0.852 1.51239 1.90275V22.0931C1.51239 23.1443 2.36402 23.9959 3.41476 23.9959H20.58C21.6304 23.9959 22.4828 23.1443 22.4828 22.0931V7.61625L15.3941 0L3.41476 0Z",fill:"#45B058"}),e.jsx("path",{d:"M9.11475 16.1989C9.162 16.2529 9.189 16.3204 9.189 16.3946C9.189 16.5364 9.07425 16.6646 8.92537 16.6646C8.85787 16.6646 8.78362 16.6376 8.73637 16.5769C8.47312 16.2596 8.02725 16.0568 7.60875 16.0568C6.62287 16.0568 5.87362 16.8131 5.87362 17.8868C5.87362 18.9536 6.62325 19.7164 7.60875 19.7164C8.034 19.7164 8.4525 19.5341 8.73637 19.203C8.78325 19.149 8.85787 19.1156 8.92537 19.1156C9.081 19.1156 9.189 19.2503 9.189 19.3924C9.189 19.4599 9.162 19.5274 9.11475 19.5814C8.76337 19.9459 8.28412 20.2163 7.60912 20.2163C6.31275 20.2163 5.29312 19.2709 5.29312 17.8868C5.29312 16.5026 6.31275 15.5573 7.60912 15.5573C8.28412 15.5576 8.77012 15.8276 9.11475 16.1989ZM11.6655 20.2166C10.9972 20.2166 10.4704 19.9939 10.0856 19.656C10.0249 19.602 9.99787 19.5278 9.99787 19.4535C9.99787 19.3181 10.0991 19.1696 10.2611 19.1696C10.3151 19.1696 10.3759 19.1831 10.4231 19.2236C10.7336 19.5008 11.1656 19.7164 11.6857 19.7164C12.4894 19.7164 12.7459 19.2844 12.7459 18.9398C12.7459 17.7784 10.0789 18.42 10.0789 16.8128C10.0789 16.0703 10.7404 15.5636 11.625 15.5636C12.2055 15.5636 12.7054 15.7388 13.0699 16.0429C13.1306 16.0969 13.1644 16.1711 13.1644 16.2454C13.1644 16.3804 13.0496 16.5154 12.9007 16.5154C12.8467 16.5154 12.786 16.4951 12.7387 16.4546C12.408 16.1846 11.9962 16.0631 11.5841 16.0631C11.0441 16.0631 10.659 16.3534 10.659 16.779C10.659 17.7919 13.326 17.211 13.326 18.8925C13.3264 19.548 12.8809 20.2166 11.6655 20.2166ZM18.0382 15.9964L16.4786 19.872C16.4044 20.0543 16.2217 20.1757 16.0331 20.1757H16.0196C15.8239 20.1757 15.6416 20.0543 15.567 19.872L14.0137 15.9964C14.0002 15.9626 13.9935 15.9289 13.9935 15.8884C13.9935 15.7534 14.1146 15.591 14.2972 15.591C14.412 15.591 14.52 15.6585 14.5672 15.7733L16.0256 19.5203L17.484 15.7733C17.5245 15.6653 17.6325 15.591 17.754 15.591C17.9295 15.591 18.0577 15.7328 18.0577 15.8884C18.0581 15.9221 18.0514 15.9626 18.0382 15.9964Z",fill:"white"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.5004 7.63388V8.00888H17.7004C17.7004 8.00888 15.3334 7.53638 15.4024 5.49375C15.4024 5.49375 15.4804 7.63388 17.6535 7.63388H22.5004Z",fill:"#349C42"}),e.jsx("path",{opacity:"0.5",fillRule:"evenodd",clipRule:"evenodd",d:"M15.4118 0.00225067V5.46263C15.4118 6.08363 15.8258 7.63425 17.7008 7.63425H22.5008L15.4118 0.00225067Z",fill:"white"})]}),yt=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.41699 0.00225067C2.36624 0.00225067 1.51462 0.854626 1.51462 1.905V22.0954C1.51462 23.1465 2.36624 23.9981 3.41699 23.9981H20.5822C21.6326 23.9981 22.485 23.1465 22.485 22.0954V7.6185L15.3967 0.00225067H3.41699Z",fill:"#20A971"}),e.jsx("path",{d:"M8.78588 20.2267C8.70488 20.2267 8.63025 20.193 8.58338 20.1255L7.18538 18.2618L5.781 20.1255C5.73375 20.193 5.6595 20.2267 5.5785 20.2267C5.43 20.2267 5.3085 20.112 5.3085 19.9567C5.3085 19.9027 5.32163 19.842 5.3625 19.7947L6.82125 17.8706L5.46413 16.0609C5.43038 16.0136 5.40975 15.9596 5.40975 15.9056C5.40975 15.7774 5.51775 15.6356 5.68013 15.6356C5.76113 15.6356 5.84213 15.6761 5.89613 15.7436L7.18538 17.4791L8.47463 15.7369C8.52225 15.6694 8.59613 15.6356 8.6775 15.6356C8.81925 15.6356 8.95425 15.7504 8.95425 15.9056C8.95425 15.9596 8.94075 16.0136 8.90663 16.0609L7.5495 17.8639L9.00863 19.7947C9.04238 19.842 9.0555 19.896 9.0555 19.95C9.0555 20.0985 8.934 20.2267 8.78588 20.2267ZM12.5318 20.1795H10.4861C10.263 20.1795 10.0808 19.9972 10.0808 19.7745V15.9056C10.0808 15.7571 10.2023 15.6356 10.371 15.6356C10.5195 15.6356 10.6414 15.7571 10.6414 15.9056V19.68H12.5318C12.6664 19.68 12.7748 19.788 12.7748 19.923C12.7748 20.0715 12.6664 20.1795 12.5318 20.1795ZM15.15 20.2605C14.4818 20.2605 13.9545 20.0378 13.5701 19.6999C13.5094 19.6459 13.4824 19.5716 13.4824 19.4974C13.4824 19.3624 13.5836 19.2139 13.7456 19.2139C13.7996 19.2139 13.8604 19.2274 13.908 19.2679C14.2185 19.5446 14.6505 19.7606 15.1706 19.7606C15.9743 19.7606 16.2304 19.3286 16.2304 18.984C16.2304 17.8226 13.5638 18.4642 13.5638 16.857C13.5638 16.1145 14.2253 15.6079 15.1099 15.6079C15.6904 15.6079 16.1903 15.7834 16.5548 16.0871C16.6155 16.1411 16.6496 16.2154 16.6496 16.2896C16.6496 16.4246 16.5345 16.5596 16.386 16.5596C16.3316 16.5596 16.2709 16.5394 16.224 16.4989C15.8929 16.2289 15.4815 16.1074 15.0694 16.1074C14.5294 16.1074 14.1443 16.3976 14.1443 16.8232C14.1443 17.8361 16.8113 17.2552 16.8113 18.9368C16.8113 19.5923 16.3658 20.2605 15.15 20.2605Z",fill:"white"}),e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.4824 7.632V8.007H17.682C17.682 8.007 15.315 7.5345 15.3844 5.49187C15.3844 5.49187 15.462 7.632 17.6351 7.632H22.4824Z",fill:"#349C42"}),e.jsx("path",{opacity:"0.5",fillRule:"evenodd",clipRule:"evenodd",d:"M15.3934 0V5.46037C15.3934 6.08137 15.8074 7.632 17.6824 7.632H22.4827L15.3934 0Z",fill:"white"})]});var ue={},bt=ne;Object.defineProperty(ue,"__esModule",{value:!0});var Me=ue.default=void 0,Rt=bt(oe()),St=e;Me=ue.default=(0,Rt.default)((0,St.jsx)("path",{d:"M14.67 6v12c0 .55-.45 1-1 1h-3.33c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h3.33c.55 0 1 .45 1 1m2 13H20c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1h-3.33c-.55 0-1 .45-1 1v12c0 .55.44 1 1 1m-8.34-1V6c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3.33c.56 0 1-.45 1-1"}),"ViewColumnRounded");var pe={},_t=ne;Object.defineProperty(pe,"__esModule",{value:!0});var Ie=pe.default=void 0,$t=_t(oe()),kt=e;Ie=pe.default=(0,$t.default)((0,kt.jsx)("path",{d:"M19 13v5c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1v-5c0-.55-.45-1-1-1s-1 .45-1 1v6c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6c0-.55-.45-1-1-1s-1 .45-1 1m-6-.33 1.88-1.88c.39-.39 1.02-.39 1.41 0s.39 1.02 0 1.41l-3.59 3.59c-.39.39-1.02.39-1.41 0L7.7 12.2a.996.996 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0L11 12.67V4c0-.55.45-1 1-1s1 .45 1 1z"}),"SaveAltRounded");var he={},Dt=ne;Object.defineProperty(he,"__esModule",{value:!0});var Le=he.default=void 0,Mt=Dt(oe()),It=e;Le=he.default=(0,Mt.default)((0,It.jsx)("path",{d:"M17.65 6.35c-1.63-1.63-3.94-2.57-6.48-2.31-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20c3.19 0 5.93-1.87 7.21-4.56.32-.67-.16-1.44-.9-1.44-.37 0-.72.2-.88.53-1.13 2.43-3.84 3.97-6.8 3.31-2.22-.49-4.01-2.3-4.48-4.52C5.31 9.44 8.26 6 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71z"}),"RefreshRounded");function Lt(t){return t.length===0?[]:t.map(a=>({accessorKey:a,header:()=>e.jsx("span",{children:a})}))}function Pt(){const[t,a]=S.useState({}),r=ce(),{endDate:o,startDate:n,region:h,ctrl_id:p,register_type:d,register_data:x,table_columns:$,filters:C}=de(i=>i.logs),[v]=Ee(),k=S.useMemo(()=>Lt($),[d]),u=T.useMemo(()=>x===null?[]:x.data.map(l=>{const c={...l};return c.fecha&&(c.fecha=B(c.fecha,!0)),c.fechacomienzo&&(c.fechacomienzo=B(c.fechacomienzo,!0)),c.fechatermino&&(c.fechatermino=B(c.fechatermino,!0)),c.fechaestadofinal&&(c.fechaestadofinal=B(c.fechaestadofinal,!0)),c.fechacreacion&&(c.fechacreacion=B(c.fechacreacion,!0)),c}),[x]),g=et({data:u,columns:k,getCoreRowModel:tt(),getFilteredRowModel:at(),onColumnVisibilityChange:a,state:{columnVisibility:t}}),[R,E]=S.useState(null),J=i=>{E(i.currentTarget)},ee=()=>{E(null)},A=!!R,Y=A?"simple-popover":void 0,[D,M]=S.useState(null),O=i=>{M(i.currentTarget)},s=()=>{M(null)},y=!!D,z=y?"simplex-popover2":void 0,U=()=>{const i=g.getState().columnFilters;r(ke(i))},V=async({tipo:i})=>{try{const l=g.getState().columnVisibility,c=Object.keys(l).reduce((j,f)=>{let w=j;return l[f]||(w=w+`&col_delete=${f}`),w},""),F=g.getState().columnFilters.reduce((j,f)=>{let w=j;return w=w+`&${f.id}=${encodeURIComponent(f.value)}`,w},"");if(o!==null&&n!==null&&h!==""&&p!==""&&d!==""){const j=`/register/download/${i}?type=${d}&ctrl_id=${p}&start_date=${encodeURIComponent(n)}&end_date=${encodeURIComponent(o)}`+F+c,f=`reporte_${d}_${Date.now()}.${i==="excel"?"xlsx":i}`,w=await v({url:j}).unwrap(),I=document.createElement("a");I.href=w,I.download=f,I.style.display="none",document.body.appendChild(I),I.click(),document.body.removeChild(I)}}catch(l){console.error("Error al descargar el archivo",l)}};return S.useEffect(()=>{g.toggleAllColumnsVisible(!0),g.resetColumnFilters(!0)},[d]),S.useEffect(()=>{C!==null&&g.setColumnFilters(C)},[C]),e.jsxs(_,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",overflow:"hidden",rowGap:1},children:[e.jsxs(b,{spacing:1,direction:"row",justifyContent:"space-between",children:[e.jsx(Z,{"aria-describedby":Y,onClick:J,startIcon:e.jsx(Me,{}),children:"Columns"}),e.jsx(me,{id:Y,open:A,anchorEl:R,onClose:ee,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:e.jsxs(xe,{children:[e.jsxs(b,{direction:"row",justifyContent:"space-around",px:2,py:.5,children:[e.jsx(Z,{onClick:()=>{g.toggleAllColumnsVisible(!1),g.resetColumnFilters()},children:"HIDE ALL"}),e.jsx(Z,{onClick:()=>{g.toggleAllColumnsVisible(!0)},children:"SHOW ALL"})]}),e.jsx(De,{}),e.jsx(Ce,{dense:!0,children:g.getAllLeafColumns().map(i=>e.jsx(te,{disablePadding:!0,children:e.jsxs(ae,{sx:{cursor:"inherit"},children:[e.jsx(jt,{checked:i.getIsVisible(),onChange:()=>{i.getIsVisible()?(i.toggleVisibility(!1),i.setFilterValue(void 0)):i.toggleVisibility(!0)},id:`switch-${i.id}-id`}),e.jsx(se,{primary:i.id.toUpperCase()})]})},i.id))})]})}),e.jsx(le,{onClick:U,"aria-label":"previous page",color:"primary",children:e.jsx(Le,{})}),e.jsx(Z,{"aria-describedby":z,onClick:O,startIcon:e.jsx(Ie,{}),children:"Export"}),e.jsx(me,{id:z,open:y,anchorEl:D,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(xe,{children:e.jsxs(Ce,{children:[e.jsx(te,{disablePadding:!0,children:e.jsxs(ae,{sx:{cursor:"inherit"},onClick:()=>{V({tipo:"excel"})},children:[e.jsx(fe,{children:e.jsx(yt,{})}),e.jsx(se,{primary:"Excel File"})]})}),e.jsx(te,{disablePadding:!0,children:e.jsxs(ae,{sx:{cursor:"inherit"},onClick:()=>{V({tipo:"csv"})},children:[e.jsx(fe,{children:e.jsx(wt,{})}),e.jsx(se,{primary:"CSV File"})]})})]})})})]}),e.jsx(_,{sx:{flex:1,overflow:"hidden"},children:e.jsx(st,{sx:{height:"100%",display:"flex",flexDirection:"column",overflowY:"auto"},component:it,variant:"outlined",children:e.jsxs(Ae,{sx:{maxWidth:"100%",maxHeight:"100%"},children:[e.jsxs(rt,{size:"small",stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(lt,{sx:{position:"sticky",top:0},children:g.getHeaderGroups().map(i=>e.jsxs(S.Fragment,{children:[e.jsx(ie,{children:i.headers.map(l=>e.jsx(re,{colSpan:l.colSpan,children:l.isPlaceholder?null:e.jsx("div",{children:Se(l.column.columnDef.header,l.getContext())})},l.id))}),e.jsx(ie,{children:i.headers.map(l=>e.jsx(re,{colSpan:l.colSpan,children:l.isPlaceholder?null:e.jsx("div",{children:l.column.getCanFilter()&&e.jsx("div",{children:e.jsx(zt,{column:l.column})})})},l.id))})]},i.id))}),e.jsx(ot,{children:g.getCoreRowModel().rows.map(i=>e.jsx(ie,{children:i.getVisibleCells().map(l=>e.jsx(re,{children:Se(l.column.columnDef.cell,l.getContext())},l.id))},i.id))})]}),o!==null&&n!==null&&h!==""&&p!==""&&d!==""&&g.getCoreRowModel().rows.length===0&&e.jsxs(_,{sx:{width:"100%",height:"100%",textAlign:"center",py:2,display:"flex",flexDirection:"column",alignItems:"center",rowGap:2},children:[e.jsx(_e,{}),"Registros no encontrados."]}),(o===null||n===null||h===""||p===""||d==="")&&e.jsxs(_,{sx:{width:"100%",height:"100%",textAlign:"center",py:2,display:"flex",flexDirection:"column",alignItems:"center",rowGap:2},children:[e.jsx(_e,{}),"Selecionar Filtros."]})]})})})]})}function zt({column:t}){const a=t.getFilterValue();return e.jsx(Ye,{value:a??"",onChange:r=>t.setFilterValue(r.target.value),placeholder:"Buscar...",inputProps:{"aria-label":"search"},id:`filter-column-by-${t.id}`,size:"small",fullWidth:!0})}const Vt=({handleBackButtonClick:t,handleNextButtonClick:a})=>{const{limit:r,register_data:o,maxCursorId:n,prevIdResponse:h}=de(x=>x.logs),p=ce(),d=x=>{p(Oe(x.target.value))};return e.jsx(b,{spacing:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:o&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Filas por Pagina : "}),e.jsxs(W,{id:"control-select",name:"control-select",value:r,onChange:d,size:"small",inputProps:{"aria-label":"Select RowsPerPage"},SelectDisplayProps:{style:{paddingTop:5,paddingBottom:5}},children:[e.jsx(P,{value:25,children:25}),e.jsx(P,{value:50,children:50}),e.jsx(P,{value:100,children:100})]}),e.jsxs(_,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(le,{onClick:t,disabled:n==null||(o.meta.prev_id?n<=o.meta.prev_id:!1),"aria-label":"previous page",children:e.jsx(nt,{})}),e.jsx(le,{onClick:a,disabled:n==null||h==null,"aria-label":"next page",children:e.jsx(ct,{})})]})]})})};function q(t){if(t===null)return;const a=[];for(const r of t)a.push(`&${r.id}=${encodeURIComponent(r.value)}`);return a.join("")}const Qt=()=>{const{endDate:t,startDate:a,region:r,ctrl_id:o,register_type:n,filters:h,limit:p,register_data:d,previusId:x,prevIdResponse:$,nextId:C,lastCountData:v,countDataResponse:k}=de(s=>s.logs),u=ce(),[g]=Ue(),R=async s=>{try{const{ctrl_id:y,end_date:z,limit:U,start_date:V,type:i,p_action:l,cursor:c,other_params:N}=s;let F=`/register?type=${i}&ctrl_id=${y}&start_date=${encodeURIComponent(V)}&end_date=${encodeURIComponent(z)}&limit=${U}&p_action=${l}`,j=`/register?type=${i}&ctrl_id=${y}&start_date=${encodeURIComponent(V)}&end_date=${encodeURIComponent(z)}&limit=${U}&p_action=${l}&cursor=${c}`;N&&(F=F+N,j=j+N);const f=await g({url:typeof c=="number"?j:F}).unwrap();u(je(f)),u(we(f.meta.prev_id)),u(ye(f.meta.next_id)),u(be(f.meta.result_count)),c==null&&u(Ke(f.meta.prev_id))}catch(y){u(je(null)),u(we(null)),u(ye(null)),u(be(0)),console.error("Error al obtener registros:",y)}},E=s=>{u(Xe(s.target.value)),u(Re(""))},J=s=>{u(Re(s.target.value))},ee=s=>{u(ke(null)),u(Je(s.target.value))},A=()=>{t!==null&&a!==null&&r!==""&&o!==""&&n!==""&&R({ctrl_id:o,end_date:t,start_date:a,type:n,p_action:"next",limit:p,cursor:d==null?void 0:d.meta.next_id,other_params:q(h)})},Y=()=>{if(t!==null&&a!==null&&r!==""&&o!==""&&n!==""){const s=$===null?C===null?C:C-1:x;R({ctrl_id:o,end_date:t,start_date:a,type:n,p_action:"prev",limit:k===0?v:p,cursor:s,other_params:q(h)})}};T.useEffect(()=>{t!==null&&a!==null&&r!==""&&o!==""&&n!==""&&R({ctrl_id:o,end_date:t,start_date:a,type:n,p_action:"init",limit:p,other_params:q(h)})},[t,a,r,o,n,h]);const{isSuccess:D,data:M}=Ne(),O=T.useMemo(()=>D&&M?ve(M,"region")[r]:null,[r,D]);return T.useEffect(()=>{t!==null&&a!==null&&r!==""&&o!==""&&n!==""&&$!==null&&R({ctrl_id:o,end_date:t,start_date:a,type:n,p_action:"lim",limit:p,cursor:d==null?void 0:d.meta.prev_id,other_params:q(h)})},[p]),e.jsx(_,{sx:{width:"100%",height:"100%",padding:3},children:e.jsxs(Ze,{children:[e.jsx(ut,{sx:{py:.5,"& .MuiCardHeader-action":{m:"0px auto",alignSelf:"center"}},title:e.jsx(Ge,{component:"h5",variant:"h5",children:"Registros"})}),e.jsxs(Qe,{sx:{flex:1,display:"flex",flexDirection:"column",rowGap:.5,overflow:"hidden",pt:.5,"&:last-child":{paddingBottom:.5}},children:[e.jsxs(H,{container:!0,rowSpacing:1,columnSpacing:2,children:[e.jsx(H,{size:{xs:12,sm:6,lg:3},children:e.jsxs(b,{spacing:1,children:[e.jsx(G,{htmlFor:"region-select",children:"Region"}),e.jsx(W,{value:r,placeholder:"select-region",onChange:E,inputProps:{id:"region-select"},children:D&&Object.keys(ve(M,"region")).map(s=>e.jsx(P,{value:s,children:s},s))})]})}),e.jsx(H,{size:{xs:12,sm:6,lg:3},children:e.jsxs(b,{spacing:1,children:[e.jsx(G,{htmlFor:"nodo-select",children:"Nodo"}),e.jsx(W,{disabled:r==="",value:o,placeholder:"select-nodo",onChange:J,inputProps:{id:"nodo-select"},children:O&&O.map(s=>e.jsx(P,{value:s.ctrl_id,children:s.nodo},s.ctrl_id))})]})}),e.jsx(H,{size:{xs:12,sm:6,lg:2},children:e.jsxs(b,{spacing:1,children:[e.jsx(G,{htmlFor:"registro-select",children:"Tipo Registro"}),e.jsx(W,{value:n,placeholder:"select-registro",onChange:ee,inputProps:{id:"registro-select"},children:[{name:"Acceso",value:"acceso"},{name:"Energia",value:"energia"},{name:"Entrada",value:"entrada"},{name:"Estado Camara",value:"estadocamara"},{name:"Micro SD",value:"microsd"},{name:"Peticion",value:"peticion"},{name:"Salida",value:"salida"},{name:"Seguridad",value:"seguridad"},{name:"Temperatura",value:"temperatura"},{name:"Ticket",value:"ticket"}].map(s=>e.jsx(P,{value:s.value,children:s.name},s.value))})]})}),e.jsx(H,{size:{xs:12,sm:6,lg:4},children:e.jsxs(b,{spacing:1,children:[e.jsx(G,{htmlFor:"date-select",children:"Fecha"}),e.jsxs(b,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx($e,{views:["day","month","year","hours"],ampm:!1,format:"DD/MM/YYYY HH",defaultValue:a?Q(a):null,onChange:s=>{s&&u(qe(s.format("YYYY-MM-DD HH:mm:ss")))},slotProps:{textField:{size:"medium",id:"date-select"}}}),e.jsx("span",{children:"-"}),e.jsx($e,{views:["day","month","year","hours"],ampm:!1,format:"DD/MM/YYYY HH",defaultValue:t?Q(t):null,disabled:!a,minDateTime:Q(a).add(1,"hour"),maxDate:Q(a).add(1,"year"),onChange:s=>{s&&u(We(s.format("YYYY-MM-DD HH:mm:ss")))},slotProps:{textField:{size:"medium"}}})]})]})})]}),e.jsx(De,{}),e.jsx(_,{sx:{flex:1,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Pt,{})}),e.jsx(Vt,{handleBackButtonClick:Y,handleNextButtonClick:A})]})]})})};export{Qt as LogsPage,Qt as default};
