import{r as d,e0 as I,j as r,bx as D,B as P,by as k,bz as S,T as n,A as y,bA as V,o as b,dC as G,e1 as F,ab as _}from"./index-Chp53bex.js";import{D as z,G as W,g as B}from"./SearchIcon-CwDUk7Ht.js";const U=({openDialog:j,handleCloseDialog:s,companyName:i,id:f})=>{const[x,v]=d.useState(""),[l,a]=d.useState(""),[u,{isLoading:C}]=I(),p=async()=>{var t;if(a(""),x===i)try{(t=(await u({id:f})).data)!=null&&t.success&&s(),s()}catch(c){a(B(c))}else a("El nombre no coincide. Intenta de nuevo.")};return r.jsxs(D,{open:j,onClose:t=>{t.preventDefault(),t.stopPropagation(),s()},sx:{"& .MuiDialogPaper-root":{borderRadius:"24px !important"}},children:[r.jsx(P,{display:"flex",justifyContent:"center",mt:2,children:r.jsx("img",{src:z,alt:"Eliminar icono",style:{width:48,height:48}})}),r.jsxs(k,{sx:t=>({...t.typography.h5,textAlign:"center",color:t.palette.text.primary}),children:["¿Estás seguro de eliminar a la empresa ",i,"?"]}),r.jsxs(S,{children:[r.jsxs(n,{sx:t=>({...t.typography.body2,textAlign:"center",color:t.palette.text.secondary}),children:["Al eliminar ",i,", también se borrarán los empleados, cuentas y tarjetas asignadas."]}),r.jsxs(n,{sx:t=>({marginTop:2,color:t.palette.text.primary}),children:['Para confirmar, escribe: "',i,'"']}),r.jsx(y,{fullWidth:!0,margin:"dense",variant:"outlined",placeholder:"Escribe el nombre de la empresa",value:x,onChange:t=>{a(""),v(t.target.value),a("")},error:!!l,helperText:l}),l&&r.jsx(W,{item:!0,xs:12,children:r.jsx(n,{variant:"body2",sx:t=>({color:t.palette.error.light}),children:l})})]}),r.jsxs(V,{children:[r.jsx(b,{onClick:s,color:"inherit",sx:{"&:hover":{backgroundColor:t=>t.palette.tertiary.opacityLighter}},children:"Cancelar"}),r.jsx(b,{onClick:p,color:"error",disabled:x!==i||C,variant:"contained",sx:{"&:hover":{backgroundColor:t=>t.palette.error.light},"&:disabled":{backgroundColor:t=>t.palette.action.disabledBackground}},children:"Eliminar"})]})]})},q=({openDialogEdit:j,handleCloseDialogEdit:s,industry:i,description:f,companyName:x,id:v})=>{const[l,a]=d.useState(""),[u,C]=d.useState(i||""),[p,t]=d.useState(f||""),[c,A]=d.useState(x||""),[o,m]=d.useState({name:"",description:"",industry:""}),{data:h,isError:E,isLoading:T}=G(),[L,{isLoading:R}]=F(),M=()=>{const e={name:"",description:"",industry:""};let g=!0;return(!c||c.trim().length<4)&&(e.name="El nombre debe tener al menos 4 caracteres.",g=!1),(!p||p.trim().length<10)&&(e.description="La descripción debe tener al menos 10 caracteres.",g=!1),(!u||Number(u)===0)&&(e.industry="Selecciona un rubro válido.",g=!1),m(e),g},w=async()=>{if(M())try{await L({id:v,data:{contrata:c,descripcion:p,r_id:Number(u)}}).unwrap(),s()}catch(e){a(B(e))}};return r.jsxs(D,{open:j,onClose:s,fullWidth:!0,maxWidth:"sm",sx:{"& .MuiDialogPaper-root":{borderRadius:"24px",padding:2}},onClick:e=>e.stopPropagation(),children:[r.jsx(k,{sx:e=>({...e.typography.h5,textAlign:"start",color:e.palette.text.primary}),children:"Editar empresa"}),r.jsxs(S,{children:[r.jsx(n,{sx:e=>({mt:1,mb:.5,color:e.palette.text.primary,fontWeight:500}),children:"Nombre*"}),r.jsx(y,{fullWidth:!0,variant:"outlined",placeholder:"Nombre de la empresa",value:c,onChange:e=>{a(""),A(e.target.value),m({...o,name:""})},error:!!o.name,helperText:o.name}),r.jsx(n,{sx:e=>({mt:2,mb:.5,color:e.palette.text.primary,fontWeight:500}),children:"Rubro*"}),r.jsx(y,{select:!0,fullWidth:!0,variant:"outlined",value:u,onChange:e=>{a(""),C(e.target.value),m({...o,industry:""})},error:!!o.industry,helperText:o.industry,disabled:T||E,children:h&&!T&&!E&&(h==null?void 0:h.map(e=>r.jsx(_,{value:e.r_id,children:e.rubro},e.r_id)))}),r.jsx(n,{sx:e=>({mt:2,mb:.5,color:e.palette.text.primary,fontWeight:500}),children:"Descripción*"}),r.jsx(y,{fullWidth:!0,variant:"outlined",multiline:!0,minRows:3,placeholder:"Descripción de la empresa",value:p,onChange:e=>{a(""),t(e.target.value),m({...o,description:""})},error:!!o.description,helperText:o.description}),r.jsx(n,{variant:"body2",sx:e=>({mt:2,color:e.palette.text.disabled}),children:"*Campos obligatorios de completar"}),l&&r.jsx(W,{item:!0,xs:12,children:r.jsx(n,{variant:"body2",sx:e=>({color:e.palette.error.light}),children:l})})]}),r.jsxs(V,{sx:{px:3,pb:2},children:[r.jsx(b,{onClick:s,color:"inherit",sx:{textTransform:"none"},children:"Cancelar"}),r.jsx(b,{onClick:w,variant:"contained",disabled:R,sx:{textTransform:"none","&:hover":{backgroundColor:"#00C7E3"}},children:"Guardar cambios"})]})]})};export{U as D,q as E};
