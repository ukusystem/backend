import{J as et,K as tt,s as W,r as c,M as rt,j as e,N as Re,P as ot,Q as st,R as De,U as it,V as nt,b as ye,W as At,X as ue,Y as Et,Z as Lt,_ as Ke,$ as Pt,a0 as It,a1 as xe,a2 as Ot,a3 as Vt,a4 as Xe,a5 as Ht,u as z,a6 as zt,a as R,a7 as I,a8 as Y,B as j,n as ne,l as b,a9 as ge,aa as _e,ab as Ye,ac as $,ad as Bt,T as C,S as K,ae as $t,af as Wt,ag as Ft,ah as Ut,ai as Nt,aj as Zt,p as Gt,f as F,ak as Qt,al as Ae,am as k,an as U,ao as N,ap as Kt,aq as Xt,w as qt,ar as Jt,as as er,at as tr,au as rr,av as or,aw as sr,ax as _}from"./index-CbBpD3cn.js";import{g as se}from"./groupByKey-nGMiMvM1.js";import{M as at}from"./MainSimpleCard-DHeid2ms.js";import{C as lt}from"./CardHeader-BLm126nV.js";import{C as dt}from"./CardContent-CClSqapa.js";import{r as Z,l as S}from"./RegisterFilterPaginationWrapper-BRxiDKyI.js";import"./Card-DQ6wBa5D.js";import"./index-Bj1zx8RH.js";import"./SearchIcon-kyGU267L.js";import"./ListItemButton-9LwEHeOT.js";function ir(t){return tt("MuiCardActions",t)}et("MuiCardActions",["root","spacing"]);const nr=t=>{const{classes:r,disableSpacing:s}=t;return ot({root:["root",!s&&"spacing"]},ir,r)},ar=W("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:s}=t;return[r.root,!s.disableSpacing&&r.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),lr=c.forwardRef(function(r,s){const i=rt({props:r,name:"MuiCardActions"}),{disableSpacing:n=!1,className:a,...p}=i,l={...i,disableSpacing:n},h=nr(l);return e.jsx(ar,{className:Re(h.root,a),ownerState:l,ref:s,...p})});function dr(t){return tt("MuiTooltip",t)}const y=et("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function cr(t){return Math.round(t*1e5)/1e5}const pr=t=>{const{classes:r,disableInteractive:s,arrow:i,touch:n,placement:a}=t,p={popper:["popper",!s&&"popperInteractive",i&&"popperArrow"],tooltip:["tooltip",i&&"tooltipArrow",n&&"touch",`tooltipPlacement${it(a.split("-")[0])}`],arrow:["arrow"]};return ot(p,dr,r)},hr=W(st,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,r)=>{const{ownerState:s}=t;return[r.popper,!s.disableInteractive&&r.popperInteractive,s.arrow&&r.popperArrow,!s.open&&r.popperClose]}})(De(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:r})=>!r.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:r})=>!r,style:{pointerEvents:"none"}},{props:({ownerState:r})=>r.arrow,style:{[`&[data-popper-placement*="bottom"] .${y.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${y.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${y.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${y.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:r})=>r.arrow&&!r.isRtl,style:{[`&[data-popper-placement*="right"] .${y.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:r})=>r.arrow&&!!r.isRtl,style:{[`&[data-popper-placement*="right"] .${y.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:r})=>r.arrow&&!r.isRtl,style:{[`&[data-popper-placement*="left"] .${y.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:r})=>r.arrow&&!!r.isRtl,style:{[`&[data-popper-placement*="left"] .${y.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),ur=W("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,r)=>{const{ownerState:s}=t;return[r.tooltip,s.touch&&r.touch,s.arrow&&r.tooltipArrow,r[`tooltipPlacement${it(s.placement.split("-")[0])}`]]}})(De(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:nt(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${y.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${y.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${y.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${y.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:r})=>r.arrow,style:{position:"relative",margin:0}},{props:({ownerState:r})=>r.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${cr(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:r})=>!r.isRtl,style:{[`.${y.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${y.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:r})=>!r.isRtl&&r.touch,style:{[`.${y.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${y.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:r})=>!!r.isRtl,style:{[`.${y.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${y.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:r})=>!!r.isRtl&&r.touch,style:{[`.${y.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${y.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:r})=>r.touch,style:{[`.${y.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:r})=>r.touch,style:{[`.${y.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),xr=W("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,r)=>r.arrow})(De(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:nt(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let me=!1;const qe=new Vt;let ie={x:0,y:0};function fe(t,r){return(s,...i)=>{r&&r(s,...i),t(s,...i)}}const gr=c.forwardRef(function(r,s){const i=rt({props:r,name:"MuiTooltip"}),{arrow:n=!1,children:a,classes:p,components:l={},componentsProps:h={},describeChild:x=!1,disableFocusListener:o=!1,disableHoverListener:u=!1,disableInteractive:M=!1,disableTouchListener:v=!1,enterDelay:m=100,enterNextDelay:w=0,enterTouchDelay:T=700,followCursor:D=!1,id:d,leaveDelay:f=0,leaveTouchDelay:ct=1500,onClose:Le,onOpen:Pe,open:pt,placement:Ie="bottom",PopperComponent:Oe,PopperProps:O={},slotProps:V={},slots:ht={},title:Q,TransitionComponent:ut,TransitionProps:xt,...Ve}=i,H=c.isValidElement(a)?a:e.jsx("span",{children:a}),He=ye(),gt=At(),[ee,ze]=c.useState(),[Ce,mt]=c.useState(null),ae=c.useRef(!1),be=M||D,Be=ue(),je=ue(),le=ue(),$e=ue(),[ft,We]=Et({controlled:pt,default:!1,name:"Tooltip",state:"open"});let P=ft;const we=Lt(d),te=c.useRef(),de=Ke(()=>{te.current!==void 0&&(document.body.style.WebkitUserSelect=te.current,te.current=void 0),$e.clear()});c.useEffect(()=>de,[de]);const Fe=g=>{qe.clear(),me=!0,We(!0),Pe&&!P&&Pe(g)},ce=Ke(g=>{qe.start(800+f,()=>{me=!1}),We(!1),Le&&P&&Le(g),Be.start(He.transitions.duration.shortest,()=>{ae.current=!1})}),pe=g=>{ae.current&&g.type!=="touchstart"||(ee&&ee.removeAttribute("title"),je.clear(),le.clear(),m||me&&w?je.start(me?w:m,()=>{Fe(g)}):Fe(g))},Se=g=>{je.clear(),le.start(f,()=>{ce(g)})},[,Ue]=c.useState(!1),Ne=g=>{Xe(g.target)||(Ue(!1),Se(g))},Ze=g=>{ee||ze(g.currentTarget),Xe(g.target)&&(Ue(!0),pe(g))},Ge=g=>{ae.current=!0;const L=H.props;L.onTouchStart&&L.onTouchStart(g)},yt=g=>{Ge(g),le.clear(),Be.clear(),de(),te.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",$e.start(T,()=>{document.body.style.WebkitUserSelect=te.current,pe(g)})},Ct=g=>{H.props.onTouchEnd&&H.props.onTouchEnd(g),de(),le.start(ct,()=>{ce(g)})};c.useEffect(()=>{if(!P)return;function g(L){L.key==="Escape"&&ce(L)}return document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}},[ce,P]);const bt=Pt(It(H),ze,s);!Q&&Q!==0&&(P=!1);const ve=c.useRef(),jt=g=>{const L=H.props;L.onMouseMove&&L.onMouseMove(g),ie={x:g.clientX,y:g.clientY},ve.current&&ve.current.update()},re={},Me=typeof Q=="string";x?(re.title=!P&&Me&&!u?Q:null,re["aria-describedby"]=P?we:null):(re["aria-label"]=Me?Q:null,re["aria-labelledby"]=P&&!Me?we:null);const A={...re,...Ve,...H.props,className:Re(Ve.className,H.props.className),onTouchStart:Ge,ref:bt,...D?{onMouseMove:jt}:{}},oe={};v||(A.onTouchStart=yt,A.onTouchEnd=Ct),u||(A.onMouseOver=fe(pe,A.onMouseOver),A.onMouseLeave=fe(Se,A.onMouseLeave),be||(oe.onMouseOver=pe,oe.onMouseLeave=Se)),o||(A.onFocus=fe(Ze,A.onFocus),A.onBlur=fe(Ne,A.onBlur),be||(oe.onFocus=Ze,oe.onBlur=Ne));const B={...i,isRtl:gt,arrow:n,disableInteractive:be,placement:Ie,PopperComponentProp:Oe,touch:ae.current},E=typeof V.popper=="function"?V.popper(B):V.popper,wt=c.useMemo(()=>{var L,Qe;let g=[{name:"arrow",enabled:!!Ce,options:{element:Ce,padding:4}}];return(L=O.popperOptions)!=null&&L.modifiers&&(g=g.concat(O.popperOptions.modifiers)),(Qe=E==null?void 0:E.popperOptions)!=null&&Qe.modifiers&&(g=g.concat(E.popperOptions.modifiers)),{...O.popperOptions,...E==null?void 0:E.popperOptions,modifiers:g}},[Ce,O.popperOptions,E==null?void 0:E.popperOptions]),Te=pr(B),St=typeof V.transition=="function"?V.transition(B):V.transition,he={slots:{popper:l.Popper,transition:l.Transition??ut,tooltip:l.Tooltip,arrow:l.Arrow,...ht},slotProps:{arrow:V.arrow??h.arrow,popper:{...O,...E??h.popper},tooltip:V.tooltip??h.tooltip,transition:{...xt,...St??h.transition}}},[vt,Mt]=xe("popper",{elementType:hr,externalForwardedProps:he,ownerState:B,className:Re(Te.popper,O==null?void 0:O.className)}),[Tt,_t]=xe("transition",{elementType:Ot,externalForwardedProps:he,ownerState:B}),[Yt,kt]=xe("tooltip",{elementType:ur,className:Te.tooltip,externalForwardedProps:he,ownerState:B}),[Rt,Dt]=xe("arrow",{elementType:xr,className:Te.arrow,externalForwardedProps:he,ownerState:B,ref:mt});return e.jsxs(c.Fragment,{children:[c.cloneElement(H,A),e.jsx(vt,{as:Oe??st,placement:Ie,anchorEl:D?{getBoundingClientRect:()=>({top:ie.y,left:ie.x,right:ie.x,bottom:ie.y,width:0,height:0})}:ee,popperRef:ve,open:ee?P:!1,id:we,transition:!0,...oe,...Mt,popperOptions:wt,children:({TransitionProps:g})=>e.jsx(Tt,{timeout:He.transitions.duration.shorter,...g,..._t,children:e.jsxs(Yt,{...kt,children:[Q,n?e.jsx(Rt,{...Dt}):null]})})})]})}),ke=W(Ht)(({theme:t})=>({borderRadius:10,width:"100%",backgroundColor:t.palette.tertiary.opacityDark,"&.Mui-focused":{outline:"none",border:"none",boxShadow:"none"},"&.MuiOutlinedInput-root":{color:t.palette.text.primary,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"},fontWeight:500},"& .MuiSelect-icon":{color:t.palette.text.primary}})),mr=()=>{const t=z(),{isSuccess:r,data:s}=zt(),{period_time:i,ctrl_id:n,date:a,rgn_id:p}=R(o=>o.dashboardStore),l=o=>{t(I({rgn_id:o.target.value,ctrl_id:void 0}))},h=o=>{t(I({ctrl_id:o.target.value}))},x=o=>{t(I({period_time:o.target.value}))};return c.useEffect(()=>{if(r){const o=s[0];o!==void 0&&n===void 0&&t(I({rgn_id:o.rgn_id,ctrl_id:o.ctrl_id}))}},[r,s]),c.useEffect(()=>{t(I({date:Y().format("YYYY-MM")}))},[]),e.jsxs(e.Fragment,{children:[e.jsx(j,{sx:{width:"100%"},children:e.jsx(ne,{sx:{maxWidth:"100%",height:"100%"},children:e.jsxs(b,{direction:"row",spacing:1,paddingBottom:1.5,children:[e.jsxs(b,{spacing:1,width:200,children:[e.jsx(ge,{htmlFor:"group_site",sx:{display:"none"},children:"Grupo de sitio"}),e.jsxs(ke,{displayEmpty:!0,value:p??"",onChange:l,inputProps:{id:"group_site"},renderValue:o=>{if(o.length===0)return e.jsx(e.Fragment,{children:"Grupo de sitio"});let u;return r&&(u=se(s,"rgn_id")[o]?se(s,"rgn_id")[o][0]:void 0),e.jsx(e.Fragment,{children:u==null?void 0:u.region.region})},IconComponent:({...o})=>p!==void 0?e.jsx(_e,{onClick:u=>{u.stopPropagation(),t(I({rgn_id:void 0,ctrl_id:void 0}))}}):e.jsx(Ye,{...o}),sx:{width:200},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx($,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Grupo de sitio"})}),r&&Object.entries(se(s,"rgn_id")).map(([o,u])=>e.jsx($,{value:o,children:e.jsx(j,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},children:u[0].region.region})},o))]})]}),e.jsxs(b,{spacing:1,width:200,children:[e.jsx(ge,{htmlFor:"site_item",sx:{display:"none"},children:"Sitio"}),e.jsxs(ke,{disabled:p===void 0,displayEmpty:!0,value:n??"",onChange:h,inputProps:{id:"site_item"},renderValue:o=>{if(o.length===0)return e.jsx(e.Fragment,{children:"Sitio"});let u;return r&&(u=s.find(M=>String(M.ctrl_id)===String(o))),e.jsx(e.Fragment,{children:u==null?void 0:u.nodo})},IconComponent:({...o})=>n!==void 0?e.jsx(_e,{onClick:u=>{u.stopPropagation(),t(I({ctrl_id:void 0}))}}):e.jsx(Ye,{...o}),sx:{width:200},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx($,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Sitio"})}),r&&p!==void 0&&se(s,"rgn_id")[p]&&se(s,"rgn_id")[p].map(o=>e.jsx($,{value:String(o.ctrl_id),children:e.jsx(j,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},children:o.nodo})},String(o.ctrl_id)))]})]}),e.jsxs(b,{spacing:1,width:200,children:[e.jsx(ge,{htmlFor:"period_time",sx:{display:"none"},children:"Periodo"}),e.jsxs(ke,{displayEmpty:!0,value:i??"",onChange:x,inputProps:{id:"period_time"},renderValue:o=>o.length===0?e.jsx(e.Fragment,{children:"Mes o año"}):e.jsx(e.Fragment,{children:o==="monthly"?"Mes":o==="anualy"?"Año":"No controlado"}),IconComponent:({...o})=>i!==void 0?e.jsx(_e,{onClick:u=>{u.stopPropagation(),t(I({period_time:void 0}))}}):e.jsx(Ye,{...o}),sx:{width:200},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx($,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Mes o año"})}),e.jsx($,{value:"monthly",children:"Mes"},"monthly"),e.jsx($,{value:"anualy",children:"Año"},"anualy")]})]}),e.jsxs(b,{spacing:1,width:200,children:[e.jsx(ge,{htmlFor:"date-select-dashboard",sx:{display:"none"},children:"Fecha"}),e.jsx(Bt,{disabled:i===void 0,views:i==="anualy"?["year"]:["month","year"],format:i==="anualy"?"YYYY":"MMMM YYYY",value:a?Y(a,"YYYY-MM"):Y(),onChange:o=>{o&&t(I({date:o.format("YYYY-MM")}))},slotProps:{textField:{size:"medium",id:"date-select-dashboard",sx:o=>({borderRadius:"10px",backgroundColor:o.palette.tertiary.opacityDark,"& .MuiInputBase-root.MuiOutlinedInput-root":{fontWeight:500,color:o.palette.text.primary,border:"none","& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"},boxShadow:"none"},"& .MuiInputBase-input":{minWidth:120}})}}})]})]})})}),e.jsx(C,{variant:"body1",color:"textSecondary",children:"Primero, selecciona un grupo"})]})},X=({title:t,icon:r,descripcion:s,counter:i,containerSx:n})=>e.jsxs(at,{sx:n,children:[e.jsx(lt,{sx:{p:1},title:e.jsx(C,{variant:"subtitle1",children:t})}),e.jsx(dt,{sx:{padding:1,"&:last-child":{paddingBottom:1}},children:e.jsxs(b,{spacing:1,children:[e.jsxs(b,{direction:"row",alignItems:"center",spacing:2,children:[r,i]}),e.jsx(C,{variant:"body1",children:s})]})})]}),q=W(j)(({theme:t})=>({padding:"4px",width:32,height:32,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"8px",backgroundColor:t.palette.tertiary.opacityDarker})),J=W(({children:t,sx:r,...s})=>e.jsx(C,{...s,variant:"h4",sx:{width:"100%",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",...r},children:t}))(({theme:t})=>({color:t.palette.text.primary})),fr=({...t})=>e.jsx(K,{...t,viewBox:"0 0 24 24",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_7079_12950",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{x:"3.05176e-05",y:"1.52588e-05",width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_7079_12950)",children:e.jsx("path",{d:"M4.00003 19H20V17H4.00003V19ZM8.00003 13H10V10C10 9.45002 10.1959 8.97918 10.5875 8.58752C10.9792 8.19585 11.45 8.00002 12 8.00002V6.00002C10.9 6.00002 9.95836 6.39168 9.17503 7.17502C8.3917 7.95835 8.00003 8.90002 8.00003 10V13ZM7.00003 15H17V10C17 8.61668 16.5125 7.43752 15.5375 6.46252C14.5625 5.48752 13.3834 5.00002 12 5.00002C10.6167 5.00002 9.43753 5.48752 8.46253 6.46252C7.48753 7.43752 7.00003 8.61668 7.00003 10V15ZM2.00003 21V15H5.00003V10C5.00003 8.05002 5.6792 6.39585 7.03753 5.03752C8.39586 3.67918 10.05 3.00002 12 3.00002C13.95 3.00002 15.6042 3.67918 16.9625 5.03752C18.3209 6.39585 19 8.05002 19 10V15H22V21H2.00003Z",fill:"currentColor"})})]})}),yr=()=>{const{ctrl_id:t,date:r,period_time:s}=R(o=>o.dashboardStore),[i,{isError:n,isLoading:a,isSuccess:p,data:l}]=$t(),[h,x]=c.useState(0);return c.useEffect(()=>{t!==void 0&&r!==null&&s!==void 0&&i({ctrl_id:Number(t),date:r,monthly:s==="monthly"?"true":"false"})},[t,r,s]),c.useEffect(()=>{!a&&p&&l&&x(l.data.total),!a&&n&&x(0)},[p,l,a,n]),e.jsx(X,{title:"Alarmas",descripcion:"Modo armado",counter:e.jsx(J,{sx:o=>({color:o.palette.error.main}),children:h}),icon:e.jsx(q,{sx:o=>({backgroundColor:o.palette.error.opacityDarker}),children:e.jsx(fr,{sx:o=>({color:o.palette.text.error,width:24,height:"auto"})})}),containerSx:{":hover":{backgroundColor:"error.opacityLighter",boxShadow:"0px 2px 6px 0px rgba(241, 44, 44, 0.30)"}}})},Cr=({...t})=>e.jsx(K,{...t,viewBox:"0 0 24 24",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("mask",{id:"mask0_2564_17943",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2564_17943)",children:e.jsx("path",{d:"M10.4748 22C10.0081 22 9.57064 21.9 9.1623 21.7C8.75397 21.5 8.40814 21.2167 8.1248 20.85L2.6748 13.925L3.1498 13.425C3.48314 13.075 3.88314 12.8667 4.3498 12.8C4.81647 12.7333 5.2498 12.825 5.6498 13.075L7.4998 14.2V6C7.4998 5.71667 7.59564 5.47917 7.7873 5.2875C7.97897 5.09583 8.21647 5 8.4998 5C8.78314 5 9.02481 5.09583 9.2248 5.2875C9.4248 5.47917 9.5248 5.71667 9.5248 6V17.8L7.0998 16.3L9.6998 19.625C9.7998 19.7417 9.91647 19.8333 10.0498 19.9C10.1831 19.9667 10.3248 20 10.4748 20H15.9998C16.5498 20 17.0206 19.8042 17.4123 19.4125C17.804 19.0208 17.9998 18.55 17.9998 18V14C17.9998 13.7167 17.904 13.4792 17.7123 13.2875C17.5206 13.0958 17.2831 13 16.9998 13H11.5248V11H16.9998C17.8331 11 18.5415 11.2917 19.1248 11.875C19.7081 12.4583 19.9998 13.1667 19.9998 14V18C19.9998 19.1 19.6081 20.0417 18.8248 20.825C18.0415 21.6083 17.0998 22 15.9998 22H10.4748ZM4.1748 8.5C3.95814 8.13333 3.79147 7.7375 3.6748 7.3125C3.55814 6.8875 3.4998 6.45 3.4998 6C3.4998 4.61667 3.9873 3.4375 4.9623 2.4625C5.9373 1.4875 7.11647 1 8.4998 1C8.9498 1 9.38314 1.05417 9.7998 1.1625C10.2165 1.27083 10.6081 1.43333 10.9748 1.65C11.7581 2.08333 12.3748 2.69167 12.8248 3.475C13.2748 4.25833 13.4998 5.1 13.4998 6C13.4998 6.45 13.4415 6.8875 13.3248 7.3125C13.2081 7.7375 13.0415 8.13333 12.8248 8.5L11.0998 7.5C11.2331 7.26667 11.3331 7.02917 11.3998 6.7875C11.4665 6.54583 11.4998 6.28333 11.4998 6C11.4998 5.46667 11.3623 4.96667 11.0873 4.5C10.8123 4.03333 10.4415 3.66667 9.9748 3.4C9.75814 3.26667 9.5248 3.16667 9.2748 3.1C9.0248 3.03333 8.76647 3 8.4998 3C7.66647 3 6.95814 3.29167 6.3748 3.875C5.79147 4.45833 5.4998 5.16667 5.4998 6C5.4998 6.28333 5.53314 6.54583 5.5998 6.7875C5.66647 7.02917 5.76647 7.26667 5.8998 7.5L4.1748 8.5ZM13.9748 3.4L14.9748 1.65C15.7581 2.08333 16.3748 2.69167 16.8248 3.475C17.2748 4.25833 17.4998 5.1 17.4998 6C17.4998 6.45 17.4415 6.8875 17.3248 7.3125C17.2081 7.7375 17.0415 8.13333 16.8248 8.5L15.0998 7.5C15.2331 7.26667 15.3331 7.02917 15.3998 6.7875C15.4665 6.54583 15.4998 6.28333 15.4998 6C15.4998 5.46667 15.3623 4.96667 15.0873 4.5C14.8123 4.03333 14.4415 3.66667 13.9748 3.4Z",fill:"currentColor"})})]})}),br=()=>{const{ctrl_id:t,date:r,period_time:s}=R(o=>o.dashboardStore),[i,{isError:n,isLoading:a,isSuccess:p,data:l}]=Wt(),[h,x]=c.useState(0);return c.useEffect(()=>{t!==void 0&&r!==null&&s!==void 0&&i({ctrl_id:Number(t),date:r,monthly:s==="monthly"?"true":"false"})},[t,r,s]),c.useEffect(()=>{!a&&p&&l&&x(l.data.total),!a&&n&&x(0)},[p,l,a,n]),e.jsx(X,{title:"Controles",descripcion:"Movimientos",counter:e.jsx(J,{children:h}),icon:e.jsx(q,{children:e.jsx(Cr,{sx:o=>({color:o.palette.text.tertiary,width:24,height:"auto"})})}),containerSx:{":hover":{backgroundColor:"tertiary.opacityLighter",boxShadow:"0px 1px 6px 0px rgba(42, 55, 60, 0.10)"}}})},jr=({...t})=>e.jsx(K,{...t,viewBox:"0 0 24 24",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("mask",{id:"mask0_2564_17922",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2564_17922)",children:e.jsx("path",{d:"M11.9951 16.1998C12.2486 16.1998 12.4629 16.1141 12.6379 15.9426C12.8129 15.7711 12.9004 15.5586 12.9004 15.3051C12.9004 15.0516 12.8146 14.8373 12.6431 14.6623C12.4716 14.4873 12.2591 14.3998 12.0056 14.3998C11.7521 14.3998 11.5379 14.4856 11.3629 14.6571C11.1879 14.8286 11.1004 15.0411 11.1004 15.2946C11.1004 15.5481 11.1861 15.7623 11.3576 15.9373C11.5291 16.1123 11.7416 16.1998 11.9951 16.1998ZM11.9951 12.8998C12.2486 12.8998 12.4629 12.8141 12.6379 12.6426C12.8129 12.4711 12.9004 12.2586 12.9004 12.0051C12.9004 11.7516 12.8146 11.5373 12.6431 11.3623C12.4716 11.1873 12.2591 11.0998 12.0056 11.0998C11.7521 11.0998 11.5379 11.1856 11.3629 11.3571C11.1879 11.5286 11.1004 11.7411 11.1004 11.9946C11.1004 12.2481 11.1861 12.4623 11.3576 12.6373C11.5291 12.8123 11.7416 12.8998 11.9951 12.8998ZM11.9951 9.59981C12.2486 9.59981 12.4629 9.51406 12.6379 9.34256C12.8129 9.17106 12.9004 8.95856 12.9004 8.70506C12.9004 8.45156 12.8146 8.23731 12.6431 8.06231C12.4716 7.88731 12.2591 7.79981 12.0056 7.79981C11.7521 7.79981 11.5379 7.88555 11.3629 8.05705C11.1879 8.22855 11.1004 8.44105 11.1004 8.69455C11.1004 8.94805 11.1861 9.16231 11.3576 9.33731C11.5291 9.51231 11.7416 9.59981 11.9951 9.59981ZM2.40039 19.1998V13.7998C2.89539 13.7998 3.31914 13.6231 3.67164 13.2696C4.02414 12.9161 4.20039 12.4911 4.20039 11.9946C4.20039 11.4981 4.02414 11.0737 3.67164 10.7216C3.31914 10.3696 2.89539 10.1936 2.40039 10.1936V4.7998H21.6004V10.1998C21.1054 10.1998 20.6816 10.3766 20.3291 10.7301C19.9766 11.0836 19.8004 11.5086 19.8004 12.0051C19.8004 12.5016 19.9766 12.9259 20.3291 13.2781C20.6816 13.6301 21.1054 13.8061 21.6004 13.8061V19.1998H2.40039ZM4.20039 17.3998H19.8004V15.1248C19.2671 14.8081 18.8337 14.3748 18.5004 13.8248C18.1671 13.2748 18.0004 12.6665 18.0004 11.9998C18.0004 11.3331 18.1671 10.7248 18.5004 10.1748C18.8337 9.62481 19.2671 9.19147 19.8004 8.87481V6.5998H4.20039V8.87481C4.73372 9.19147 5.16706 9.62481 5.50039 10.1748C5.83372 10.7248 6.00039 11.3331 6.00039 11.9998C6.00039 12.6665 5.83372 13.2748 5.50039 13.8248C5.16706 14.3748 4.73372 14.8081 4.20039 15.1248V17.3998Z",fill:"currentColor"})})]})}),wr=()=>{const{ctrl_id:t,date:r,period_time:s}=R(o=>o.dashboardStore),[i,{isError:n,isLoading:a,isSuccess:p,data:l}]=Ft(),[h,x]=c.useState(0);return c.useEffect(()=>{t!==void 0&&r!==null&&s!==void 0&&i({ctrl_id:Number(t),date:r,monthly:s==="monthly"?"true":"false"})},[t,r,s]),c.useEffect(()=>{!a&&p&&l&&x(l.data.total),!a&&n&&x(0)},[p,l,a,n]),e.jsx(X,{title:"Tickets",descripcion:"Recibidos",counter:e.jsx(J,{children:h}),icon:e.jsx(q,{children:e.jsx(jr,{sx:o=>({color:o.palette.text.tertiary,width:24,height:"auto"})})}),containerSx:{":hover":{backgroundColor:"tertiary.opacityLighter",boxShadow:"0px 1px 6px 0px rgba(42, 55, 60, 0.10)"}}})},Sr=({...t})=>e.jsx(K,{...t,viewBox:"0 0 24 24",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_7117_42804",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{x:"3.05176e-05",y:"1.52588e-05",width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_7117_42804)",children:e.jsx("path",{d:"M14 13H19V11H14V13ZM14 10H19V8.00002H14V10ZM5.00003 16H13V15.45C13 14.7 12.6334 14.1042 11.9 13.6625C11.1667 13.2208 10.2 13 9.00003 13C7.80003 13 6.83336 13.2208 6.10003 13.6625C5.3667 14.1042 5.00003 14.7 5.00003 15.45V16ZM9.00003 12C9.55003 12 10.0209 11.8042 10.4125 11.4125C10.8042 11.0208 11 10.55 11 10C11 9.45002 10.8042 8.97918 10.4125 8.58752C10.0209 8.19585 9.55003 8.00002 9.00003 8.00002C8.45003 8.00002 7.9792 8.19585 7.58753 8.58752C7.19586 8.97918 7.00003 9.45002 7.00003 10C7.00003 10.55 7.19586 11.0208 7.58753 11.4125C7.9792 11.8042 8.45003 12 9.00003 12ZM2.00003 20V4.00002H22V20H2.00003ZM4.00003 18H20V6.00002H4.00003V18Z",fill:"currentColor"})})]})}),vr=()=>{const{ctrl_id:t,date:r,period_time:s}=R(o=>o.dashboardStore),[i,{isError:n,isLoading:a,isSuccess:p,data:l}]=Ut(),[h,x]=c.useState(0);return c.useEffect(()=>{t!==void 0&&r!==null&&s!==void 0&&i()},[t,r,s]),c.useEffect(()=>{!a&&p&&l&&x(l.data.total),!a&&n&&x(0)},[p,l,a,n]),e.jsx(X,{title:"Tarjetas",descripcion:"Asignadas",counter:e.jsx(J,{children:h}),icon:e.jsx(q,{children:e.jsx(Sr,{sx:o=>({color:o.palette.text.tertiary,width:24,height:"auto"})})}),containerSx:{":hover":{backgroundColor:"tertiary.opacityLighter",boxShadow:"0px 1px 6px 0px rgba(42, 55, 60, 0.10)"}}})},Mr=({...t})=>e.jsx(K,{...t,viewBox:"0 0 25 24",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",children:[e.jsx("mask",{id:"mask0_7117_20872",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"25",height:"24",children:e.jsx("rect",{x:"0.333374",y:"1.52588e-05",width:"24",height:"24",fill:"#FDDDDD"})}),e.jsx("g",{mask:"url(#mask0_7117_20872)",children:e.jsx("path",{d:"M17.3334 11V8.00002H14.3334V6.00002H17.3334V3.00002H19.3334V6.00002H22.3334V8.00002H19.3334V11H17.3334ZM8.33337 21C6.95004 21 5.77087 20.5125 4.79587 19.5375C3.82087 18.5625 3.33337 17.3833 3.33337 16C3.33337 15.2 3.50837 14.4542 3.85837 13.7625C4.20837 13.0708 4.70004 12.4833 5.33337 12V6.00002C5.33337 5.16668 5.62504 4.45835 6.20837 3.87502C6.79171 3.29168 7.50004 3.00002 8.33337 3.00002C9.16671 3.00002 9.87504 3.29168 10.4584 3.87502C11.0417 4.45835 11.3334 5.16668 11.3334 6.00002V12C11.9667 12.4833 12.4584 13.0708 12.8084 13.7625C13.1584 14.4542 13.3334 15.2 13.3334 16C13.3334 17.3833 12.8459 18.5625 11.8709 19.5375C10.8959 20.5125 9.71671 21 8.33337 21ZM7.33337 10H9.33337V6.00002C9.33337 5.71668 9.23754 5.47918 9.04587 5.28752C8.85421 5.09585 8.61671 5.00002 8.33337 5.00002C8.05004 5.00002 7.81254 5.09585 7.62087 5.28752C7.42921 5.47918 7.33337 5.71668 7.33337 6.00002V10Z",fill:"currentColor"})})]})}),Tr=()=>{const{ctrl_id:t,date:r,period_time:s}=R(o=>o.dashboardStore),[i,{isError:n,isLoading:a,isSuccess:p,data:l}]=Nt(),[h,x]=c.useState(0);return c.useEffect(()=>{t!==void 0&&r!==null&&s!==void 0&&i({ctrl_id:Number(t),date:r,monthly:s==="monthly"?"true":"false"})},[t,r,s]),c.useEffect(()=>{!a&&p&&l&&x(l.data.max),!a&&n&&x(0)},[p,l,a,n]),e.jsx(X,{title:"Temperatura",descripcion:"Grado máximo",counter:e.jsxs(J,{sx:o=>({color:o.palette.error.main}),children:[h,"°"]}),icon:e.jsx(q,{sx:o=>({backgroundColor:o.palette.error.opacityDarker}),children:e.jsx(Mr,{sx:o=>({color:o.palette.text.error,width:24,height:"auto"})})}),containerSx:{":hover":{backgroundColor:"error.opacityLighter",boxShadow:"0px 2px 6px 0px rgba(241, 44, 44, 0.30)"}}})},_r=({...t})=>e.jsx(K,{...t,viewBox:"0 0 24 24",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("mask",{id:"mask0_2564_17976",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2564_17976)",children:e.jsx("path",{d:"M10.9248 17.7749L15.4998 11.9999H11.7748L12.4248 6.4749L8.09981 13.1999H11.7498L10.9248 17.7749ZM8.39981 21.5999L9.59981 14.9999H4.7998L12.8998 2.3999H14.6998L13.7998 10.1999H19.1998L10.1998 21.5999H8.39981Z",fill:"currentColor"})})]})}),Yr=()=>{const{ctrl_id:t,date:r,period_time:s}=R(o=>o.dashboardStore),[i,{isError:n,isLoading:a,isSuccess:p,data:l}]=Zt(),[h,x]=c.useState(0);return c.useEffect(()=>{t!==void 0&&r!==null&&s!==void 0&&i({ctrl_id:Number(t),date:r,monthly:s==="monthly"?"true":"false"})},[t,r,s]),c.useEffect(()=>{!a&&p&&l&&x(l.data.total),!a&&n&&x(0)},[p,l,a,n]),e.jsx(X,{title:"Energía",descripcion:"Consumo",counter:e.jsxs(J,{children:[h.toFixed(2)," kWh"]}),icon:e.jsx(q,{sx:o=>({backgroundColor:o.palette.warning.opacityDarker}),children:e.jsx(_r,{sx:o=>({color:o.palette.text.warning,width:24,height:"auto"})})}),containerSx:{":hover":{backgroundColor:"warning.opacityLighter",boxShadow:" 0px 2px 6px 0px rgba(241, 225, 44, 0.30)"}}})};function Ee(t,r,s){const i=[],n=[];return t.length>0?(t.forEach(a=>{a[r]&&a[s]&&(i.push(a[r]),n.push(a[s]))}),{categories:i,series:n}):{categories:i,series:n}}const G=({children:t,subTitle:r,title:s,onClickSeeRegister:i,paginationAction:n})=>e.jsxs(at,{children:[e.jsx(lt,{sx:{p:1},title:s?e.jsx(C,{variant:"subtitle1",color:"textPrimary",children:s}):void 0,subheader:r?e.jsx(C,{variant:"body1",color:"textSecondary",children:r}):void 0}),e.jsx(dt,{sx:{padding:1,"&:last-child":{paddingBottom:1},height:"100%",display:"flex",flexDirection:"column"},children:t}),n,e.jsx(lr,{disableSpacing:!0,sx:{padding:1,justifyContent:"end"},children:e.jsx(Gt,{variant:"text",color:"tertiary",size:"medium",onClick:i,children:"Ver en registro"})})]}),kr=()=>{const t=ye(),r=t.palette.mode,s=F(),i=z(),[n,a]=c.useState({configs:{chart:{type:"bar",toolbar:{show:!1}},plotOptions:{bar:{borderRadius:4,borderRadiusApplication:"around",borderRadiusWhenStacked:"all",barHeight:25,horizontal:!0,dataLabels:{position:"top"},distributed:!0}},dataLabels:{enabled:!0,offsetX:-15},grid:{show:!0},yaxis:{labels:{style:{cssClass:"apexcharts-yaxis-label",colors:t.palette.text.primary,fontFamily:"Roboto, sans-serif",fontSize:"0.75rem"},align:"center",minWidth:0,maxWidth:50},max:d=>d+1},xaxis:{axisBorder:{show:!0},axisTicks:{show:!0},categories:[],labels:{style:{cssClass:"apexcharts-xaxis-label",colors:t.palette.text.primary,fontFamily:"Roboto, sans-serif",fontSize:"0.75rem",fontWeight:400}}},tooltip:{enabled:!1},legend:{show:!1}}}),[p,l]=c.useState([]),{rgn_id:h,ctrl_id:x,date:o,period_time:u}=R(d=>d.dashboardStore),[M,{isError:v,isLoading:m,isSuccess:w,data:T}]=Qt(),D=()=>{const d=Z.find(f=>String(f.value)===k.Entrada);h!==void 0&&x!==void 0&&o!==null&&u!==void 0&&(i(U(k.Entrada)),i(N({register_type_name:d==null?void 0:d.name,rgn_id:String(h),ctrl_id:String(x),startDate:Y(o,"YYYY-MM").startOf(u==="monthly"?"month":"year").format("DD/MM/YYYY"),startTime:S[0].value,endDate:Y(o,"YYYY-MM").endOf(u==="monthly"?"month":"year").format("DD/MM/YYYY"),endTime:S[S.length-1].value}))),s("/register")};return c.useEffect(()=>{a(d=>{const f=t.palette.text.primary;return{configs:{...d.configs,chart:{...d.configs.chart,background:t.palette.background.paper},xaxis:{...d.configs.xaxis,labels:{...d.configs.xaxis?d.configs.xaxis.labels:{},style:{...d.configs.xaxis&&d.configs.xaxis.labels?d.configs.xaxis.labels.style:{},colors:f,cssClass:"apexcharts-xaxis-label"}}},yaxis:{...d.configs.yaxis,labels:{style:{colors:f,cssClass:"apexcharts-yaxis-label"}}}}}})},[r]),c.useEffect(()=>{x!==void 0&&o!==null&&u!==void 0&&M({ctrl_id:Number(x),date:o,monthly:u==="monthly"?"true":"false"})},[x,o,u]),c.useEffect(()=>{if(!m&&w&&T){const d=Ee(T,"detector","total_activo");a(f=>({configs:{...f.configs,xaxis:{...f.configs.xaxis,categories:d.categories}}})),l([{data:d.series,name:"activaciones"}])}!m&&v&&(a(d=>({configs:{...d.configs,xaxis:{...d.configs.xaxis,categories:[]}}})),l([]))},[w,T,m,v]),e.jsx(G,{title:"Alarmas",subTitle:"Activaciones de ambos modos",onClickSeeRegister:D,children:e.jsx(Ae,{options:n.configs,series:p,type:"bar",width:"100%",height:300})})},Rr=()=>{const t=ye(),r=t.palette.mode,s=F(),i=z(),[n,a]=c.useState({configs:{chart:{type:"bar",toolbar:{show:!1}},plotOptions:{bar:{borderRadius:4,borderRadiusApplication:"around",borderRadiusWhenStacked:"all",barHeight:25,horizontal:!0,dataLabels:{position:"top"},distributed:!0}},dataLabels:{enabled:!0,offsetX:-15},grid:{show:!0},yaxis:{labels:{style:{cssClass:"apexcharts-yaxis-label",colors:t.palette.text.primary,fontFamily:"Roboto, sans-serif",fontSize:"0.75rem"},align:"center",minWidth:0,maxWidth:50},max:d=>d+1},xaxis:{axisBorder:{show:!0},axisTicks:{show:!0},categories:[],labels:{style:{cssClass:"apexcharts-xaxis-label",colors:t.palette.text.primary,fontFamily:"'Roboto', sans-serif",fontSize:"0.75rem",fontWeight:400}}},tooltip:{enabled:!1},legend:{show:!1}}}),[p,l]=c.useState([]),{rgn_id:h,ctrl_id:x,date:o,period_time:u}=R(d=>d.dashboardStore),[M,{isError:v,isLoading:m,isSuccess:w,data:T}]=Kt(),D=()=>{const d=Z.find(f=>String(f.value)===k.Salida);h!==void 0&&x!==void 0&&o!==null&&u!==void 0&&(i(U(k.Salida)),i(N({register_type_name:d==null?void 0:d.name,rgn_id:String(h),ctrl_id:String(x),startDate:Y(o,"YYYY-MM").startOf(u==="monthly"?"month":"year").format("DD/MM/YYYY"),startTime:S[0].value,endDate:Y(o,"YYYY-MM").endOf(u==="monthly"?"month":"year").format("DD/MM/YYYY"),endTime:S[S.length-1].value}))),s("/register")};return c.useEffect(()=>{a(d=>{const f=t.palette.text.primary;return{configs:{...d.configs,chart:{...d.configs.chart,background:t.palette.background.paper},xaxis:{...d.configs.xaxis,labels:{...d.configs.xaxis?d.configs.xaxis.labels:{},style:{...d.configs.xaxis&&d.configs.xaxis.labels?d.configs.xaxis.labels.style:{},colors:f,cssClass:"apexcharts-xaxis-label"}}},yaxis:{...d.configs.yaxis,labels:{style:{colors:f,cssClass:"apexcharts-yaxis-label"}}}}}})},[r]),c.useEffect(()=>{x!==void 0&&o!==null&&u!==void 0&&M({ctrl_id:Number(x),date:o,monthly:u==="monthly"?"true":"false"})},[x,o,u]),c.useEffect(()=>{if(!m&&w&&T){const d=Ee(T,"actuador","total_activo");a(f=>({configs:{...f.configs,xaxis:{...f.configs.xaxis,categories:d.categories}}})),l([{data:d.series,name:"activaciones"}])}!m&&v&&(a(d=>({configs:{...d.configs,xaxis:{...d.configs.xaxis,categories:[]}}})),l([]))},[w,T,m,v]),e.jsx(G,{title:"Controles",onClickSeeRegister:D,children:e.jsx(Ae,{options:n.configs,series:p,type:"bar",width:"100%",height:300})})},Dr=()=>{const t=ye(),r=t.palette.mode,s=F(),i=z(),{rgn_id:n,ctrl_id:a,date:p,period_time:l}=R(d=>d.dashboardStore),[h,x]=c.useState({configs:{series:[],chart:{type:"donut"},plotOptions:{pie:{donut:{labels:{show:!0,total:{label:void 0,showAlways:!0,show:!0},value:{color:t.palette.text.primary,fontSize:"30px",fontFamily:"Roboto, sans-serif",fontWeight:500}}}}},labels:[],dataLabels:{enabled:!1},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{show:!1}}}],legend:{position:"bottom",offsetY:0,height:50,fontSize:"12px",fontFamily:"Roboto, sans-serif",fontWeight:400,labels:{colors:t.palette.text.primary}}}}),[o,u]=c.useState([]),[M,{isError:v,isLoading:m,isSuccess:w,data:T}]=Xt(),D=()=>{const d=Z.find(f=>String(f.value)===k.Ticket);n!==void 0&&a!==void 0&&p!==null&&l!==void 0&&(i(U(k.Ticket)),i(N({register_type_name:d==null?void 0:d.name,rgn_id:String(n),ctrl_id:String(a),startDate:Y(p,"YYYY-MM").startOf(l==="monthly"?"month":"year").format("DD/MM/YYYY"),startTime:S[0].value,endDate:Y(p,"YYYY-MM").endOf(l==="monthly"?"month":"year").format("DD/MM/YYYY"),endTime:S[S.length-1].value}))),s("/register")};return c.useEffect(()=>{x(d=>{const f=t.palette.text.primary;return{configs:{...d.configs,plotOptions:{pie:{donut:{labels:{show:!0,total:{label:void 0,showAlways:!0,show:!0},value:{color:f,fontSize:"30px",fontFamily:"Roboto, sans-serif",fontWeight:500}}}}},legend:{...d.configs.legend,labels:{colors:f}}}}})},[r]),c.useEffect(()=>{a!==void 0&&p!==null&&l!==void 0&&M({ctrl_id:Number(a),date:p,monthly:l==="monthly"?"true":"false"})},[a,p,l]),c.useEffect(()=>{if(!m&&w&&T){const d=Ee(T.data,"contrata","total_ticket");u(d.series),x(f=>({configs:{...f.configs,labels:d.categories}}))}!m&&v&&u([])},[w,T,m,v,l]),e.jsx(e.Fragment,{children:e.jsx(G,{title:"Tickets",subTitle:"Culminado en estado aceptado y asistido",onClickSeeRegister:D,children:e.jsx(Ae,{options:h.configs,series:o,type:"donut",width:"100%",height:300})})})},Ar=({foto:t,apellido:r,nombre:s,serie:i})=>{const[n,a]=c.useState(t?`${qt}/${encodeURIComponent(t)}`:void 0),p=()=>{a(er)};return e.jsx(e.Fragment,{children:e.jsxs(b,{direction:"row",spacing:1.25,alignItems:"center",sx:l=>({border:`1px solid ${l.palette.divider}`,padding:1.5,borderRadius:3,boxShadow:"0px 1px 6px 0px rgba(42, 55, 60, 0.10)"}),children:[e.jsx(Jt,{alt:"profile_user_card",src:n,slotProps:{img:{onError:p}},sx:{width:60,height:60}}),e.jsxs(b,{sx:{width:"100%",overflow:"hidden"},children:[e.jsxs(C,{variant:"subtitle1",color:"textPrimary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:[s," ",r]}),e.jsx(C,{variant:"subtitle2",color:"textSecondary",sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:i})]})]})})},Er=({page:t,total:r,handleChangePage:s,rowsPerPage:i})=>e.jsxs(b,{spacing:1,direction:"row",alignItems:"center",justifyContent:"end",sx:{backgroundColor:"custom.trackBackground"},children:[e.jsx(C,{color:"textPrimary",variant:"subtitle2",children:`${r>0?t*i+1:0} - ${(t+1)*i<r?(t+1)*i:r} de ${r}`}),e.jsx(tr,{count:r,onPageChange:s,rowsPerPage:i,page:t})]}),Lr=()=>{const[t,r]=c.useState(0),[s]=c.useState(5),i=F(),n=z(),{rgn_id:a,ctrl_id:p,date:l,period_time:h}=R(d=>d.dashboardStore),[x,{isError:o,isLoading:u,isSuccess:M,data:v}]=rr(),m=()=>{const d=Z.find(f=>String(f.value)===k.Acceso);a!==void 0&&p!==void 0&&l!==null&&h!==void 0&&(n(U(k.Acceso)),n(N({register_type_name:d==null?void 0:d.name,rgn_id:String(a),ctrl_id:String(p),startDate:Y(l,"YYYY-MM").startOf(h==="monthly"?"month":"year").format("DD/MM/YYYY"),startTime:S[0].value,endDate:Y(l,"YYYY-MM").endOf(h==="monthly"?"month":"year").format("DD/MM/YYYY"),endTime:S[S.length-1].value}))),i("/register")},w=(d,f)=>{r(f)},[T,D]=c.useState([]);return c.useEffect(()=>{!u&&M&&v&&D(v.data),!u&&o&&D([])},[M,v,u,o]),c.useEffect(()=>{p!==void 0&&l!==null&&h!==void 0&&x({limit:s,offset:t*s,ctrl_id:Number(p),date:l,monthly:h==="monthly"?"true":"false"})},[t,s,p,l,h]),e.jsx(G,{title:"Tarjetas",paginationAction:M&&v&&T.length>0&&e.jsx(Er,{handleChangePage:w,page:t,rowsPerPage:s,total:v.meta.totalCount}),onClickSeeRegister:m,children:e.jsx(j,{sx:{flexGrow:1,width:"100%",height:300,overflow:"hidden"},children:e.jsx(ne,{sx:{width:"100%",height:"100%"},children:e.jsx(b,{spacing:1,paddingRight:1.5,paddingBottom:1,children:T.map((d,f)=>e.jsx(Ar,{nombre:d.nombre,apellido:d.apellido,serie:d.serie,foto:d.foto},f))})})})})},Pr=({total_noregistrado:t,total_registrado:r,total_remoto:s})=>{const i=r+t+s;return e.jsxs(j,{sx:{display:"flex",height:52,"& > *":{padding:"10px 4px",textAlign:"start"},"& > :first-of-type":{borderTopLeftRadius:"0.5rem",borderBottomLeftRadius:"0.5rem"},"& > :last-of-type":{borderTopRightRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}},children:[e.jsx(j,{component:"div",sx:n=>({backgroundColor:n.palette.info[400],flexGrow:i>0?s/i:1,color:n.palette.common.white}),children:e.jsx(C,{variant:"h4",children:s})}),e.jsx(j,{component:"div",sx:n=>({backgroundColor:n.palette.success[400],flexGrow:i>0?r/i:1,color:n.palette.text.textButton}),children:e.jsx(C,{variant:"h4",children:r})}),e.jsx(j,{component:"div",sx:n=>({backgroundColor:n.palette.error[400],flexGrow:i>0?t/i:1,color:n.palette.text.textButton}),children:e.jsx(C,{variant:"h4",children:t})})]})},Ir=()=>{const t=e.jsx(j,{sx:{width:12,height:12}});return e.jsxs(b,{alignItems:"start",spacing:2,children:[e.jsxs(b,{spacing:.5,children:[e.jsxs(b,{spacing:.5,direction:"row",alignItems:"center",children:[e.jsx(j,{sx:r=>({width:12,height:12,borderRadius:"50%",backgroundColor:r.palette.info[400]})}),e.jsx(C,{variant:"subtitle2",color:"textPrimary",children:"Remoto"})]}),e.jsxs(b,{spacing:.5,direction:"row",alignItems:"center",children:[t,e.jsx(C,{variant:"body2",color:"textSecondary",children:"Dieron acceso por medio del sistema"})]})]}),e.jsxs(b,{spacing:.5,children:[e.jsxs(b,{spacing:.5,direction:"row",alignItems:"center",children:[e.jsx(j,{sx:r=>({width:12,height:12,borderRadius:"50%",backgroundColor:r.palette.success[400]})}),e.jsx(C,{variant:"subtitle2",color:"textPrimary",children:"Autorizado"})]}),e.jsxs(b,{spacing:.5,direction:"row",alignItems:"center",children:[t,e.jsx(C,{variant:"body2",color:"textSecondary",children:"Solicitaron ticket para acceder al sitio"})]})]}),e.jsxs(b,{spacing:.5,children:[e.jsxs(b,{spacing:.5,direction:"row",alignItems:"center",children:[e.jsx(j,{sx:r=>({width:12,height:12,borderRadius:"50%",backgroundColor:r.palette.error[400]})}),e.jsx(C,{variant:"subtitle2",color:"textPrimary",children:"Denegado"})]}),e.jsxs(b,{spacing:.5,direction:"row",alignItems:"center",children:[t,e.jsx(C,{variant:"body2",color:"textSecondary",children:"Intentaron ingresar sin un ticket autorizado"})]})]})]})},Or=()=>{const t=F(),r=z(),{rgn_id:s,ctrl_id:i,date:n,period_time:a}=R(m=>m.dashboardStore),[p,{isError:l,isLoading:h,isSuccess:x,data:o}]=or(),[u,M]=c.useState({total_noregistrado:0,total_registrado:0,total_remoto:0}),v=()=>{const m=Z.find(w=>String(w.value)===k.Acceso);s!==void 0&&i!==void 0&&n!==null&&a!==void 0&&(r(U(k.Acceso)),r(N({register_type_name:m==null?void 0:m.name,rgn_id:String(s),ctrl_id:String(i),startDate:Y(n,"YYYY-MM").startOf(a==="monthly"?"month":"year").format("DD/MM/YYYY"),startTime:S[0].value,endDate:Y(n,"YYYY-MM").endOf(a==="monthly"?"month":"year").format("DD/MM/YYYY"),endTime:S[S.length-1].value}))),t("/register")};return c.useEffect(()=>{i!==void 0&&n!==null&&a!==void 0&&p({ctrl_id:Number(i),date:n,monthly:a==="monthly"?"true":"false"})},[i,n,a]),c.useEffect(()=>{!h&&x&&o&&M({total_noregistrado:o.data.tarjeta.total_noregistrado,total_registrado:o.data.tarjeta.total_registrado,total_remoto:o.data.remoto.total_remoto}),!h&&l&&M({total_noregistrado:0,total_registrado:0,total_remoto:0})},[x,o,h,l,a]),e.jsx(G,{title:"Accesos",onClickSeeRegister:v,children:e.jsxs(j,{sx:{flexGrow:1,width:"100%",display:"flex",flexDirection:"column",rowGap:4},children:[e.jsx(Pr,{total_noregistrado:u.total_noregistrado,total_registrado:u.total_registrado,total_remoto:u.total_remoto}),e.jsx(Ir,{})]})})},Je=({text:t,variant:r,color:s,placement:i})=>{const n=c.useRef(null),[a,p]=c.useState(!1);return c.useEffect(()=>{const l=()=>{n.current&&p(n.current.scrollWidth>n.current.clientWidth)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[t]),e.jsx(gr,{title:t,disableHoverListener:!a,placement:i,slotProps:{popper:{sx:{[`&.${y.popper}[data-popper-placement*="bottom"] .${y.tooltip}`]:{marginTop:"0px"},[`&.${y.popper}[data-popper-placement*="top"] .${y.tooltip}`]:{marginBottom:"0px"},[`&.${y.popper}[data-popper-placement*="right"] .${y.tooltip}`]:{marginLeft:"0px"},[`&.${y.popper}[data-popper-placement*="left"] .${y.tooltip}`]:{marginRight:"0px"}}}},children:e.jsx(C,{ref:n,variant:r,color:s,sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",textAlign:"center"},children:t})})},Vr=({description:t,value:r})=>e.jsxs(b,{spacing:1,alignItems:"center",justifyContent:"center",width:"100%",children:[e.jsx(Je,{text:t,variant:"subtitle2",color:"textPrimary",placement:"top"}),e.jsx(Je,{text:`${r}°`,variant:"subtitle2",color:"textPrimary",placement:"top"})]}),Hr=({max:t,value:r,description:s})=>{const i=Math.max(0,Math.min(r,t)),n=t>0?i/t:0;return e.jsxs(b,{spacing:2,width:68,alignItems:"center",justifyContent:"center",p:1,children:[e.jsx(j,{role:"progressbar","aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":t,sx:{height:140,width:14,borderRadius:"4px",backgroundColor:"action.selected",display:"flex",flexDirection:"column",justifyContent:"flex-end",overflow:"hidden",position:"relative"},children:e.jsx(j,{sx:{width:"100%",borderRadius:"4px",backgroundColor:r>25?"error.light":"tertiary.light",height:`${n*100}%`,transition:"height 0.3s ease-in-out"}})}),e.jsx(Vr,{description:s,value:r})]})},zr=()=>{const t=F(),r=z(),{rgn_id:s,ctrl_id:i,date:n,period_time:a}=R(m=>m.dashboardStore),[p,{isError:l,isLoading:h,isSuccess:x,data:o}]=sr(),[u,M]=c.useState([]),v=()=>{const m=Z.find(w=>String(w.value)===k.Temperatura);s!==void 0&&i!==void 0&&n!==null&&a!==void 0&&(r(U(k.Temperatura)),r(N({register_type_name:m==null?void 0:m.name,rgn_id:String(s),ctrl_id:String(i),startDate:Y(n,"YYYY-MM").startOf(a==="monthly"?"month":"year").format("DD/MM/YYYY"),startTime:S[0].value,endDate:Y(n,"YYYY-MM").endOf(a==="monthly"?"month":"year").format("DD/MM/YYYY"),endTime:S[S.length-1].value}))),t("/register")};return c.useEffect(()=>{i!==void 0&&n!==null&&a!==void 0&&p({ctrl_id:Number(i),date:n,monthly:a==="monthly"?"true":"false"})},[i,n,a]),c.useEffect(()=>{if(!h&&x&&o){const m=Br(o.data),w=Object.values(m).map(T=>({description:T[0].ubicacion,max:100,value:T[0].max_valor}));M(w)}!h&&l&&M([])},[x,o,h,l]),e.jsx(G,{title:"Temperatura",subTitle:"Grado máximo",onClickSeeRegister:v,children:e.jsx(j,{sx:{height:230,width:"100%"},children:e.jsx(ne,{sx:{width:"100%",height:"100%","& .simplebar-content":{width:"100%",height:"100%",display:"flex",placeItems:"center",justifyContent:"center"}},children:u.map((m,w)=>e.jsx(Hr,{description:m.description,value:m.value,max:m.max},w))})})})};function Br(t){const r={};return t.forEach(s=>{r[s.st_id]||(r[s.st_id]=[]),r[s.st_id].push(s)}),r}const $r=({description:t,data:r})=>e.jsxs(b,{spacing:1,width:"100%",children:[e.jsx(C,{variant:"subtitle1",color:"textPrimary",children:t}),e.jsxs(j,{sx:s=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",borderRadius:2,border:`1px solid ${s.palette.divider}`}),children:[e.jsxs(j,{sx:{display:"flex",width:"100%",backgroundColor:"action.hover",px:2,py:1,borderTopLeftRadius:8,borderTopRightRadius:8,textAlign:"start",color:"text.primary"},children:[e.jsx(C,{variant:"subtitle2",sx:{width:"25%"},children:"AMP(A)"}),e.jsx(C,{variant:"subtitle2",sx:{width:"25%"},children:"VOLT(V)"}),e.jsx(C,{variant:"subtitle2",sx:{width:"25%"},children:"POT(W)"}),e.jsx(C,{variant:"subtitle2",sx:{width:"25%"},children:"KWH"})]}),e.jsxs(j,{sx:{display:"flex",width:"100%",px:2,py:1,borderBottomLeftRadius:8,borderBottomRightRadius:8,textAlign:"start",color:"text.secondary"},children:[e.jsx(C,{variant:"subtitle2",sx:{width:"25%"},children:r.amp}),e.jsx(C,{variant:"subtitle2",sx:{width:"25%"},children:r.volt}),e.jsx(C,{variant:"subtitle2",sx:{width:"25%"},children:r.pot}),e.jsx(C,{variant:"subtitle2",sx:{width:"25%"},children:r.kwh})]})]})]}),Wr=[{description:"Módulo 1",data:{amp:10,volt:200,pot:40,kwh:5}},{description:"Módulo 2",data:{amp:15,volt:220,pot:50,kwh:7}},{description:"Módulo 3",data:{amp:8,volt:210,pot:35,kwh:4}}],Fr=()=>{const t=F(),r=z(),{rgn_id:s,ctrl_id:i,date:n,period_time:a}=R(l=>l.dashboardStore),p=()=>{const l=Z.find(h=>String(h.value)===k.Energia);s!==void 0&&i!==void 0&&n!==null&&a!==void 0&&(r(U(k.Energia)),r(N({register_type_name:l==null?void 0:l.name,rgn_id:String(s),ctrl_id:String(i),startDate:Y(n,"YYYY-MM").startOf(a==="monthly"?"month":"year").format("DD/MM/YYYY"),startTime:S[0].value,endDate:Y(n,"YYYY-MM").endOf(a==="monthly"?"month":"year").format("DD/MM/YYYY"),endTime:S[S.length-1].value}))),t("/register")};return e.jsx(G,{title:"Energía (Falta)",subTitle:"Consumo promedio por módulo",onClickSeeRegister:p,children:e.jsx(j,{sx:{width:"100%",height:230},children:e.jsx(ne,{sx:{width:"100%",height:"100%","& .simplebar-content":{width:"100%",height:"100%",display:"flex",flexDirection:"column"}},children:e.jsx(b,{spacing:2,paddingRight:1.5,paddingBottom:1,children:Wr.map((l,h)=>e.jsx($r,{description:l.description,data:l.data},h))})})})})},to=()=>e.jsx(j,{sx:{width:"100%",height:"100%",overflow:"hidden"},children:e.jsx(ne,{sx:{maxWidth:"100%",maxHeight:"100%","& .simplebar-content":{width:"100%",height:"100%"}},children:e.jsxs(_,{container:!0,rowSpacing:4.5,columnSpacing:2.75,sx:{p:{xs:2,sm:3}},maxWidth:1600,width:"100%",mx:"auto",children:[e.jsx(_,{size:{xs:12},sx:{mb:-2.25},children:e.jsx(C,{variant:"h5",children:"Panel General"})}),e.jsx(_,{size:{xs:12},children:e.jsx(mr,{})}),e.jsxs(_,{container:!0,size:{xs:12},children:[e.jsx(_,{size:{xs:12,sm:6,md:4,lg:3,xl:2},children:e.jsx(yr,{})}),e.jsx(_,{size:{xs:12,sm:6,md:4,lg:3,xl:2},children:e.jsx(br,{})}),e.jsx(_,{size:{xs:12,sm:6,md:4,lg:3,xl:2},children:e.jsx(wr,{})}),e.jsx(_,{size:{xs:12,sm:6,md:4,lg:3,xl:2},children:e.jsx(vr,{})}),e.jsx(_,{size:{xs:12,sm:6,md:4,lg:6,xl:2},children:e.jsx(Tr,{})}),e.jsx(_,{size:{xs:12,sm:6,md:4,lg:6,xl:2},children:e.jsx(Yr,{})})]}),e.jsx(_,{size:{xs:12,lg:6},children:e.jsx(kr,{})}),e.jsx(_,{size:{xs:12,lg:6},children:e.jsx(Rr,{})}),e.jsx(_,{size:{xs:12,lg:4},children:e.jsx(Dr,{})}),e.jsx(_,{size:{xs:12,lg:4},children:e.jsx(Lr,{})}),e.jsx(_,{size:{xs:12,lg:4},children:e.jsx(Or,{})}),e.jsx(_,{size:{xs:12,lg:6},children:e.jsx(zr,{})}),e.jsx(_,{size:{xs:12,lg:6},children:e.jsx(Fr,{})})]})})});export{to as default};
