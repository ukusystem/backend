import{a as $e,g as Ae,s as _,r as u,b as ze,j as e,e as ne,f as Ee,n as M,aB as Ft,c as U,aP as F,aQ as B,aR as x,aS as Ye,u as Ot,l as he,aT as Ve,au as xe,B as C,Y as k,Z as D,H as T,h as E,q as Y,ab as oe,ac as pe,ap as Lt,ah as He,ai as se,I,aU as ae,aV as Ne,aL as Ue,M as ie,N as le,aW as X,aX as A,aY as $t,aZ as At,A as S,S as zt,P as ee,G as j,D as fe,a_ as Et,a$ as Be,p as Yt,v as Vt,w as Ht,x as Nt,z as Ut,C as Bt,b0 as qt,b1 as Pe,b2 as Gt,b3 as Me,b4 as Wt,b5 as Qt}from"./index-9bd1da2a.js";import{C as re}from"./CardHeader-84ffc792.js";import{D as Kt}from"./Divider-e5407c8e.js";import{A as O}from"./Alert-61a9387e.js";import{u as Xt,s as qe,a as Ge,b as q,c as We,v as ge,P as Qe,d as Ke,e as Xe,f as Ze,g as Zt,h as be,i as Je,j as et,k as tt,l as L,m as G,r as je,n as ot,o as Jt,p as st,q as Re,t as H,C as eo,w as ce,x as de,y as rt,z as t,A as ue,B as nt,D as at,E as to,F as oo,G as Q,H as K,I as Ie,J as so,K as Fe,L as it,M as ro,N as no,O as me}from"./date-time-utils-45556b4c.js";import{T as lt}from"./TextField-a883b24b.js";import{T as ct,t as dt,L as ao}from"./LimitedTextDisplay-3e8491d7.js";import{S as io}from"./StreamPlayer-568f22bc.js";import{d as lo,a as co}from"./LastPage-9b22ebd0.js";import{d as uo,a as po,g as ut}from"./getFormattedDateTime-a73f566b.js";import{S as ve}from"./Select-97d3f45d.js";import{M as z}from"./MenuItem-a1adfdc7.js";import{S as pt}from"./ServerError-9b260039.js";import{S as mo}from"./StateIndicatorIcon-59bef608.js";import{b as mt,a as ht,f as xt,c as Ce,d as N,T as y,e as ye}from"./PaperTable-379db512.js";import{d as ho}from"./DownloadRounded-91a2894a.js";import{_ as xo}from"./react-apexcharts.min-7c73ad2f.js";import{D as fo,a as go,b as bo}from"./DialogContent-512bdb02.js";import{D as jo}from"./DialogTitle-40f885de.js";import{S as vo}from"./Send-42dff462.js";import{B as Oe}from"./InputLabel-9c0bbf31.js";import{M as Co}from"./Link-be23578a.js";import{F as yo}from"./FormControl-a04c9603.js";import"./InputAdornment-deee92f1.js";import"./Chip-dd1b7b0c.js";function wo(s){return $e("MuiCardActions",s)}Ae("MuiCardActions",["root","spacing"]);const So=s=>{const{classes:o,disableSpacing:i}=s;return Ee({root:["root",!i&&"spacing"]},wo,o)},To=_("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:i}=s;return[o.root,!i.disableSpacing&&o.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Do=u.forwardRef(function(o,i){const r=ze({props:o,name:"MuiCardActions"}),{disableSpacing:n=!1,className:a,...c}=r,p={...r,disableSpacing:n},d=So(p);return e.jsx(To,{className:ne(d.root,a),ownerState:p,ref:i,...c})}),ft=Do;function _o(s){return $e("MuiDialogContentText",s)}Ae("MuiDialogContentText",["root"]);const ko=s=>{const{classes:o}=s,r=Ee({root:["root"]},_o,o);return{...o,...r}},Po=_(M,{shouldForwardProp:s=>Ft(s)||s==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(s,o)=>o.root})({}),Mo=u.forwardRef(function(o,i){const r=ze({props:o,name:"MuiDialogContentText"}),{children:n,className:a,...c}=r,p=ko(c);return e.jsx(Po,{component:"p",variant:"body1",color:"textSecondary",ref:i,ownerState:c,className:ne(p.root,a),...r,classes:p})}),Ro=Mo,Io=U([e.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),e.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAlt"),Fo=U(e.jsx("path",{d:"M16.59 9H15V4c0-.55-.45-1-1-1h-4c-.55 0-1 .45-1 1v5H7.41c-.89 0-1.34 1.08-.71 1.71l4.59 4.59c.39.39 1.02.39 1.41 0l4.59-4.59c.63-.63.19-1.71-.7-1.71M5 19c0 .55.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1H6c-.55 0-1 .45-1 1"}),"DownloadRounded"),Oo=U(e.jsx("path",{d:"m15.96 10.29-2.75 3.54-1.96-2.36L8.5 15h11zM3 5H1v16c0 1.1.9 2 2 2h16v-2H3zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2m0 16H7V3h14z"}),"Filter"),Lo=U(e.jsx("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"}),"Timeline"),$o=U(e.jsx("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8 12.5v-9l6 4.5z"}),"VideoLibrary"),Ao=U(e.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11z"}),"Videocam"),zo=s=>{const o=Xt(s),{forwardedProps:i,internalProps:r}=qe(o,"date");return Ge({forwardedProps:i,internalProps:r,valueManager:q,fieldValueManager:We,validator:ge,valueType:"date"})},Eo=["slots","slotProps","InputProps","inputProps"],gt=u.forwardRef(function(o,i){const r=F({props:o,name:"MuiDateField"}),{slots:n,slotProps:a,InputProps:c,inputProps:p}=r,d=B(r,Eo),l=r,m=(n==null?void 0:n.textField)??(o.enableAccessibleFieldDOMStructure?Qe:lt),h=Ke({elementType:m,externalSlotProps:a==null?void 0:a.textField,externalForwardedProps:d,additionalProps:{ref:i},ownerState:l});h.inputProps=x({},p,h.inputProps),h.InputProps=x({},c,h.InputProps);const f=zo(h),g=Xe(f),b=Ze(x({},g,{slots:n,slotProps:a}));return e.jsx(m,x({},b))}),Yo=s=>{const o=Zt(s),{forwardedProps:i,internalProps:r}=qe(o,"time");return Ge({forwardedProps:i,internalProps:r,valueManager:q,fieldValueManager:We,validator:be,valueType:"time"})},Vo=["slots","slotProps","InputProps","inputProps"],bt=u.forwardRef(function(o,i){const r=F({props:o,name:"MuiTimeField"}),{slots:n,slotProps:a,InputProps:c,inputProps:p}=r,d=B(r,Vo),l=r,m=(n==null?void 0:n.textField)??(o.enableAccessibleFieldDOMStructure?Qe:lt),h=Ke({elementType:m,externalSlotProps:a==null?void 0:a.textField,externalForwardedProps:d,ownerState:l,additionalProps:{ref:i}});h.inputProps=x({},p,h.inputProps),h.InputProps=x({},c,h.InputProps);const f=Yo(h),g=Xe(f),b=Ze(x({},g,{slots:n,slotProps:a}));return e.jsx(m,x({},b))});function Ho(s){return Je("MuiDatePickerToolbar",s)}et("MuiDatePickerToolbar",["root","title"]);const No=["value","isLandscape","onChange","toolbarFormat","toolbarPlaceholder","views","className","onViewChange","view"],Uo=s=>{const{classes:o}=s;return ot({root:["root"],title:["title"]},Ho,o)},Bo=_(tt,{name:"MuiDatePickerToolbar",slot:"Root",overridesResolver:(s,o)=>o.root})({}),qo=_(M,{name:"MuiDatePickerToolbar",slot:"Title",overridesResolver:(s,o)=>o.title})({variants:[{props:{isLandscape:!0},style:{margin:"auto 16px auto auto"}}]}),Go=u.forwardRef(function(o,i){const r=F({props:o,name:"MuiDatePickerToolbar"}),{value:n,isLandscape:a,toolbarFormat:c,toolbarPlaceholder:p="––",views:d,className:l}=r,m=B(r,No),h=L(),f=G(),g=Uo(r),b=u.useMemo(()=>{if(!n)return p;const v=je(h,{format:c,views:d},!0);return h.formatByString(n,v)},[n,c,p,h,d]),w=r;return e.jsx(Bo,x({ref:i,toolbarTitle:f.datePickerToolbarTitle,isLandscape:a,className:ne(g.root,l)},m,{children:e.jsx(qo,{variant:"h4",align:a?"left":"center",ownerState:w,className:g.title,children:b})}))});function jt(s,o){const i=L(),r=Jt(),n=F({props:s,name:o}),a=u.useMemo(()=>{var c;return((c=n.localeText)==null?void 0:c.toolbarTitle)==null?n.localeText:x({},n.localeText,{datePickerToolbarTitle:n.localeText.toolbarTitle})},[n.localeText]);return x({},n,{localeText:a},st({views:n.views,openTo:n.openTo,defaultViews:["year","day"],defaultOpenTo:"day"}),{disableFuture:n.disableFuture??!1,disablePast:n.disablePast??!1,minDate:Re(i,n.minDate,r.minDate),maxDate:Re(i,n.maxDate,r.maxDate),slots:x({toolbar:Go},n.slots)})}const vt=u.forwardRef(function(o,i){var l,m;const r=G(),n=L(),a=jt(o,"MuiDesktopDatePicker"),c=x({day:H,month:H,year:H},a.viewRenderers),p=x({},a,{viewRenderers:c,format:je(n,a,!1),yearsPerRow:a.yearsPerRow??4,slots:x({openPickerIcon:eo,field:gt},a.slots),slotProps:x({},a.slotProps,{field:h=>{var f;return x({},ce((f=a.slotProps)==null?void 0:f.field,h),de(a),{ref:i})},toolbar:x({hidden:!0},(l=a.slotProps)==null?void 0:l.toolbar)})}),{renderPicker:d}=rt({props:p,valueManager:q,valueType:"date",getOpenDialogAriaText:((m=p.localeText)==null?void 0:m.openDatePickerDialogue)??r.openDatePickerDialogue,validator:ge});return d()});vt.propTypes={autoFocus:t.bool,className:t.string,closeOnSelect:t.bool,dayOfWeekFormatter:t.func,defaultValue:t.object,disabled:t.bool,disableFuture:t.bool,disableHighlightToday:t.bool,disableOpenPicker:t.bool,disablePast:t.bool,displayWeekNumber:t.bool,enableAccessibleFieldDOMStructure:t.any,fixedWeekNumber:t.number,format:t.string,formatDensity:t.oneOf(["dense","spacious"]),inputRef:ue,label:t.node,loading:t.bool,localeText:t.object,maxDate:t.object,minDate:t.object,monthsPerRow:t.oneOf([3,4]),name:t.string,onAccept:t.func,onChange:t.func,onClose:t.func,onError:t.func,onMonthChange:t.func,onOpen:t.func,onSelectedSectionsChange:t.func,onViewChange:t.func,onYearChange:t.func,open:t.bool,openTo:t.oneOf(["day","month","year"]),orientation:t.oneOf(["landscape","portrait"]),readOnly:t.bool,reduceAnimations:t.bool,referenceDate:t.object,renderLoading:t.func,selectedSections:t.oneOfType([t.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),t.number]),shouldDisableDate:t.func,shouldDisableMonth:t.func,shouldDisableYear:t.func,showDaysOutsideCurrentMonth:t.bool,slotProps:t.object,slots:t.object,sx:t.oneOfType([t.arrayOf(t.oneOfType([t.func,t.object,t.bool])),t.func,t.object]),timezone:t.string,value:t.object,view:t.oneOf(["day","month","year"]),viewRenderers:t.shape({day:t.func,month:t.func,year:t.func}),views:t.arrayOf(t.oneOf(["day","month","year"]).isRequired),yearsPerRow:t.oneOf([3,4])};const Ct=u.forwardRef(function(o,i){var l,m;const r=G(),n=L(),a=jt(o,"MuiMobileDatePicker"),c=x({day:H,month:H,year:H},a.viewRenderers),p=x({},a,{viewRenderers:c,format:je(n,a,!1),slots:x({field:gt},a.slots),slotProps:x({},a.slotProps,{field:h=>{var f;return x({},ce((f=a.slotProps)==null?void 0:f.field,h),de(a),{ref:i})},toolbar:x({hidden:!1},(l=a.slotProps)==null?void 0:l.toolbar)})}),{renderPicker:d}=nt({props:p,valueManager:q,valueType:"date",getOpenDialogAriaText:((m=p.localeText)==null?void 0:m.openDatePickerDialogue)??r.openDatePickerDialogue,validator:ge});return d()});Ct.propTypes={autoFocus:t.bool,className:t.string,closeOnSelect:t.bool,dayOfWeekFormatter:t.func,defaultValue:t.object,disabled:t.bool,disableFuture:t.bool,disableHighlightToday:t.bool,disableOpenPicker:t.bool,disablePast:t.bool,displayWeekNumber:t.bool,enableAccessibleFieldDOMStructure:t.any,fixedWeekNumber:t.number,format:t.string,formatDensity:t.oneOf(["dense","spacious"]),inputRef:ue,label:t.node,loading:t.bool,localeText:t.object,maxDate:t.object,minDate:t.object,monthsPerRow:t.oneOf([3,4]),name:t.string,onAccept:t.func,onChange:t.func,onClose:t.func,onError:t.func,onMonthChange:t.func,onOpen:t.func,onSelectedSectionsChange:t.func,onViewChange:t.func,onYearChange:t.func,open:t.bool,openTo:t.oneOf(["day","month","year"]),orientation:t.oneOf(["landscape","portrait"]),readOnly:t.bool,reduceAnimations:t.bool,referenceDate:t.object,renderLoading:t.func,selectedSections:t.oneOfType([t.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),t.number]),shouldDisableDate:t.func,shouldDisableMonth:t.func,shouldDisableYear:t.func,showDaysOutsideCurrentMonth:t.bool,slotProps:t.object,slots:t.object,sx:t.oneOfType([t.arrayOf(t.oneOfType([t.func,t.object,t.bool])),t.func,t.object]),timezone:t.string,value:t.object,view:t.oneOf(["day","month","year"]),viewRenderers:t.shape({day:t.func,month:t.func,year:t.func}),views:t.arrayOf(t.oneOf(["day","month","year"]).isRequired),yearsPerRow:t.oneOf([3,4])};const Wo=["desktopModeMediaQuery"],yt=u.forwardRef(function(o,i){const r=F({props:o,name:"MuiDatePicker"}),{desktopModeMediaQuery:n=at}=r,a=B(r,Wo);return Ye(n,{defaultMatches:!0})?e.jsx(vt,x({ref:i},a)):e.jsx(Ct,x({ref:i},a))});function Qo(s){return Je("MuiTimePickerToolbar",s)}const Z=et("MuiTimePickerToolbar",["root","separator","hourMinuteLabel","hourMinuteLabelLandscape","hourMinuteLabelReverse","ampmSelection","ampmLandscape","ampmLabel"]),Ko=["ampm","ampmInClock","value","isLandscape","onChange","view","onViewChange","views","disabled","readOnly","className"],Xo=s=>{const{isLandscape:o,classes:i,isRtl:r}=s;return ot({root:["root"],separator:["separator"],hourMinuteLabel:["hourMinuteLabel",o&&"hourMinuteLabelLandscape",r&&"hourMinuteLabelReverse"],ampmSelection:["ampmSelection",o&&"ampmLandscape"],ampmLabel:["ampmLabel"]},Qo,i)},Zo=_(tt,{name:"MuiTimePickerToolbar",slot:"Root",overridesResolver:(s,o)=>o.root})({}),Jo=_(to,{name:"MuiTimePickerToolbar",slot:"Separator",overridesResolver:(s,o)=>o.separator})({outline:0,margin:"0 4px 0 2px",cursor:"default"}),es=_("div",{name:"MuiTimePickerToolbar",slot:"HourMinuteLabel",overridesResolver:(s,o)=>[{[`&.${Z.hourMinuteLabelLandscape}`]:o.hourMinuteLabelLandscape,[`&.${Z.hourMinuteLabelReverse}`]:o.hourMinuteLabelReverse},o.hourMinuteLabel]})({display:"flex",justifyContent:"flex-end",alignItems:"flex-end",variants:[{props:{isRtl:!0},style:{flexDirection:"row-reverse"}},{props:{isLandscape:!0},style:{marginTop:"auto"}}]}),ts=_("div",{name:"MuiTimePickerToolbar",slot:"AmPmSelection",overridesResolver:(s,o)=>[{[`.${Z.ampmLabel}`]:o.ampmLabel},{[`&.${Z.ampmLandscape}`]:o.ampmLandscape},o.ampmSelection]})({display:"flex",flexDirection:"column",marginRight:"auto",marginLeft:12,[`& .${Z.ampmLabel}`]:{fontSize:17},variants:[{props:{isLandscape:!0},style:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",flexBasis:"100%"}}]});function os(s){const o=F({props:s,name:"MuiTimePickerToolbar"}),{ampm:i,ampmInClock:r,value:n,isLandscape:a,onChange:c,view:p,onViewChange:d,views:l,disabled:m,readOnly:h,className:f}=o,g=B(o,Ko),b=L(),w=G(),v=Ot(),V=!!(i&&!r&&l.includes("hours")),{meridiemMode:$,handleMeridiemChange:W}=oo(n,i,c),te=ke=>i?b.format(ke,"hours12h"):b.format(ke,"hours24h"),R=x({},o,{isRtl:v}),P=Xo(R),_e=e.jsx(Jo,{tabIndex:-1,value:":",variant:"h3",selected:!1,className:P.separator});return e.jsxs(Zo,x({landscapeDirection:"row",toolbarTitle:w.timePickerToolbarTitle,isLandscape:a,ownerState:R,className:ne(P.root,f)},g,{children:[e.jsxs(es,{className:P.hourMinuteLabel,ownerState:R,children:[Q(l,"hours")&&e.jsx(K,{tabIndex:-1,variant:"h3",onClick:()=>d("hours"),selected:p==="hours",value:n?te(n):"--"}),Q(l,["hours","minutes"])&&_e,Q(l,"minutes")&&e.jsx(K,{tabIndex:-1,variant:"h3",onClick:()=>d("minutes"),selected:p==="minutes",value:n?b.format(n,"minutes"):"--"}),Q(l,["minutes","seconds"])&&_e,Q(l,"seconds")&&e.jsx(K,{variant:"h3",onClick:()=>d("seconds"),selected:p==="seconds",value:n?b.format(n,"seconds"):"--"})]}),V&&e.jsxs(ts,{className:P.ampmSelection,ownerState:R,children:[e.jsx(K,{disableRipple:!0,variant:"subtitle2",selected:$==="am",typographyClassName:P.ampmLabel,value:Ie(b,"am"),onClick:h?void 0:()=>W("am"),disabled:m}),e.jsx(K,{disableRipple:!0,variant:"subtitle2",selected:$==="pm",typographyClassName:P.ampmLabel,value:Ie(b,"pm"),onClick:h?void 0:()=>W("pm"),disabled:m})]})]}))}function wt(s,o){var c;const i=L(),r=F({props:s,name:o}),n=r.ampm??i.is12HourCycleInCurrentLocale(),a=u.useMemo(()=>{var p;return((p=r.localeText)==null?void 0:p.toolbarTitle)==null?r.localeText:x({},r.localeText,{timePickerToolbarTitle:r.localeText.toolbarTitle})},[r.localeText]);return x({},r,{ampm:n,localeText:a},st({views:r.views,openTo:r.openTo,defaultViews:["hours","minutes"],defaultOpenTo:"hours"}),{disableFuture:r.disableFuture??!1,disablePast:r.disablePast??!1,slots:x({toolbar:os},r.slots),slotProps:x({},r.slotProps,{toolbar:x({ampm:n,ampmInClock:r.ampmInClock},(c=r.slotProps)==null?void 0:c.toolbar)})})}const St=u.forwardRef(function(o,i){var V,$,W,te;const r=G(),n=L(),a=wt(o,"MuiDesktopTimePicker"),{shouldRenderTimeInASingleColumn:c,views:p,timeSteps:d}=so(a),l=c?no:Fe,m=x({hours:l,minutes:l,seconds:l,meridiem:l},a.viewRenderers),h=a.ampmInClock??!0,f=c?[]:["accept"],b=((V=m.hours)==null?void 0:V.name)===Fe.name?p:p.filter(R=>R!=="meridiem"),w=x({},a,{ampmInClock:h,timeSteps:d,viewRenderers:m,format:it(n,a),views:c?["hours"]:b,slots:x({field:bt,openPickerIcon:ro},a.slots),slotProps:x({},a.slotProps,{field:R=>{var P;return x({},ce((P=a.slotProps)==null?void 0:P.field,R),de(a),{ref:i})},toolbar:x({hidden:!0,ampmInClock:h},($=a.slotProps)==null?void 0:$.toolbar),actionBar:x({actions:f},(W=a.slotProps)==null?void 0:W.actionBar)})}),{renderPicker:v}=rt({props:w,valueManager:q,valueType:"time",getOpenDialogAriaText:((te=w.localeText)==null?void 0:te.openTimePickerDialogue)??r.openTimePickerDialogue,validator:be});return v()});St.propTypes={ampm:t.bool,ampmInClock:t.bool,autoFocus:t.bool,className:t.string,closeOnSelect:t.bool,defaultValue:t.object,disabled:t.bool,disableFuture:t.bool,disableIgnoringDatePartForTimeValidation:t.bool,disableOpenPicker:t.bool,disablePast:t.bool,enableAccessibleFieldDOMStructure:t.any,format:t.string,formatDensity:t.oneOf(["dense","spacious"]),inputRef:ue,label:t.node,localeText:t.object,maxTime:t.object,minTime:t.object,minutesStep:t.number,name:t.string,onAccept:t.func,onChange:t.func,onClose:t.func,onError:t.func,onOpen:t.func,onSelectedSectionsChange:t.func,onViewChange:t.func,open:t.bool,openTo:t.oneOf(["hours","meridiem","minutes","seconds"]),orientation:t.oneOf(["landscape","portrait"]),readOnly:t.bool,reduceAnimations:t.bool,referenceDate:t.object,selectedSections:t.oneOfType([t.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),t.number]),shouldDisableTime:t.func,skipDisabled:t.bool,slotProps:t.object,slots:t.object,sx:t.oneOfType([t.arrayOf(t.oneOfType([t.func,t.object,t.bool])),t.func,t.object]),thresholdToRenderTimeInASingleColumn:t.number,timeSteps:t.shape({hours:t.number,minutes:t.number,seconds:t.number}),timezone:t.string,value:t.object,view:t.oneOf(["hours","meridiem","minutes","seconds"]),viewRenderers:t.shape({hours:t.func,meridiem:t.func,minutes:t.func,seconds:t.func}),views:t.arrayOf(t.oneOf(["hours","minutes","seconds"]).isRequired)};const Tt=u.forwardRef(function(o,i){var m,h;const r=G(),n=L(),a=wt(o,"MuiMobileTimePicker"),c=x({hours:me,minutes:me,seconds:me},a.viewRenderers),p=a.ampmInClock??!1,d=x({},a,{ampmInClock:p,viewRenderers:c,format:it(n,a),slots:x({field:bt},a.slots),slotProps:x({},a.slotProps,{field:f=>{var g;return x({},ce((g=a.slotProps)==null?void 0:g.field,f),de(a),{ref:i})},toolbar:x({hidden:!1,ampmInClock:p},(m=a.slotProps)==null?void 0:m.toolbar)})}),{renderPicker:l}=nt({props:d,valueManager:q,valueType:"time",getOpenDialogAriaText:((h=d.localeText)==null?void 0:h.openTimePickerDialogue)??r.openTimePickerDialogue,validator:be});return l()});Tt.propTypes={ampm:t.bool,ampmInClock:t.bool,autoFocus:t.bool,className:t.string,closeOnSelect:t.bool,defaultValue:t.object,disabled:t.bool,disableFuture:t.bool,disableIgnoringDatePartForTimeValidation:t.bool,disableOpenPicker:t.bool,disablePast:t.bool,enableAccessibleFieldDOMStructure:t.any,format:t.string,formatDensity:t.oneOf(["dense","spacious"]),inputRef:ue,label:t.node,localeText:t.object,maxTime:t.object,minTime:t.object,minutesStep:t.number,name:t.string,onAccept:t.func,onChange:t.func,onClose:t.func,onError:t.func,onOpen:t.func,onSelectedSectionsChange:t.func,onViewChange:t.func,open:t.bool,openTo:t.oneOf(["hours","minutes","seconds"]),orientation:t.oneOf(["landscape","portrait"]),readOnly:t.bool,reduceAnimations:t.bool,referenceDate:t.object,selectedSections:t.oneOfType([t.oneOf(["all","day","empty","hours","meridiem","minutes","month","seconds","weekDay","year"]),t.number]),shouldDisableTime:t.func,slotProps:t.object,slots:t.object,sx:t.oneOfType([t.arrayOf(t.oneOfType([t.func,t.object,t.bool])),t.func,t.object]),timezone:t.string,value:t.object,view:t.oneOf(["hours","minutes","seconds"]),viewRenderers:t.shape({hours:t.func,minutes:t.func,seconds:t.func}),views:t.arrayOf(t.oneOf(["hours","minutes","seconds"]).isRequired)};const ss=["desktopModeMediaQuery"],rs=u.forwardRef(function(o,i){const r=F({props:o,name:"MuiTimePicker"}),{desktopModeMediaQuery:n=at}=r,a=B(r,ss);return Ye(n,{defaultMatches:!0})?e.jsx(St,x({ref:i},a)):e.jsx(Tt,x({ref:i},a))}),Le={p:.5,"& .MuiCardHeader-action":{m:"auto auto",display:"flex"}},J=u.forwardRef(({border:s=!0,boxShadow:o,children:i,content:r=!0,contentSX:n={},darkTitle:a,elevation:c,secondary:p,shadow:d,sx:l={},title:m,isDivider:h=!1,codeHighlight:f,cardActions:g,...b},w)=>{const v=he();return o=v.palette.mode==="dark"?o||!0:o,e.jsxs(Ve,{elevation:c||0,ref:w,...b,sx:{display:"flex",flexDirection:"column",height:"100%",width:"100%",border:s?"1px solid":"none",borderRadius:2,borderColor:v.palette.mode==="dark"?v.palette.divider:v.palette.grey.A800,boxShadow:o&&(!s||v.palette.mode==="dark")?d||v.shadows[10]:"inherit",":hover":{boxShadow:o?d||v.shadows[10]:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:v.typography.fontFamily,fontSize:"0.75rem"},...l},children:[p&&!m&&e.jsx(re,{sx:Le,action:p}),m&&e.jsx(re,{sx:Le,title:e.jsx(M,{variant:"h5",children:m}),action:p}),h&&e.jsx(Kt,{}),r&&e.jsx(xe,{sx:{flex:1,padding:.5,...n,"&:last-child":{paddingBottom:.5}},children:e.jsx(C,{sx:{width:"100%",height:"100%",position:"relative"},children:e.jsx(C,{sx:{width:"100%",height:"100%",position:"absolute"},children:i})})}),g&&e.jsx(ft,{disableSpacing:!0,sx:{padding:.5},children:g})]})}),ns=({ctrl_id:s})=>{const[o,i]=u.useState(null),r=u.useRef(null);return u.useEffect(()=>(r.current||(r.current=k(`${D}/last_snapshot/${s}`)),r.current.on("last_snapshot",n=>{i(n)}),()=>{r.current&&(r.current.disconnect(),r.current=null)}),[s]),e.jsx(e.Fragment,{children:e.jsxs(J,{title:"Ultima Foto",children:[o!==null&&e.jsx(C,{component:"img",sx:{height:"100%",width:"100%",overflow:"hidden",borderRadius:"4px"},src:o}),o===null&&e.jsx(C,{component:"div",sx:{width:"100%",height:"100%",display:"grid",placeItems:"center"},children:e.jsx(O,{severity:"info",variant:"outlined",children:"Caputura no disponible"})})]})})},as=({timePicked:s,datePicked:o,setDatePicked:i,setTimePicked:r})=>e.jsxs(T,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(yt,{value:o,onChange:n=>i(n),slotProps:{textField:{size:"small",sx:{maxWidth:150,"& .MuiOutlinedInput-root":{"& fieldset":{}}}}}}),e.jsx(rs,{views:["hours"],ampm:!1,defaultValue:s,onChange:n=>r(n),slotProps:{textField:{size:"small",sx:{maxWidth:85,"& .MuiOutlinedInput-root":{"& fieldset":{}}}},digitalClockSectionItem:{}}})]}),is=_(({className:s,...o})=>e.jsx(ct,{...o,classes:{popper:s}}))(({theme:s})=>({[`& .${dt.tooltip}`]:{backgroundColor:s.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:s.shadows[1],fontSize:11}})),ls=({camaras:s,ctrl_id:o})=>{const i=E(d=>d.stream),r=E(d=>d.controllerSiteState),[n,a]=u.useState(null),c=Y(),p=(d,l)=>{if(l!==null&&r.controller!==void 0){const m=s.find(h=>h.ip===l);a(l),m&&c(oe({nodo:r.controller.nodo,ip:l,ctrl_id:o,puertows:m.puertows,tipo:m.tipo,cmr_id:m.cmr_id,region:r.controller.region}))}};return u.useEffect(()=>{if(s.length>0&&r.controller!==void 0){const d=i.ip;if(d){const l=s.find(m=>m.ip===d);l?(a(l.ip),c(oe({nodo:r.controller.nodo,ip:l.ip,ctrl_id:o,puertows:l.puertows,tipo:l.tipo,cmr_id:l.cmr_id,region:r.controller.region})),c(pe({isSelected:!0}))):(a(s[0].ip),c(oe({nodo:r.controller.nodo,ctrl_id:o,ip:s[0].ip,puertows:s[0].puertows,tipo:s[0].tipo,cmr_id:s[0].cmr_id,region:r.controller.region})),c(pe({isSelected:!0})))}else a(s[0].ip),c(oe({nodo:r.controller.nodo,ctrl_id:o,ip:s[0].ip,puertows:s[0].puertows,tipo:s[0].tipo,cmr_id:s[0].cmr_id,region:r.controller.region})),c(pe({isSelected:!0}))}},[s]),u.useEffect(()=>()=>{c(Lt())},[]),e.jsx(e.Fragment,{children:e.jsx(He,{color:"primary",value:n,exclusive:!0,onChange:p,"aria-label":"Cameras",size:"small",children:s.map((d,l)=>e.jsx(se,{value:d.ip,"aria-label":"Camara 1",sx:{padding:0},children:e.jsx(is,{title:d.descripcion,arrow:!0,children:e.jsxs(T,{direction:"row",spacing:1,alignItems:"center",padding:{lg:1,xs:.5},children:[e.jsx(Io,{}),e.jsxs("div",{children:["Cam ",l+1]})]})})},d.ip))})})},cs=()=>{const s=E(o=>o.stream);return e.jsx(e.Fragment,{children:e.jsx(C,{sx:{width:"100%",height:"100%",position:"relative"},children:s.ip&&s.ctrl_id>0&&e.jsx(e.Fragment,{children:e.jsx(io,{ctrl_id:s.ctrl_id,ip:s.ip,q:"q1"},s.ctrl_id+s.ip+"q1")})})})},Dt=u.forwardRef(({title:s,count:o,onChangeIndex:i,current_index:r},n)=>{const[a,c]=u.useState(1),p=f=>{c(f.target.value)},d=()=>{i(0)},l=()=>{const f=r-a<0?0:r-a;i(f)},m=()=>{const f=r+a>o-1?o-1:r+a;i(f)},h=()=>{i(o-1)};return e.jsx(C,{component:"div",sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:1},ref:n,children:o>=0&&e.jsxs(e.Fragment,{children:[e.jsxs(M,{component:"p",color:"white",sx:{userSelect:"none"},children:[s," :"]}),e.jsxs(ve,{id:"control-select",name:"control-select",value:a,onChange:p,size:"small",inputProps:{"aria-label":"Select RowsPerPage"},SelectDisplayProps:{style:{paddingTop:5,paddingBottom:5,borderColor:"white"}},sx:{color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"& .MuiSvgIcon-root":{color:"white"}},children:[e.jsx(z,{value:1,children:1}),e.jsx(z,{value:10,children:10}),e.jsx(z,{value:20,children:20}),e.jsx(z,{value:50,children:50})]}),e.jsx(M,{component:"div",color:"white",sx:{userSelect:"none"},children:`${r+1} de ${o}`}),e.jsxs(C,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(I,{onClick:d,disabled:r===0,"aria-label":"first page",children:e.jsx(lo,{})}),e.jsx(I,{onClick:l,disabled:r===0,"aria-label":"previous page",children:e.jsx(uo,{})}),e.jsx(I,{onClick:m,disabled:r===o-1,"aria-label":"next page",children:e.jsx(po,{})}),e.jsx(I,{onClick:h,disabled:r===o-1,"aria-label":"last page",children:e.jsx(co,{})})]})]})})}),ds=async(s,o)=>{try{const r=await(await fetch(`${D}/api/v1/site/multimedia/download?filePath=${encodeURIComponent(s)}`)).blob(),n=document.createElement("a");n.href=URL.createObjectURL(r),n.download=o,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(i){console.error("Error downloading image:",i)}},us=({slides:s})=>{const[o,i]=u.useState([]),[r,n]=u.useState(0),a=()=>{if(o.length>0&&o[r]){const l=o[r],m=`downloaded-image-${l.fecha}.jpg`;ds(l.ruta,m)}},c=Y(),p=l=>{l.currentTarget===l.target&&c(ae())},d=l=>{n(l)};return u.useEffect(()=>{i(s),n(0)},[s]),e.jsx(e.Fragment,{children:e.jsx(C,{sx:{width:"100%",height:"100%",position:"absolute"},children:e.jsxs(C,{sx:{position:"relative",height:"100%",width:"100%"},children:[e.jsx(C,{component:"div",sx:{position:"absolute",bottom:0,left:0,width:"100%",background:"rgba(0, 0, 0, 0.3)",py:1,"&: hover":{}},children:e.jsxs(T,{spacing:1,direction:"row",alignItems:"center",justifyContent:"center",sx:{position:"relative"},onDoubleClickCapture:p,children:[e.jsx(Dt,{title:"N° Fotos",count:o.length,current_index:r,onChangeIndex:d}),e.jsx(I,{"aria-label":"back",sx:{position:"absolute",bottom:"cacl(50% - 23px)",left:10,cursor:"pointer"},onClick:a,children:e.jsx(Fo,{sx:{color:"#FD8D14",fontSize:30}})})]})}),o.length>0&&o[r]&&e.jsx(C,{component:"img",sx:{height:"100%",overflow:"hidden",width:"100%",borderRadius:"4px",userSelect:"none"},src:`${D+"/"+o[r].ruta}`,onDoubleClickCapture:p})]})})})},ps="/assets/emptyData-e7a50cc8.svg",_t=({children:s})=>e.jsxs(T,{spacing:1,alignItems:"center",children:[e.jsx("img",{src:ps,alt:"",width:100}),e.jsx(M,{component:"p",variant:"body1",children:s&&s||"No data"})]}),ms=({data:s})=>{const{cmr_id:o,ctrl_id:i,date:r,hour:n}=s,{isError:a,isSuccess:c,isLoading:p,data:d}=Ne({ctrl_id:i,date:r,hour:n,tipo:0,cmr_id:o}),l=Y(),m=h=>{h.currentTarget===h.target&&l(ae())};return e.jsxs(C,{sx:{width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},onDoubleClickCapture:m,children:[p&&e.jsx(Ue,{children:"Cargando Fotos"}),a&&e.jsx(pt,{children:"Error no se encontraron imagenes!"}),c&&d.length>0&&e.jsx(us,{slides:d}),c&&d.length==0&&e.jsx(_t,{children:"No se encontraron fotos."})]})},hs=({slides:s})=>{const[o,i]=u.useState([]),[r,n]=u.useState(0),a=Y(),c=m=>{m.currentTarget===m.target&&a(ae())},p=m=>{n(m)},d=u.useRef(null),l=u.useMemo(()=>d.current?`calc( 50% - ${d.current.getBoundingClientRect().width*.5}px )`:0,[d.current]);return u.useEffect(()=>{i(s),n(0)},[s]),e.jsx(e.Fragment,{children:e.jsx(C,{sx:{width:"100%",height:"100%",position:"absolute"},children:e.jsxs(C,{sx:{position:"relative",height:"100%",width:"100%"},children:[o.length>0&&o[r]&&e.jsx(C,{component:"video",sx:{height:"100%",overflow:"hidden",width:"100%",borderRadius:"4px"},controls:!0,src:`${D+"/"+o[r].ruta}`,onDoubleClickCapture:c,onClick:m=>{m.preventDefault(),m.detail==2&&m.stopPropagation()}}),e.jsx(C,{component:"div",sx:{position:"absolute",bottom:"7%",left:l},children:e.jsx(Dt,{ref:d,title:"N° Videos",count:o.length,current_index:r,onChangeIndex:p})})]})})})},xs=({data:s})=>{const{cmr_id:o,ctrl_id:i,date:r,hour:n}=s,{isError:a,isSuccess:c,isLoading:p,data:d}=Ne({ctrl_id:i,date:r,hour:n,tipo:1,cmr_id:o}),l=Y(),m=h=>{h.currentTarget===h.target&&l(ae())};return e.jsxs(C,{sx:{width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},onDoubleClickCapture:m,children:[p&&e.jsx(Ue,{children:"Cargando videos"}),a&&e.jsx(pt,{children:"Error no se encontraron videos!"}),c&&d.length>0&&e.jsx(hs,{slides:d}),c&&d.length==0&&e.jsx(_t,{children:"No se encontraron videos."})]})},fs=({option:s,handleChangeOption:o})=>e.jsxs(He,{color:"primary",value:s,exclusive:!0,onChange:o,"aria-label":"Options",size:"small",children:[e.jsx(se,{value:"vivo","aria-label":"Vivo",children:e.jsxs(T,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Ao,{}),e.jsx("span",{children:" Vivo"})]})}),e.jsx(se,{value:"video","aria-label":"Video",children:e.jsxs(T,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx($o,{}),e.jsx("span",{children:" Video"})]})}),e.jsx(se,{value:"fotos","aria-label":"Fotos",children:e.jsxs(T,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Oo,{}),e.jsx("span",{children:" Fotos"})]})})]});var we={},gs=le;Object.defineProperty(we,"__esModule",{value:!0});var kt=we.default=void 0,bs=gs(ie()),js=e;kt=we.default=(0,bs.default)((0,js.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2M9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2z"}),"LockRounded");var Se={},vs=le;Object.defineProperty(Se,"__esModule",{value:!0});var Pt=Se.default=void 0,Cs=vs(ie()),ys=e;Pt=Se.default=(0,Cs.default)((0,ys.jsx)("path",{d:"M12 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6-5h-1V6c0-2.76-2.24-5-5-5-2.28 0-4.27 1.54-4.84 3.75-.14.54.18 1.08.72 1.22.53.14 1.08-.18 1.22-.72C9.44 3.93 10.63 3 12 3c1.65 0 3 1.35 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 11c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-8c0-.55.45-1 1-1h10c.55 0 1 .45 1 1z"}),"LockOpenRounded");const ws=s=>{const[o,i]=u.useState(null),[r,n]=u.useState(null),[a,c]=u.useState(null),p=u.useRef(null),[d,l]=u.useState(!1),[m,h]=u.useState(null);return u.useEffect(()=>(s!==void 0&&(p.current||(p.current=k(`${D}/controller_state/${s}`)),p.current.on("controller_info",f=>{const{modo:g,seguridad:b,conectado:w}=f;n(g),i(b),c(w)}),p.current.on("update_controller",f=>{const{conectado:g,modo:b,seguridad:w}=f;c(v=>g!==v?g:v),n(v=>b!==v?b:v),i(v=>w!==v?w:v)}),p.current.on("connect_error",f=>{l(!0),h(f.message)})),()=>{p.current&&(p.current.disconnect(),p.current=null),i(null),n(null),l(!1),h(null),c(null)}),[s]),{isError:d,error:m,socket:p,mode:r,security:o,connected:a}},Ss=_(({className:s,...o})=>e.jsx(ct,{...o,classes:{popper:s}}))(({theme:s})=>({[`& .${dt.tooltip}`]:{backgroundColor:s.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:s.shadows[3],fontSize:11}})),Ts=({ctrl_id:s})=>{const{mode:o,security:i,socket:r}=ws(s),n=()=>{r.current&&(i===A.Armado?r.current.emit("setSecurity",A.Desarmado):r.current.emit("setSecurity",A.Armado))};return e.jsx(e.Fragment,{children:o===X.Seguridad&&e.jsx(Ss,{title:i===A.Armado?"Armado":"Desarmado",placement:"left",children:e.jsx(I,{onClick:n,children:i===A.Armado?e.jsx(kt,{}):e.jsx(Pt,{})})})})};var Te={},Ds=le;Object.defineProperty(Te,"__esModule",{value:!0});var Mt=Te.default=void 0,_s=Ds(ie()),ks=e;Mt=Te.default=(0,_s.default)((0,ks.jsx)("path",{d:"M8.54 8.54c.35.35.37.88.1 1.29C8.24 10.45 8 11.2 8 12s.24 1.55.64 2.17c.27.41.24.95-.11 1.29-.43.43-1.17.4-1.51-.11C6.38 14.4 6 13.24 6 12c0-1.21.36-2.33.97-3.28.36-.54 1.11-.64 1.57-.18m6.92 6.92c.43.43 1.17.4 1.51-.11C17.62 14.4 18 13.24 18 12s-.38-2.4-1.03-3.36c-.34-.5-1.08-.54-1.51-.11-.35.35-.37.88-.11 1.29.41.63.65 1.38.65 2.18s-.24 1.55-.64 2.17c-.27.41-.24.95.1 1.29M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6.32 8.32c.42.42 1.12.39 1.5-.08C21.18 16.53 22 14.36 22 12s-.82-4.53-2.18-6.24c-.37-.47-1.07-.5-1.5-.08-.36.36-.4.92-.08 1.32 1.1 1.37 1.76 3.11 1.76 5s-.66 3.63-1.76 5c-.32.39-.28.96.08 1.32M5.68 5.68c-.42-.42-1.12-.39-1.5.08C2.82 7.47 2 9.64 2 12s.82 4.53 2.18 6.24c.37.47 1.07.5 1.5.08.36-.36.4-.92.08-1.32C4.66 15.63 4 13.89 4 12s.66-3.63 1.76-5c.32-.39.28-.96-.08-1.32"}),"SensorsRounded");var De={},Ps=le;Object.defineProperty(De,"__esModule",{value:!0});var Rt=De.default=void 0,Ms=Ps(ie()),Rs=e;Rt=De.default=(0,Ms.default)((0,Rs.jsx)("path",{d:"M5.68 18.32c-.42.42-1.12.39-1.5-.08C2.82 16.53 2 14.36 2 12c0-2.04.61-3.93 1.66-5.51L2.1 4.93a.996.996 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0l16.97 16.97c.39.39.39 1.02 0 1.41s-1.02.39-1.41 0L8.14 10.96c-.09.33-.14.68-.14 1.04 0 .8.24 1.55.64 2.17.27.41.24.94-.1 1.29-.43.43-1.17.4-1.51-.11C6.38 14.4 6 13.24 6 12c0-.93.21-1.8.58-2.59L5.11 7.94C4.4 9.13 4 10.52 4 12c0 1.89.66 3.63 1.76 5 .32.39.28.96-.08 1.32m9.78-9.78c-.35.35-.37.88-.11 1.29.41.62.65 1.37.65 2.17 0 .36-.05.71-.14 1.04l1.55 1.55c.38-.79.59-1.66.59-2.59 0-1.24-.38-2.4-1.03-3.36-.34-.5-1.07-.54-1.51-.1m2.86-2.86c-.36.36-.4.92-.08 1.32 1.1 1.37 1.76 3.11 1.76 5 0 1.48-.4 2.87-1.11 4.06l1.45 1.45C21.39 15.93 22 14.04 22 12c0-2.36-.82-4.53-2.18-6.24-.38-.47-1.08-.5-1.5-.08"}),"SensorsOffRounded");const Is=()=>{const s=E(o=>o.controllerSiteState);return e.jsx(e.Fragment,{children:e.jsx(T,{direction:"row",spacing:1,alignItems:"center",children:s.controller!==void 0&&(s.controller.conectado===$t.Conectado?e.jsxs(e.Fragment,{children:[e.jsx(Mt,{color:"success",fontSize:"large"}),e.jsx(M,{children:"Conectado"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Rt,{color:"error",fontSize:"large"}),e.jsx(M,{children:"Desconectado"})]}))})})},Fs=({ctrl_id:s})=>{const o=E(g=>g.stream),{isError:i,isSuccess:r,data:n}=At({ctrl_id:s},{refetchOnMountOrArgChange:!0}),[a,c]=u.useState("vivo"),p=(g,b)=>{b!==null&&c(b)},[d,l]=u.useState(S()),[m,h]=u.useState(S()),f=u.useRef(null);return e.jsxs(zt,{children:[e.jsx(re,{ref:f,sx:{p:.5,"& .MuiCardHeader-action":{m:"auto auto",display:"flex"},overflow:"auto",margin:0},title:e.jsx(Is,{}),action:e.jsx("div",{style:{width:"100%",height:"100%"},children:e.jsxs(T,{direction:"row",spacing:2,alignItems:"center",children:[(a==="fotos"||a==="video")&&e.jsx(as,{timePicked:m,datePicked:d,setDatePicked:l,setTimePicked:h}),r&&n.length>0&&e.jsx(ls,{camaras:n,ctrl_id:s}),i&&e.jsx(O,{variant:"filled",severity:"error",children:"Error al cargar camaras."})]})})}),e.jsxs(xe,{sx:{flex:1,padding:.5,"&:last-child":{paddingBottom:.5}},children:[a==="vivo"&&o.ip&&o.ctrl_id&&r&&n.length>0&&e.jsx(cs,{},o.ctrl_id+o.cmr_id+o.ip),a==="fotos"&&e.jsx(ms,{data:{cmr_id:o.cmr_id,ctrl_id:o.ctrl_id,date:d.format("YYYY-MM-DD"),hour:Number(m.format("HH"))}},o.ctrl_id+o.cmr_id),a==="video"&&e.jsx(xs,{data:{cmr_id:o.cmr_id,ctrl_id:o.ctrl_id,date:d.format("YYYY-MM-DD"),hour:Number(m.format("HH"))}},o.ctrl_id+o.cmr_id)]}),e.jsx(ft,{disableSpacing:!0,sx:{padding:.5},children:e.jsxs(T,{width:"100%",direction:"row",alignItems:"center",spacing:2,justifyContent:"space-between",children:[e.jsx(fs,{option:a,handleChangeOption:p}),e.jsx(Ts,{ctrl_id:s})]})})]})},Os=({ctrl_id:s})=>{const[o,i]=u.useState([]),r=u.useRef(null),n=he(),[a,c]=u.useState(X.Seguridad),[p,d]=u.useState(A.Desarmado);return u.useEffect(()=>(r.current||(r.current=k(`${D}/pin_entrada/${s}`)),r.current.on("list_pines_entrada",l=>{i(l)}),r.current.on("controller_mode",l=>{c(l)}),r.current.on("controller_security",l=>{d(l)}),r.current.on("item_pin_entrada",l=>{i(m=>{if(l.activo==1){const h=m.filter(f=>f.pe_id!=l.pe_id);return h.unshift(l),h}return m})}),()=>{r.current&&(r.current.disconnect(),r.current=null)}),[s]),e.jsx(e.Fragment,{children:e.jsxs(Ve,{sx:{display:"flex",flexDirection:"column",height:"100%",width:"100%",border:a===X.Seguridad?"2px solid":"1px solid",borderRadius:2,backgroundImage:"inherit",borderColor:a===X.Seguridad?p===A.Armado?"green":"darkgray":n.palette.mode==="dark"?n.palette.divider:n.palette.grey.A800,boxShadow:"inherit",":hover":{boxShadow:"inherit"},"& pre":{m:0,p:"16px !important",fontFamily:n.typography.fontFamily,fontSize:"0.75rem"}},children:[e.jsx(re,{title:"Site",sx:{p:.5,"& .MuiCardHeader-action":{m:"auto auto",display:"flex"}}}),e.jsx(xe,{sx:{flex:1,padding:.5,"&:last-child":{paddingBottom:.5}},children:e.jsx(C,{sx:{width:"100%",height:"100%",position:"relative"},children:e.jsx(C,{sx:{width:"100%",height:"100%",position:"absolute"},children:e.jsx(ee,{sx:{width:"100%",height:"100%","& .simplebar-content":{width:"100%",height:"100%",display:"grid",placeItems:"center"}},children:e.jsxs(j,{container:!0,rowSpacing:1,columnSpacing:2,children:[o.length===0&&e.jsx(j,{size:{xs:12},sx:{display:"grid",placeItems:"center"},children:e.jsx(O,{severity:"warning",variant:"outlined",children:"Asignar al menos un pin de entrada"})}),o.map((l,m,h)=>{const f=e.jsxs(T,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:[e.jsx("div",{children:fe(l.descripcion,20)}),e.jsx(mo,{state:a===X.Seguridad?l.estado===1?"warning":"active":l.estado===1?"active":"disable"})]});return h.length==1?e.jsxs(u.Fragment,{children:[e.jsx(j,{size:{xs:3}}),e.jsx(j,{size:{xs:6},children:f}),e.jsx(j,{size:{xs:3}})]},l.ctrl_id+l.pe_id):e.jsx(j,{size:{xs:12,lg:6},children:f},l.ctrl_id+l.pe_id)})]})})})})})]})})},Ls=_(mt)(({theme:s})=>({border:"1px solid",borderRadius:2,borderColor:s.palette.mode==="dark"?s.palette.divider:s.palette.grey.A800,backgroundColor:s.palette.background.paper,boxShadow:" rgba(0, 0, 0, 0.2) 0px 2px 1px -1px, rgba(0, 0, 0, 0.14) 0px 1px 1px 0px, rgba(0, 0, 0, 0.12) 0px 1px 3px 0px",backgroundImage:s.palette.mode==="dark"?"linear-gradient(rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.05))":"none"})),$s=({ctrl_id:s})=>{const[o,i]=u.useState([]),r=u.useRef(null);return u.useEffect(()=>(r.current||(r.current=k(`${D}/modulo_energia/${s}`)),r.current.on("initial_list_energia",n=>{i(n)}),r.current.on("list_energia",(n,a)=>{a==="add"&&i(c=>c.some(d=>d.me_id===n.me_id)?c:[...c,n].sort((m,h)=>m.me_id-h.me_id)),a==="delete"&&i(c=>c.filter(d=>d.me_id!==n.me_id))}),()=>{r.current&&(r.current.disconnect(),r.current=null)}),[s]),e.jsx(e.Fragment,{children:e.jsxs(C,{component:"div",sx:{width:"100%",height:"100%",display:"grid",placeItems:"center"},children:[o.length===0&&e.jsx(O,{severity:"warning",variant:"outlined",children:"Asignar al menos un modulo de energia"}),o.length>0&&e.jsx(ht,{component:xt,variant:"outlined",sx:{height:"100%",width:"100%",overflowY:"auto"},children:e.jsx(ee,{sx:{width:"100%",height:"100%","& .simplebar-content":{width:"100%",height:"100%",display:"grid",placeItems:"center"}},children:e.jsxs(Ls,{"aria-label":"customized table",stickyHeader:!0,size:"small",sx:{position:"relative"},children:[e.jsx(Ce,{children:e.jsxs(N,{children:[e.jsx(y,{children:"N°"}),e.jsx(y,{children:"Amp (A)"}),e.jsx(y,{children:"Volt (V)"}),e.jsx(y,{children:"Pot (W)"}),e.jsx(y,{children:"kWh"})]})}),e.jsx(ye,{children:r.current!==null&&o.map((n,a)=>r.current!==null?e.jsx(As,{index:a,dataEnergia:n,socket:r.current},n.ctrl_id+n.me_id):null)})]})})})]})})},As=({dataEnergia:s,index:o,socket:i})=>{const[r,n]=u.useState(s);return i.on("energia",a=>{a.me_id===s.me_id&&n(a)}),e.jsxs(N,{children:[e.jsx(y,{component:"th",scope:"row",children:o+1}),e.jsx(y,{children:r.amperaje}),e.jsx(y,{children:r.voltaje}),e.jsx(y,{children:r.potenciaw}),e.jsx(y,{children:r.potenciakwh})]})},zs=({date:s,registerData:o,info:i})=>{const[r,n]=u.useState({configs:{chart:{height:350,type:"line",zoom:{enabled:!1},background:"#121212",id:"temperature-graph-chart",toolbar:{show:!0,export:{png:{filename:`grafica_temperatura_${encodeURIComponent(i.nodo)}_${encodeURIComponent(i.st_id)}_${encodeURIComponent(i.ubicacion)}_${encodeURIComponent(S(s,"YYYY-MM-DD").unix())}`},svg:{filename:`grafica_temperatura_${encodeURIComponent(i.nodo)}_${encodeURIComponent(i.st_id)}_${encodeURIComponent(i.ubicacion)}_${encodeURIComponent(S(s,"YYYY-MM-DD").unix())}`}}}},dataLabels:{enabled:!1},stroke:{curve:"straight"},grid:{row:{colors:["#1e1e1e","transparent"],opacity:.5}},xaxis:{type:"datetime",tickAmount:24,min:new Date(S(s,"YYYY-MM-DD").startOf("day").toISOString()).getTime(),max:new Date(S(s,"YYYY-MM-DD").add(1,"day").startOf("day").toISOString()).getTime(),labels:{formatter:function(l,m){return S(m).format("HH:mm")},style:{colors:"#8c8c8c",cssClass:"apexcharts-xaxis-label"}},title:{text:"Tiempo ( h )",style:{color:"#8c8c8c"}},tooltip:{enabled:!1,formatter:(l,m)=>S(l).format("HH:mm:ss")}},yaxis:{min:0,decimalsInFloat:2,title:{text:"Temperatura ( °C )",style:{color:"#8c8c8c"}},labels:{style:{colors:"#8c8c8c",cssClass:"apexcharts-yaxis-label"}}},tooltip:{enabled:!0,x:{show:!0,formatter(l,m){return S(l).format("HH:mm:ss")}},y:{}}}}),a=he(),c=a.palette.mode,[p,d]=u.useState([]);return u.useEffect(()=>{n(l=>{const m=c=="dark"?a.palette.text.secondary:a.palette.text.primary;return{configs:{...l.configs,chart:{...l.configs.chart,background:a.palette.background.default},grid:{row:{colors:[a.palette.background.paper,"transparent"],opacity:.5}},xaxis:{...l.configs.xaxis,labels:{...l.configs.xaxis?l.configs.xaxis.labels:{},style:{...l.configs.xaxis&&l.configs.xaxis.labels?l.configs.xaxis.labels.style:{},colors:m,cssClass:"apexcharts-xaxis-label"}},title:{...l.configs.xaxis?l.configs.xaxis.title:{},style:{color:m}}},yaxis:{...l.configs.yaxis,title:{text:"Temperatura ( °C )",style:{color:m}},labels:{style:{colors:m,cssClass:"apexcharts-yaxis-label"}}}}}})},[c]),u.useEffect(()=>{d([{name:"temperatura",data:o}]),n(l=>({configs:{...l.configs,xaxis:{...l.configs.xaxis,min:new Date(S(s,"YYYY-MM-DD").startOf("day").toISOString()).getTime(),max:new Date(S(s,"YYYY-MM-DD").add(1,"day").startOf("day").toISOString()).getTime()}}}))},[o]),u.useEffect(()=>{n(l=>({configs:{...l.configs,chart:{...l.configs.chart,toolbar:{show:!1,export:{png:{filename:`grafica_temperatura_${encodeURIComponent(i.nodo)}_${encodeURIComponent(i.st_id)}_${encodeURIComponent(i.ubicacion)}_${encodeURIComponent(S(s,"YYYY-MM-DD").unix())}`},svg:{filename:`grafica_temperatura_${encodeURIComponent(i.nodo)}_${encodeURIComponent(i.st_id)}_${encodeURIComponent(i.ubicacion)}_${encodeURIComponent(S(s,"YYYY-MM-DD").unix())}`}}}}}}))},[i,s]),e.jsx(e.Fragment,{children:e.jsx(xo,{options:r.configs,series:p,type:"line",width:"100%",height:500})})};function Es(s,o){const i=ApexCharts.getChartByID(s);i&&(o==="png"?i.exports.exportToPng():o==="svg"&&i.exports.exportToSVG())}const Ys=({open:s,setOpen:o,data:i})=>{const[r,n]=u.useState(S()),{nodo:a,ctrl_id:c,st_id:p,serie:d,ubicacion:l}=i,m=()=>{o(!1)},h=u.useRef(null);u.useEffect(()=>(s?h.current||(h.current=k(`${D}/sensor_temperatura/${c}/${p}`)):h.current&&(h.current.disconnect(),h.current=null),()=>{h.current&&(h.current.disconnect(),h.current=null)}),[s,i]);const[f,{data:g,isSuccess:b}]=Et(),w=()=>{f({ctrl_id:c,st_id:p,date:r.format("YYYY-MM-DD")})};return e.jsx(e.Fragment,{children:e.jsxs(fo,{fullWidth:!0,maxWidth:"lg",open:s,onClose:m,sx:{"& .MuiDialog-paper":{backgroundColor:"background.paper",backgroundImage:"inherit"}},children:[e.jsx(jo,{children:e.jsx(M,{component:"div",variant:"h5",children:"Gráfica Temperatura"})}),e.jsxs(go,{children:[e.jsxs(Ro,{children:["Nodo: ",a," , Ubicacion: ",l," , Serie: ",d]}),e.jsxs(T,{direction:"row",justifyContent:"end",alignItems:"center",spacing:2,marginBottom:2,children:[e.jsx(yt,{value:r,onChange:v=>{n(v)},slotProps:{textField:{size:"small",sx:{maxWidth:150}}}}),e.jsx(I,{"aria-label":"get register",onClick:w,color:"primary",children:e.jsx(vo,{})})]}),e.jsx(zs,{date:r.format("YYYY-MM-DD"),registerData:b&&g?g:[],info:i})]}),e.jsxs(bo,{children:[e.jsx(Oe,{variant:"contained",onClick:()=>{Es("temperature-graph-chart","png")},startIcon:e.jsx(ho,{}),children:"Descargar"}),e.jsx(Oe,{variant:"contained",color:"error",onClick:m,children:"Cerrar"})]})]})})},Vs=({ctrl_id:s})=>e.jsx(e.Fragment,{children:e.jsx(C,{sx:{width:"100%",height:"100%"},children:e.jsx(ee,{sx:{width:"100%",height:"100%","& .simplebar-content":{width:"100%",height:"100%",display:"grid",placeItems:"center"}},children:e.jsx(Hs,{ctrl_id:Number(s)})})})}),Hs=({ctrl_id:s})=>{const{xregion:o,xnodo:i}=Be(),[r,n]=u.useState([]),a=u.useRef(null),[c,p]=u.useState(!1),[d,l]=u.useState(null),m=h=>{l(h),p(!0)};return u.useEffect(()=>(a.current||(a.current=k(`${D}/sensor_temperatura/${s}`)),a.current.on("initial_list_temperature",h=>{n(h)}),a.current.on("list_temperature",(h,f)=>{f==="add"&&n(g=>g.some(w=>w.st_id===h.st_id)?g:[...g,h].sort((V,$)=>V.st_id-$.st_id)),f==="delete"&&n(g=>g.filter(w=>w.st_id!==h.st_id))}),()=>{a.current&&(a.current.disconnect(),a.current=null)}),[s]),e.jsxs(e.Fragment,{children:[e.jsxs(j,{container:!0,rowSpacing:1,columnSpacing:2,sx:{width:"100%"},children:[r.length===0&&e.jsx(j,{size:{xs:12},sx:{display:"grid",placeItems:"center"},children:e.jsx(O,{severity:"warning",variant:"outlined",children:"Asignar al menos un sensor de temperatura"})}),a.current!==null&&r.map((h,f,g)=>{if(a.current===null)return null;const b=e.jsxs(T,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",children:[e.jsx(Ns,{dataViewer:h,socket:a.current}),e.jsx(I,{size:"small","aria-label":"Temperature Graph",color:"primary",onClick:()=>m({...h,nodo:i,region:o,ctrl_id:s}),children:e.jsx(Lo,{fontSize:"small"})})]});return g.length==1?e.jsxs(j,{container:!0,sx:{width:"100%"},children:[e.jsx(j,{size:{xs:3}}),e.jsx(j,{size:{xs:6},children:b}),e.jsx(j,{size:{xs:3}})]},h.ctrl_id+h.st_id):e.jsx(j,{size:{xs:12,lg:6},children:b},h.ctrl_id+h.st_id)})]}),d&&c&&e.jsx(Ys,{open:c,setOpen:p,data:d})]})},Ns=({dataViewer:s,socket:o})=>{const[i,r]=u.useState(s);return o.on("temperature",n=>{s.st_id===n.st_id&&r(n)}),e.jsx(e.Fragment,{children:e.jsxs(T,{direction:"row",spacing:1,alignItems:"center",justifyContent:"space-between",sx:{flex:1},children:[e.jsx("span",{children:`${fe(i.ubicacion,15)}:`}),e.jsxs(C,{children:[i.actual,"°C"]})]})})},Us=({ctrl_id:s,region:o})=>{const i=Yt(),r=Y(),[n,a]=u.useState("accesos"),c=p=>{a(p.target.value)};return e.jsx(J,{title:e.jsxs(ve,{size:"small",value:n,onChange:c,placeholder:"select-tipo-prioridad",inputProps:{id:"select-prioridad"},children:[e.jsx(z,{value:"accesos",children:"Accesos"}),e.jsx(z,{value:"alarmas",children:"Alarmas"})]}),secondary:e.jsx(Co,{component:"button",underline:"none",onClick:()=>{console.log("Setting",o,s),r(Vt(o)),r(Ht(s)),r(Nt(n=="accesos"?"acceso":"entrada")),r(Ut(S().startOf("day").format("YYYY-MM-DD HH:mm:ss"))),r(Bt(S().endOf("day").format("YYYY-MM-DD HH:mm:ss"))),i("/logs")},children:"Ver Mas"}),children:e.jsx(ht,{component:xt,variant:"outlined",sx:{height:"100%",width:"100%",overflowY:"auto"},children:e.jsxs(ee,{sx:{width:"100%",height:"100%","& .simplebar-content":{width:"100%",height:"100%",display:"grid",placeItems:"center"}},children:[n=="accesos"&&e.jsx(Bs,{ctrl_id:s}),n=="alarmas"&&e.jsx(qs,{ctrl_id:s})]})})})},It=_(mt)(({theme:s})=>({border:"1px solid",borderRadius:2,borderColor:s.palette.mode==="dark"?s.palette.divider:s.palette.grey.A800,backgroundColor:s.palette.background.paper,boxShadow:" rgba(0, 0, 0, 0.2) 0px 2px 1px -1px, rgba(0, 0, 0, 0.14) 0px 1px 1px 0px, rgba(0, 0, 0, 0.12) 0px 1px 3px 0px",backgroundImage:s.palette.mode==="dark"?"linear-gradient(rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.05))":"none"})),Bs=({ctrl_id:s})=>{const[o,i]=u.useState([]),r=u.useRef(null);return u.useEffect(()=>(r.current||(r.current=k(`${D}/registro_acceso/${s}`)),r.current.on("list_registros_acceso",n=>{i(n)}),r.current.on("new_registro_acceso",n=>{i(a=>{const c=[n,...a];return c.length>5&&c.splice(5),c})}),()=>{r.current&&(r.current.disconnect(),r.current=null)}),[s]),e.jsxs(e.Fragment,{children:[o.length===0&&e.jsx(O,{severity:"info",variant:"outlined",children:"Sin registros de acceso."}),o.length>0&&e.jsxs(It,{size:"small","aria-label":"a dense table",stickyHeader:!0,sx:{position:"relative"},children:[e.jsx(Ce,{children:e.jsxs(N,{children:[e.jsx(y,{children:"Contrata"}),e.jsx(y,{children:"Autorización"}),e.jsx(y,{children:"Fecha"})]})}),e.jsx(ye,{children:o.map((n,a)=>{const{autorizacion:c,fecha:p,contrata:d}=n,l=ut(p);return e.jsxs(N,{children:[e.jsx(y,{children:d?e.jsx(ao,{text:d,maxLength:15,insertDots:!0}):"sin-contrata"}),e.jsx(y,{children:c==1?"Autorizado":c==0?"Denegado":c}),e.jsx(y,{children:l})]},a)})})]})]})},qs=({ctrl_id:s})=>{const[o,i]=u.useState([]),r=u.useRef(null);return u.useEffect(()=>(r.current||(r.current=k(`${D}/registro_entrada/${s}`)),r.current.on("list_registros_entrada",n=>{i(n)}),r.current.on("new_registro_entrada",n=>{i(a=>{const c=[n,...a];return c.length>5&&c.splice(5),c})}),()=>{r.current&&(r.current.disconnect(),r.current=null)}),[s]),e.jsxs(e.Fragment,{children:[o.length===0&&e.jsx(O,{severity:"info",variant:"outlined",children:"Sin registros de alarma."}),o.length>0&&e.jsxs(It,{size:"small","aria-label":"a dense table",stickyHeader:!0,sx:{position:"relative"},children:[e.jsx(Ce,{children:e.jsxs(N,{children:[e.jsx(y,{children:"Pin"}),e.jsx(y,{children:"Estado"}),e.jsx(y,{children:"Fecha"})]})}),e.jsx(ye,{children:o.map((n,a)=>{const{pin:c,estado:p,fecha:d}=n,l=ut(d);return e.jsxs(N,{children:[e.jsx(y,{children:c}),e.jsx(y,{children:p==0?"Desactivado":p==1?"Activado":p}),e.jsx(y,{children:l})]},a)})})]})]})};const Gs="/assets/Lead_Light_Icon-1d1b19d6.svg",Ws="/assets/Green_Light_Icon-460ad5bb.svg",Qs=({ctrl_id:s})=>{const o=u.useRef(null),[i,r]=u.useState([]),[n,a]=u.useState(""),c=i.find(d=>String(d.es_id)==n),p=d=>{a(d.target.value)};return u.useEffect(()=>{i.length>0&&n==""&&a(String(i[0].es_id)),i.find(l=>String(l.es_id)==n)==null&&(i.length>0?a(String(i[0].es_id)):a(""))},[i]),u.useEffect(()=>(o.current||(o.current=k(`${D}/pines_salida/${s}`)),o.current.on("equipos_salida",d=>{r(d)}),o.current.on("list_pines_salida",(d,l)=>{r(m=>m.find(({es_id:f})=>f===l.es_id)===void 0?[l,...m].sort((g,b)=>g.es_id-b.es_id):m)}),()=>{o.current&&(o.current.disconnect(),o.current=null)}),[s]),e.jsx(e.Fragment,{children:e.jsx(J,{title:"Control",secondary:e.jsx(yo,{size:"small",sx:{maxWidth:200},children:i.length>0&&e.jsx(ve,{id:"control-select",name:"control-select",value:n,onChange:p,size:"small",inputProps:{"aria-label":"Select Control"},children:i.map(d=>e.jsx(z,{value:d.es_id,children:d.actuador},d.es_id))})}),children:e.jsxs(C,{sx:{width:"100%",height:"100%",position:"relative"},children:[i.length===0&&e.jsx(C,{component:"div",sx:{width:"100%",height:"100%",display:"grid",placeItems:"center"},children:e.jsx(O,{severity:"warning",variant:"outlined",children:"Asignar al menos un pin de salida"})}),c&&o.current&&e.jsx(Ks,{ctrl_id:s,equipo_salida:c,socketRef:o.current},c.es_id)]})})})},Ks=({equipo_salida:s,socketRef:o})=>{const[i,r]=u.useState([]);return o.on("list_pines_salida",(n,a)=>{s.es_id==a.es_id&&r(n)}),u.useEffect(()=>{o.emit("initial_list_pines_salida",s.es_id)},[s.es_id]),e.jsx(e.Fragment,{children:e.jsx("div",{style:{height:"100%",width:"100%",position:"absolute",top:0,left:0},children:e.jsx(ee,{sx:{width:"100%",height:"100%","& .simplebar-content":{width:"100%",height:"100%",display:"grid",placeItems:"center"}},children:e.jsx("div",{className:"grid-container-pinsal-list",children:i.map(n=>e.jsx(Xs,{pinSalItem:n,socketRef:o},n.ps_id))})})})})},Xs=({pinSalItem:s,socketRef:o})=>{const[i,r]=u.useState(s);return u.useEffect(()=>{o.emit("initial_item_pin_salida",s.es_id,s.ps_id),o.on("item_pin_salida",n=>{s.ps_id==n.ps_id&&r(n)})},[s.ps_id]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid-item-pinsal",children:[e.jsx("span",{children:`${fe(i.descripcion,20)}:`}),i.es_id===21&&e.jsxs(e.Fragment,{children:[i.estado===1&&e.jsx("img",{src:Ws,alt:"Green Indicator"}),i.estado===0&&e.jsx("img",{src:Gs,alt:"Lead Indicator"})]}),i.es_id!==21&&e.jsxs("div",{className:"button-group",children:[e.jsx("button",{className:"button_item",onClick:()=>{const{ctrl_id:n,pin:a,es_id:c}=i;o.emit("orden_pin_salida",{action:0,ctrl_id:n,es_id:c,pin:a})},style:{backgroundColor:i.orden==0?"#d9d9d9":"transparent",color:i.orden==0?"black":"#1668dc"},children:"A"}),e.jsx("button",{className:"button_item",onClick:()=>{const{ctrl_id:n,pin:a,es_id:c}=i;o.emit("orden_pin_salida",{action:1,ctrl_id:n,es_id:c,pin:a})},style:{backgroundColor:i.orden==1?"#49aa19":"transparent",color:i.orden==1?"white":"#1668dc"},children:"ON"}),e.jsx("button",{className:"button_item",onClick:()=>{const{ctrl_id:n,pin:a,es_id:c}=i;o.emit("orden_pin_salida",{action:-1,ctrl_id:n,es_id:c,pin:a})},style:{backgroundColor:i.orden==-1?"#a61d24":"transparent",color:i.orden==-1?"white":"#1668dc"},children:"OFF"})]})]})})},wr=()=>{const{xctrl_id:s}=Be(),o=Y(),i=u.useRef(null),r=E(a=>a.multimediaSlice),n=E(a=>a.controllerSiteState);return u.useEffect(()=>(s!==void 0&&(o(qt({openItem:[`nodo-${s}`]})),i.current||(i.current=k(`${D}/controller_state/${s}`)),i.current.on("controller_info",a=>{o(Pe(a))}),i.current.on("update_region",a=>{console.log("update_region SITE",a),o(Gt(a))}),i.current.on("update_controller",a=>{o(Pe(a))}),i.current.on("error_message",a=>{o(Me(a.message))}),i.current.on("connect",()=>{o(Wt())}),i.current.on("connect_error",a=>{o(Me(`Socket connect error: ${a.message}`))})),()=>{i.current&&(i.current.disconnect(),i.current=null),o(Qt())}),[s]),e.jsxs(C,{sx:{width:"100%",height:"100%",padding:1,overflowY:"auto"},children:[n.isError&&e.jsx("div",{children:n.error??"Ocurrio un error al obtener el controlador"}),n.isSuccess&&n.controller!==void 0&&e.jsx(j,{container:!0,sx:{width:"100%",height:"100%",overflowY:"auto"},rowGap:1,children:e.jsxs(e.Fragment,{children:[e.jsx(j,{size:{xs:12},sx:{height:r.isExpandMultimedia?"100%":"calc(66.7% - 4px)"},children:e.jsxs(j,{container:!0,columnSpacing:1,sx:{height:"100%"},children:[e.jsx(j,{size:{xs:r.isExpandMultimedia?12:8},children:e.jsx(Fs,{ctrl_id:n.controller.ctrl_id})}),!r.isExpandMultimedia&&e.jsx(j,{size:{xs:4},sx:{height:"100%"},children:e.jsxs(j,{container:!0,sx:{width:"100%",height:"100%"},gap:1,children:[e.jsx(j,{size:{xs:12},sx:{width:"100%"},children:e.jsx(J,{title:"Temperaturas",children:e.jsx(Vs,{ctrl_id:n.controller.ctrl_id})})}),e.jsx(j,{size:{xs:12},sx:{width:"100%"},children:e.jsx(J,{title:"Energia",children:e.jsx($s,{ctrl_id:n.controller.ctrl_id})})}),e.jsx(j,{size:{xs:12},sx:{width:"100%"},children:e.jsx(Qs,{ctrl_id:n.controller.ctrl_id})})]})})]})}),!r.isExpandMultimedia&&e.jsx(j,{size:{xs:12},sx:{height:"calc(33.3% - 4px)"},children:e.jsxs(j,{container:!0,columnSpacing:1,sx:{height:"100%"},children:[e.jsx(j,{size:{xs:4},children:e.jsx(ns,{ctrl_id:n.controller.ctrl_id})}),e.jsx(j,{size:{xs:4},children:e.jsx(Us,{ctrl_id:n.controller.ctrl_id,region:n.controller.region})}),e.jsx(j,{size:{xs:4},children:e.jsx(Os,{ctrl_id:n.controller.ctrl_id})})]})})]})},n.controller.ctrl_id)]})};export{wr as NodoSite,wr as default};
