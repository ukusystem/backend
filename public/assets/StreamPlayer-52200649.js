import{r as s,q as b,Y as k,Z as y,j as t,B as R,aI as S,aS as $}from"./index-f0602fa3.js";import{S as D}from"./ServerError-d96d33c3.js";const w=({q:u,ip:i,ctrl_id:c})=>{const n=s.useRef(null),e=s.useRef(null),[h,l]=s.useState(!1),[p,f]=s.useState(!1),[C,d]=s.useState(!1),[j,g]=s.useState(!1),[E,m]=s.useState(null),I=b(),x=r=>{r.currentTarget===r.target&&I($())};return s.useEffect(()=>(e.current||(e.current=k(`${y}/stream/${c}/${i}/${u}`)),e.current.on("stream_flux",r=>{n.current&&r&&(n.current.src=r)}),e.current.on("stream_state",r=>{const{state:a,typeState:o}=r;o==="isConfiguring"&&l(a),o==="isError"&&d(a),o==="isLoading"&&f(a),o==="isSuccess"&&g(a)}),e.current.on("stream_error",r=>{m(r)}),()=>{e.current&&(e.current.disconnect(),e.current=null),n.current&&(n.current=null),l(!1),d(!1),f(!1),g(!1),m(null)}),[c,i,u]),t.jsx(t.Fragment,{children:t.jsxs(R,{sx:{width:"100%",height:"100%",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},onDoubleClickCapture:x,children:[h&&t.jsx(S,{children:"Configurando"}),p&&t.jsx(S,{children:"Cargando"}),C&&t.jsx(D,{children:E}),e.current&&j&&t.jsx("img",{ref:n,style:{width:"100%",height:"100%",position:"absolute"},alt:`Video Stream ${i}`,onDoubleClickCapture:x})]})})};export{w as S};
