import{j as e,S as ge,s as Ie,au as re,a4 as Fe,av as D,a7 as f,u as xe,a as fe,a5 as Pe,aw as $e,r as v,B as P,m as ke,k as h,a8 as k,a9 as N,ax as x,aa as Z,ab as j,ay as je,T as _,ac as ye,az as Ce,aA as ve,aB as be,aC as Re,aD as ie,aE as de,l as we,L as ce,aF as Te,aG as Me,h as ue,A as Ve,o as he,aH as Ee,aI as Le,aJ as Be,aK as Ae,aL as De,aM as _e,aN as ze,aO as Oe,aP as We}from"./index-Chp53bex.js";import{u as Ge,g as Ue,a as Ke,f as Ye}from"./index-C3XjjjnN.js";import{S as Ne}from"./SearchIcon-rQgN0eDF.js";import{g as Ze}from"./groupByKey-nGMiMvM1.js";import{L as me}from"./ListItemButton-QcIUYHIc.js";import{L as Se}from"./ListItemIcon-V5RgImI9.js";const Qe=({...o})=>e.jsx(ge,{...o,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("mask",{id:"mask0_2799_6986",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24",children:e.jsx("rect",{width:"24",height:"24",fill:"#D9D9D9"})}),e.jsx("g",{mask:"url(#mask0_2799_6986)",children:e.jsx("path",{d:"M10 18V16H14V18H10ZM6 13V11H18V13H6ZM3 8V6H21V8H3Z",fill:"currentColor"})})]})}),qe=({...o})=>e.jsx(ge,{...o,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M10.5 11.25H7.5C7.30109 11.25 7.11032 11.329 6.96967 11.4697C6.82902 11.6103 6.75 11.8011 6.75 12V16.5C6.75 16.6989 6.82902 16.8897 6.96967 17.0303C7.11032 17.171 7.30109 17.25 7.5 17.25H10.5M15.75 11.25H12.75C12.5511 11.25 12.3603 11.329 12.2197 11.4697C12.079 11.6103 12 11.8011 12 12V13.5C12 13.6989 12.079 13.8897 12.2197 14.0303C12.3603 14.171 12.5511 14.25 12.75 14.25H14.25C14.4489 14.25 14.6397 14.329 14.7803 14.4697C14.921 14.6103 15 14.8011 15 15V16.5C15 16.6989 14.921 16.8897 14.7803 17.0303C14.6397 17.171 14.4489 17.25 14.25 17.25H11.25M17.25 10.5C17.25 11.25 18.75 17.25 18.75 17.25H20.25C20.25 17.25 21.75 11.25 21.75 10.5M16.5 20.25V21.75H3V2.25H12M12 2.25V6.75H16.5M12 2.25H12.75L16.5 6V6.75M16.5 6.75V9",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"})})}),Je=({...o})=>e.jsx(ge,{...o,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M21.17 3.25C21.39 3.25 21.5867 3.33333 21.76 3.5C21.92 3.66 22 3.85333 22 4.08V19.92C22 20.1467 21.92 20.34 21.76 20.5C21.5867 20.6667 21.39 20.75 21.17 20.75H7.83C7.61 20.75 7.41333 20.6667 7.24 20.5C7.08 20.34 7 20.1467 7 19.92V17H2.83C2.61 17 2.41333 16.92 2.24 16.76C2.08 16.5867 2 16.39 2 16.17V7.83C2 7.61 2.08 7.41333 2.24 7.24C2.41333 7.08 2.61 7 2.83 7H7V4.08C7 3.85333 7.08 3.66 7.24 3.5C7.41333 3.33333 7.61 3.25 7.83 3.25M7 13.06L8.18 15.28H9.97L8 12.06L9.93 8.89H8.22L7.13 10.9L7.09 10.96L7.06 11.03C6.88667 10.6767 6.7 10.32 6.5 9.96C6.33333 9.60667 6.15667 9.25 5.97 8.89H4.16L6.05 12.08L4 15.28H5.78M13.88 19.5V17H8.25V19.5M13.88 15.75V12.63H12V15.75M13.88 11.38V8.25H12V11.38M13.88 7V4.5H8.25V7M20.75 19.5V17H15.13V19.5M20.75 15.75V12.63H15.13V15.75M20.75 11.38V8.25H15.13V11.38M20.75 7V4.5H15.13V7H20.75Z",fill:"currentColor"})})});function Q(o,i=!1){const m=new Date(o),l=m.getDate().toString().padStart(2,"0"),g=(m.getMonth()+1).toString().padStart(2,"0"),s=m.getFullYear(),d=m.getHours().toString().padStart(2,"0"),p=m.getMinutes().toString().padStart(2,"0"),c=m.getSeconds().toString().padStart(2,"0");return i?`${s}-${g}-${l} ${d}:${p}:${c}`:`${l}/${g}/${s} ${d}:${p}:${c}`}const Xe=Ie(re)(({theme:o})=>({borderRadius:"8px 8px 0 0 ",border:"none",backgroundColor:o.palette.background.paper,backgroundImage:"none",boxShadow:"none",color:o.palette.text.primary})),q=Ie(Fe)(({theme:o})=>({borderRadius:10,width:"100%",backgroundColor:o.palette.tertiary.opacityDark,"&.Mui-focused":{outline:"none",border:"none",boxShadow:"none"},"&.MuiOutlinedInput-root":{color:o.palette.text.primary,"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"},fontWeight:500},"& .MuiSelect-icon":{color:o.palette.text.primary}})),pe=[{value:D.Acceso,name:"Accesos"},{value:D.Energia,name:"Energias"},{value:D.Entrada,name:"Entradas"},{value:D.EstadoCamara,name:"Estados camara"},{value:D.MicroSD,name:"MicroSD"},{value:D.Peticion,name:"Peticiones"},{value:D.Salida,name:"Salidas"},{value:D.Seguridad,name:"Seguridades"},{value:D.Temperatura,name:"Temperaturas"},{value:D.Ticket,name:"Tickets"}],He=[...Array(24).keys()].map(o=>{const i=f().hour(o).startOf("hour");return{value:i.format("h:mm A"),name:i.format("h:mm A")}}),et=({children:o})=>{const i=xe(),{ctrl_id:m,rgn_id:l,register_type:g,startDate:s,endDate:d,startTime:p,endTime:c,limit:b,prevIdResponse:y,register_data:Y,nextId:H,previusId:ae,countDataResponse:$,lastCountData:R}=fe(t=>t.registerStore),{isSuccess:B,data:A}=Pe(),[se]=$e(),S=t=>{i(x({rgn_id:t.target.value,ctrl_id:void 0,register_data:null}))},J=t=>{i(x({ctrl_id:t.target.value,register_data:null}))},X=t=>{const n=pe.find(C=>String(C.value)===String(t.target.value));i(x({register_type_name:n==null?void 0:n.name})),i(je(t.target.value))},le=t=>{i(x({startTime:t.target.value,register_data:null}))},oe=t=>{i(x({endTime:t.target.value,register_data:null}))},ee=()=>{d!==null&&s!==null&&c!==null&&p!==null&&l!==void 0&&m!==void 0&&g!==void 0&&I({ctrl_id:m,start_date:s,end_date:d,end_time:c,start_time:p,type:g,p_action:"next",limit:b,cursor:Y==null?void 0:Y.meta.next_id})},te=()=>{if(d!==null&&s!==null&&c!==null&&p!==null&&l!==void 0&&m!==void 0&&g!==void 0){const t=y===null?H===null?H:H-1:ae;I({ctrl_id:m,end_date:d,start_date:s,end_time:c,start_time:p,type:g,p_action:"prev",limit:$===0?R:b,cursor:t})}},w=v.useMemo(()=>B&&A?Ze(A,"rgn_id"):{},[B,A]),I=async t=>{try{const{ctrl_id:n,end_date:C,limit:z,start_date:O,type:W,p_action:ne,cursor:T,other_params:V,end_time:G,start_time:U}=t;let E=`/register?type=${W}&ctrl_id=${n}&start_date=${encodeURIComponent(f(`${O} ${U}`,"DD/MM/YYYY h:mm A").format("YYYY-MM-DD HH:mm:ss"))}&end_date=${encodeURIComponent(f(`${C} ${G}`,"DD/MM/YYYY h:mm A").format("YYYY-MM-DD HH:mm:ss"))}&limit=${z}&p_action=${ne}`,r=`/register?type=${W}&ctrl_id=${n}&start_date=${encodeURIComponent(f(`${O} ${U}`,"DD/MM/YYYY h:mm A").format("YYYY-MM-DD HH:mm:ss"))}&end_date=${encodeURIComponent(f(`${C} ${G}`,"DD/MM/YYYY h:mm A").format("YYYY-MM-DD HH:mm:ss"))}&limit=${z}&p_action=${ne}&cursor=${T}`;V&&(E=E+V,r=r+V);const a=await se({url:typeof T=="number"?r:E}).unwrap();i(x({register_data:a})),i(Ce(a.meta.prev_id)),i(ve(a.meta.next_id)),i(be(a.meta.result_count)),T==null&&i(x({maxCursorId:a.meta.prev_id}))}catch(n){i(x({register_data:null})),i(Ce(null)),i(ve(null)),i(be(0)),console.error("Error al obtener registros:",n)}};return v.useEffect(()=>{d!==null&&c!==null&&p!==null&&s!==null&&l!==void 0&&m!==void 0&&g!==void 0&&I({ctrl_id:m,end_date:d,end_time:c,start_time:p,start_date:s,type:g,p_action:"init",limit:b})},[c,d,p,s,l,m,g]),v.useEffect(()=>{d!==null&&c!==null&&s!==null&&p!==null&&l!==void 0&&m!==void 0&&g!==void 0&&y!==null&&I({ctrl_id:m,end_date:d,end_time:c,start_time:p,start_date:s,type:g,p_action:"lim",limit:b,cursor:Y==null?void 0:Y.meta.prev_id})},[b]),e.jsxs(e.Fragment,{children:[e.jsx(P,{sx:{width:"100%"},children:e.jsx(ke,{sx:{maxWidth:"100%"},children:e.jsxs(h,{direction:"row",alignItems:"center",spacing:3,paddingBottom:1.5,children:[e.jsxs(h,{direction:"row",spacing:1,alignItems:"center",children:[e.jsxs(h,{width:200,children:[e.jsx(k,{htmlFor:"group_site",sx:{display:"none"},children:"Grupo de sitio"}),e.jsxs(q,{displayEmpty:!0,value:l??"",onChange:S,inputProps:{id:"group_site"},renderValue:t=>{if(t.length===0)return e.jsx(e.Fragment,{children:"Grupo de sitio"});const n=w[t]?w[t][0]:void 0;return e.jsx(e.Fragment,{children:n==null?void 0:n.region.region})},IconComponent:({...t})=>l?e.jsx(N,{onClick:n=>{n.stopPropagation(),i(x({rgn_id:void 0,ctrl_id:void 0,register_data:null}))}}):e.jsx(Z,{...t}),sx:{width:200},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx(j,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Grupo de sitio"})}),Object.entries(w).map(([t,n])=>e.jsx(j,{value:t,children:e.jsx(P,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},children:n[0].region.region})},t))]})]}),e.jsxs(h,{width:200,children:[e.jsx(k,{htmlFor:"site_item",sx:{display:"none"},children:"Sitio"}),e.jsxs(q,{disabled:l===void 0||l==="",displayEmpty:!0,value:m??"",onChange:J,inputProps:{id:"site_item"},renderValue:t=>{if(t.length===0)return e.jsx(e.Fragment,{children:"Sitio"});let n;return l!==void 0&&w[l]&&(n=w[l].find(C=>String(C.ctrl_id)===String(t))),e.jsx(e.Fragment,{children:n==null?void 0:n.nodo})},IconComponent:({...t})=>m?e.jsx(N,{onClick:n=>{n.stopPropagation(),i(x({ctrl_id:void 0,register_data:null}))}}):e.jsx(Z,{...t}),sx:{width:200},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx(j,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Sitio"})}),l!==void 0&&w[l]&&w[l].map(t=>e.jsx(j,{value:String(t.ctrl_id),children:e.jsx(P,{sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%"},children:t.nodo})},String(t.ctrl_id)))]})]}),e.jsxs(h,{width:200,children:[e.jsx(k,{htmlFor:"register_type_select",sx:{display:"none"},children:"Tipo registro"}),e.jsxs(q,{displayEmpty:!0,value:g??"",onChange:X,inputProps:{id:"register_type_select"},renderValue:t=>{if(t.length===0)return e.jsx(e.Fragment,{children:"Tipo registro"});const n=pe.find(C=>String(C.value)===String(t));return e.jsx(e.Fragment,{children:n?n.name:"No controlado"})},IconComponent:({...t})=>g?e.jsx(N,{onClick:n=>{n.stopPropagation(),i(x({register_type_name:void 0})),i(je(void 0))}}):e.jsx(Z,{...t}),sx:{width:200},MenuProps:{PaperProps:{style:{maxHeight:200,width:200}}},children:[e.jsx(j,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Tipo de registro"})}),pe.map((t,n)=>e.jsx(j,{value:t.value,children:t.name},n))]})]})]}),e.jsxs(h,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(_,{variant:"body1",children:"Desde:"}),e.jsxs(h,{width:200,children:[e.jsx(k,{htmlFor:"statet-date-select-register",sx:{display:"none"},children:"Fecha Inicial"}),e.jsx(ye,{views:["month","year","day"],format:"DD/MM/YYYY",value:s?f(s,"DD/MM/YYYY"):null,onChange:t=>{t&&i(x({startDate:t.format("DD/MM/YYYY"),register_data:null,...d!==null&&c!==null&&f(`${d} ${c}`,"DD/MM/YYYY h:mm A").isBefore(t)&&{endDate:null,endTime:null}}))},maxDate:f(),slotProps:{textField:{size:"medium",id:"statet-date-select-register",sx:t=>({borderRadius:"10px",backgroundColor:t.palette.tertiary.opacityDark,"& .MuiInputBase-root.MuiOutlinedInput-root":{fontWeight:500,color:t.palette.text.primary,border:"none","& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"},boxShadow:"none"},"& .MuiInputBase-input":{minWidth:120}})}}})]}),e.jsxs(h,{width:120,children:[e.jsx(k,{htmlFor:"start-time-select-register",sx:{display:"none"},children:"Hora"}),e.jsxs(q,{disabled:s===null||s==="",displayEmpty:!0,value:p??"",onChange:le,inputProps:{id:"start-time-select-register"},renderValue:t=>t.length===0?e.jsx(e.Fragment,{children:"H"}):e.jsx(e.Fragment,{children:t}),IconComponent:({...t})=>p?e.jsx(N,{onClick:n=>{n.stopPropagation(),i(x({startTime:void 0,register_data:null}))}}):e.jsx(Z,{...t}),sx:{width:120},MenuProps:{PaperProps:{style:{maxHeight:200,width:120}}},children:[e.jsx(j,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Hora"})}),He.map(t=>e.jsx(j,{value:t.value,children:t.name},t.value))]})]})]}),e.jsxs(h,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(_,{variant:"body1",children:"Hasta:"}),e.jsxs(h,{width:200,children:[e.jsx(k,{htmlFor:"end-date-select-register",sx:{display:"none"},children:"Fecha Final"}),e.jsx(ye,{disabled:s===null,views:["month","year","day"],format:"DD/MM/YYYY",minDate:s?f(s,"DD/MM/YYYY").add(1,"hour"):void 0,maxDate:s?f(s,"DD/MM/YYYY").add(1,"year"):f(),value:d?f(d,"DD/MM/YYYY"):null,onChange:t=>{t&&i(x({endDate:t.format("DD/MM/YYYY"),register_data:null}))},slotProps:{textField:{size:"medium",id:"end-date-select-register",sx:t=>({borderRadius:"10px",backgroundColor:t.palette.tertiary.opacityDark,"& .MuiInputBase-root.MuiOutlinedInput-root":{fontWeight:500,color:t.palette.text.primary,border:"none","& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"},boxShadow:"none"},"& .MuiInputBase-input":{minWidth:120}})}}})]}),e.jsxs(h,{width:120,children:[e.jsx(k,{htmlFor:"end-time-select-register",sx:{display:"none"},children:"Hora"}),e.jsxs(q,{disabled:s===null||p===null||d===null,displayEmpty:!0,value:c??"",onChange:oe,inputProps:{id:"end-time-select-register"},renderValue:t=>t.length===0?e.jsx(e.Fragment,{children:"H"}):e.jsx(e.Fragment,{children:t}),IconComponent:({...t})=>c?e.jsx(N,{onClick:n=>{n.stopPropagation(),i(x({endTime:null,register_data:null}))}}):e.jsx(Z,{...t}),sx:{width:120},MenuProps:{PaperProps:{style:{maxHeight:200,width:120}}},children:[e.jsx(j,{disabled:!0,value:"",children:e.jsx(e.Fragment,{children:"Hora"})}),He.map(t=>e.jsx(j,{value:t.value,children:t.name},t.value))]})]})]})]})})}),e.jsxs(h,{flex:1,overflow:"hidden",children:[o,e.jsx(rt,{handleBackButtonClick:te,handleNextButtonClick:ee})]})]})};function tt(o){return o.length===0?[]:o.map(i=>({accessorKey:i,header:()=>e.jsx("span",{children:i})}))}const nt=()=>{const[o,i]=v.useState({}),[m,l]=v.useState([]),[g]=Re(),s=xe(),{endDate:d,startDate:p,rgn_id:c,ctrl_id:b,register_type:y,register_type_name:Y,register_data:H,table_columns:ae,startTime:$,endTime:R,filters:B}=fe(r=>r.registerStore),A=v.useMemo(()=>(i({}),l([]),tt(ae)),[y]),se=v.useMemo(()=>H===null?[]:H.data.map(a=>{const u={...a};return u.fecha&&(u.fecha=Q(u.fecha,!0)),u.fechacomienzo&&(u.fechacomienzo=Q(u.fechacomienzo,!0)),u.fechatermino&&(u.fechatermino=Q(u.fechatermino,!0)),u.fechaestadofinal&&(u.fechaestadofinal=Q(u.fechaestadofinal,!0)),u.fechacreacion&&(u.fechacreacion=Q(u.fechacreacion,!0)),u}),[H]),S=Ge({data:se,columns:A,getCoreRowModel:Ue(),getFilteredRowModel:Ke(),onColumnVisibilityChange:i,state:{columnVisibility:o,columnFilters:m}}),[J,X]=v.useState(null),le=r=>{y&&X(r.currentTarget)},oe=()=>{X(null)},ee=!!J,te=ee?"filter-table-button":void 0,[w,I]=v.useState(null),t=r=>{y&&I(r.currentTarget)},n=()=>{I(null)},C=!!w,z=C?"search-table-button":void 0,[O,W]=v.useState(null),ne=r=>{W(r.currentTarget)},T=()=>{W(null)},V=!!O,G=V?"download-table-button":void 0,U=r=>{const a=Object.values(B).filter(u=>{var M,F;return((F=(M=u.value)==null?void 0:M.trim)==null?void 0:F.call(M))!==""&&u.id!==r});l(a)},E=async({tipo:r})=>{try{const a=S.getState().columnVisibility,u=Object.keys(a).reduce((M,F)=>{let K=M;return a[F]||(K=K+`&col_delete=${F}`),K},"");if(d!==null&&p!==null&&$!==null&&R!==null&&c!==void 0&&b!==void 0&&y!==void 0){const M=`/register/download/${r}?type=${y}&ctrl_id=${b}&start_date=${encodeURIComponent(f(`${p} ${$}`,"DD/MM/YYYY h:mm A").format("YYYY-MM-DD HH:mm:ss"))}&end_date=${encodeURIComponent(f(`${d} ${R}`,"DD/MM/YYYY h:mm A").format("YYYY-MM-DD HH:mm:ss"))}`+u,F=`reporte_${y}_${Date.now()}.${r==="excel"?"xlsx":r}`,K=await g({url:M}).unwrap(),L=document.createElement("a");L.href=K,L.download=F,L.style.display="none",document.body.appendChild(L),L.click(),document.body.removeChild(L)}}catch(a){console.error("Error al descargar el archivo",a)}};return e.jsx(e.Fragment,{children:e.jsxs(et,{children:[e.jsxs(h,{spacing:1,direction:"row",justifyContent:"space-between",children:[e.jsxs(h,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(_,{variant:"h5",children:Y}),e.jsxs(e.Fragment,{children:[e.jsx(ie,{"aria-describedby":te,onClick:le,children:e.jsx(Qe,{})}),e.jsx(de,{id:te,open:ee,anchorEl:J,onClose:oe,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:e.jsx(re,{children:e.jsx(we,{sx:{maxHeight:300,overflowY:"auto"},children:S.getAllLeafColumns().map(r=>e.jsx(ce,{disablePadding:!0,children:e.jsxs(me,{sx:{cursor:"inherit"},children:[e.jsx(Te,{checked:r.getIsVisible(),onChange:()=>{r.getIsVisible()?(r.toggleVisibility(!1),s(Me({id:r.id,value:null}))):r.toggleVisibility(!0),U(r.id)},id:`switch-${r.id}-id`}),e.jsx(ue,{primary:r.id,sx:{textTransform:"capitalize"}})]})},r.id))})})})]}),e.jsxs(e.Fragment,{children:[e.jsx(ie,{"aria-describedby":z,onClick:t,children:e.jsx(Ne,{})}),e.jsx(de,{id:z,open:C,anchorEl:w,onClose:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:e.jsx(re,{children:e.jsxs(h,{spacing:1,p:2,maxHeight:400,minWidth:400,overflow:"hidden",children:[e.jsx(_,{variant:"subtitle1",children:"BÃºsqueda"}),e.jsx(h,{flex:1,spacing:1,overflow:"auto",children:e.jsx(h,{flex:1,spacing:2,overflow:"auto",children:S.getHeaderGroups().map(r=>e.jsx(v.Fragment,{children:r.headers.map(a=>{var u;return e.jsxs(h,{direction:"row",spacing:2,alignItems:"end",justifyContent:"space-between",children:[e.jsx(_,{variant:"body1",sx:{textTransform:"capitalize"},children:a.id}),!a.isPlaceholder&&a.column.getCanFilter()&&e.jsx(h,{width:300,direction:"row",alignItems:"center",children:e.jsx(Ve,{value:((u=B[a.column.id])==null?void 0:u.value)??"",onChange:M=>{s(Me({id:a.column.id,value:{id:a.column.id,value:M.target.value}}))},id:`filter-column-by-${a.column.id}`,variant:"standard",fullWidth:!0})})]},a.id)})},r.id))})}),e.jsxs(h,{direction:"row",spacing:1,alignItems:"center",justifyContent:"end",children:[e.jsx(he,{onClick:n,variant:"text",color:"tertiary",size:"medium",children:"Cancelar"}),e.jsx(he,{variant:"contained",color:"primary",size:"medium",type:"submit",onClick:()=>{U(),n()},children:"Buscar"})]})]})})})]})]}),e.jsxs(e.Fragment,{children:[e.jsx(he,{variant:"contained",color:"primary","aria-describedby":G,onClick:ne,startIcon:e.jsx(Ee,{}),children:"Descargar"}),e.jsx(de,{id:G,open:V,anchorEl:O,onClose:T,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(re,{children:e.jsxs(we,{children:[e.jsx(ce,{disablePadding:!0,children:e.jsxs(me,{sx:{cursor:"inherit"},onClick:()=>{E({tipo:"excel"})},children:[e.jsx(Se,{children:e.jsx(Je,{})}),e.jsx(ue,{primary:"Descargar Excel"})]})}),e.jsx(ce,{disablePadding:!0,children:e.jsxs(me,{sx:{cursor:"inherit"},onClick:()=>{E({tipo:"csv"})},children:[e.jsx(Se,{children:e.jsx(qe,{})}),e.jsx(ue,{primary:"Descargar CSV"})]})})]})})})]})]}),e.jsx(P,{sx:{mt:1,flex:1,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Le,{component:Xe,sx:{height:"100%",display:"flex",flexDirection:"column",overflowY:"auto"},children:e.jsx(ke,{sx:{maxWidth:"100%",height:"100%","& .simplebar-content":{width:"100%",height:"100%"}},children:e.jsxs(h,{height:"100%",width:"100%",children:[e.jsxs(Be,{size:"medium",stickyHeader:!0,"aria-label":"sticky table",sx:r=>({"& .MuiTableCell-root":{borderColor:"divider"},"& tbody tr:hover":{backgroundColor:"tertiary.opacityLight"},"& thead .MuiTableCell-root":{backgroundColor:r.palette.mode==="light"?"#EEEFEF":"#2E4142"}}),children:[e.jsx(Ae,{sx:{position:"sticky",top:0,zIndex:1e3,textTransform:"capitalize"},children:S.getHeaderGroups().map(r=>e.jsx(De,{children:r.headers.map(a=>e.jsx(_e,{colSpan:a.colSpan,children:a.isPlaceholder?null:e.jsx("div",{children:Ye(a.column.columnDef.header,a.getContext())})},a.id))},r.id))}),e.jsx(ze,{children:S.getRowModel().rows.map(r=>e.jsx(De,{children:r.getVisibleCells().map(a=>e.jsx(_e,{children:Ye(a.column.columnDef.cell,a.getContext())},a.id))},r.id))})]}),d!==null&&p!==null&&R!==null&&$!==null&&c!==void 0&&b!==void 0&&y!==void 0&&S.getCoreRowModel().rows.length===0&&e.jsx(P,{sx:{flex:1,display:"grid",placeContent:"center"},children:e.jsx(_,{variant:"body1",children:"Registros no encontrados."})}),(d===null||R===null||$===null||p===null||c===void 0||b===void 0||y===void 0)&&e.jsx(P,{sx:{flex:1,display:"grid",placeContent:"center"},children:e.jsx(_,{variant:"body1",children:"Empieza a filtrar para ver el registro."})})]})})})})]})})},rt=({handleBackButtonClick:o,handleNextButtonClick:i})=>{const{limit:m,register_data:l,maxCursorId:g,prevIdResponse:s}=fe(c=>c.registerStore),d=xe(),p=c=>{d(x({limit:Number(c.target.value)}))};return e.jsx(e.Fragment,{children:e.jsxs(h,{spacing:1,direction:"row",alignItems:"center",justifyContent:"end",px:1,py:.5,sx:{backgroundColor:"custom.trackBackground",borderTopWidth:1,borderTopStyle:"solid",borderTopColor:"divider",borderRadius:"0 0 8px 8px"},children:[e.jsxs(h,{spacing:1,direction:"row",alignItems:"center",children:[e.jsx(_,{color:"textPrimary",variant:"body1",children:"Filas:"}),e.jsxs(Fe,{id:"control-select",name:"control-select",value:m,onChange:p,size:"small",inputProps:{"aria-label":"Select RowsPerPage"},SelectDisplayProps:{style:{paddingTop:5,paddingBottom:5}},children:[e.jsx(j,{value:25,children:25}),e.jsx(j,{value:50,children:50}),e.jsx(j,{value:100,children:100})]})]}),e.jsxs(h,{spacing:1,direction:"row",alignItems:"center",children:[e.jsx(ie,{onClick:o,disabled:g===null||(l!=null&&l.meta.prev_id?g<=l.meta.prev_id:!1),"aria-label":"previous page",children:e.jsx(Oe,{})}),e.jsx(ie,{onClick:i,disabled:g===null||s===null,"aria-label":"next page",children:e.jsx(We,{})})]})]})})},ct=()=>e.jsx(e.Fragment,{children:e.jsxs(P,{sx:{maxWidth:1600,width:"100%",height:"100%",overflow:"hidden",mx:"auto",p:{xs:2,sm:3},display:"flex",flexDirection:"column",gap:2},children:[e.jsx(_,{variant:"h4",children:"Registro de eventos"}),e.jsx(nt,{})]})});export{ct as default};
