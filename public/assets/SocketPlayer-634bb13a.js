import{r as s,p as h,aW as p,X as x,j as t,B as E,aJ as j,am as k,aX as S}from"./index-87ce3177.js";import{l as C}from"./index-fb0b8ccc.js";const R=({q:u,ip:n,ctrl_id:i})=>{const o=s.useRef(null),r=s.useRef(null),[l,d]=s.useState(!0),[a,c]=s.useState(null),f=h(),m=e=>{e.currentTarget===e.target&&f(S())};return s.useEffect(()=>(r.current||(r.current=C(`${x}/stream/${i}/${n}/${u}`,{auth:{token:p.get("token")}})),r.current.on("videostream",e=>{o.current&&e&&(o.current.src=e)}),r.current.on("isLoading",e=>{d(e)}),r.current.on("isError",(e,g)=>{c({isError:e,message:g})}),r.current.on("connect_error",e=>{c({isError:!0,message:"Conexion rechazada"})}),r.current.on("error",e=>{c({isError:!0,message:"Ocurrio un error al conectarse."})}),()=>{r.current&&(r.current.disconnect(),r.current=null)}),[i,n,u]),t.jsx(t.Fragment,{children:t.jsxs(E,{sx:{width:"100%",height:"100%",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},onDoubleClickCapture:m,children:[l&&t.jsx(j,{}),r.current&&!l&&!a&&t.jsx("img",{ref:o,style:{width:"100%",height:"100%",position:"absolute"},alt:`Video Stream ${n}`,onDoubleClickCapture:m}),a&&t.jsx(k,{children:a.message})]})})};export{R as S};
